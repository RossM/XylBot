package mafia;

# The quick guide to statuses
# Usable in roles:
#   STATUS          ACTION    DEFAULT
#   auto                                An action which is automatically enqueued whenever an "action" trigger occurs.
#   census          census    team      The type of census to perform. "team" checks the number of players on each team, but not roles. "weapon" checks
#                                       the number of players with each type of weapon. "act*" counts the number of roles able to use a specific action,
#                                       and their true role names. The name of a team counts the true role names of the players on the given team.
#   convert         psych     sk        Three comma-seperated items: the team of the player to be converted, the new role, and the new team.
#                                       If the new role is omitted, role does not change. If the team is omitted, it matches the player using the action's.
#   copy            copy                If 'noncontrol', the action's user is not changed (so the original user will recieve any result).
#   dayaction                           If set to 'public', the player's day actions are publically announced.
#   deathrole                 true role The role which is revealed when the player dies.
#   deathteam                 true team The team which is revealed when the player dies.
#   disabletime     disable   2         The number of phases the target will be disabled for, starting with the current phase.
#                   disablebase
#   disease                             The percentage chance of the player dying of disease each morning.
#   doompercent     doom      0         The percentage doom to add. A player who reaches 100% doom dies.
#   failure                             The percentage chance of any action the player takes failing silently.
#   failure*                            The percentage chance of a specific action failing silently.
#   give            giveability         A comma-seperated list of "action:uses" to give. One is chosen at random. Default: kill:1,protect:1,inspect:1,block:1.
#   give*           giveability         A status to give along with an appropriate action
#   groupactions                        A comma-seperated list of actions the role has that should count as using the player's team's action for the phase.
#   guard           guard     ab        Who should get killed if the player being guarded is attacked: "a" attacker, "b" bodyguard, "ab" both.
#   hidden                              Causes all actions targeting the player to fail silently.
#   immune*                             Confers immunity to an action. If a number, it only works that many times.
#   immunekill                          Confers immunity to 'kill' and similar actions. If a number, it only works that many times.
#   infect          infect    player's  The new role which the infect action gives the target. (The target's team does not change.)
#   inherrittemplate			A template that the role gains when the 'inherit' trigger goes off. If '*', no template is gained, but previous templates are retained.
#   inspect                             The team the player appears to be part of to cop inspections. Also affects role cop inspections.
#   inspectrole                         The role the player appears to have to role cop inspections.
#   invisible                           If set, the player will not appear in the results of 'track', 'watch' or 'patrol'.
#   lyncher                             The team which wins by lynching this player (use with onlynch=lyncherwins). Also used in the lyncher's role text.
#   markedfor:*				The player is a possible target for #?m or #m with the given action.
#   maxvote                   1         The number of votes a player has.
#   morphstatus     morph               A list of statuses to give after morphing.
#   mutate          mutate              If 'fixteam', the player gets a role appropriate for their old team. If 'newteam', the player's team changes to match the new role.
#                   selfmutate          If 'norarity' is included then rarity is not considered when selecting a role. If 'template:X', adds the X template.
#                                       If 'saverole' is included then any existing templates are kept after mutating.
#   onall                               A trigger that happens every day and every dusk
#   onbuddydeath                        A trigger that happens whenever the player's buddy dies.
#   onday                               A trigger that happens every day.
#   onday*                              A trigger that happens on a specific day.
#   ondrop				A trigger that happens whenever the player drops an item, including on death.
#   ondrop:*				A trigger that happens whenever the player drops a specific item, including on death.
#   ondusk                              A trigger that happens at the beginning of night, before actions are submitted
#   ondusk*                             A trigger that happens at the beginning of a specific night, before actions are submitted
#   ondeath                             A trigger that happens whenever any player dies.
#   ondeath1                            A trigger that happens whenever any player dies, but only once per dead player.
#   ongrave                             A trigger that happens when the player dies.
#   onkill                              A trigger that happens when you kill a player (only if you are still alive).
#   onnight                             A trigger that happens every night.
#   onnight*                            A trigger that happens on a specific night.
#   onloststatus:*                      A trigger that happens when a specific status is lost.
#   onlynch                             A special trigger that happens when the player is lynched.
#   onpulse				A trigger that happens every 10 seconds during the day.
#   onroledeath:*                       A trigger that happens whenever a player with a specific role dies.
#   onroledeath1:*                      A trigger that happens whenever a player with a specific role dies, but only once per dead player.
#   onstart				A trigger that happens once at the start of the game, or when the role is gained.
#   ontarget                            A trigger that happens whenever the player is targeted by an action.
#   ontarget:*				A trigger that happens whenever the player is targeted by a specific action.
#   onvote				A trigger that happens whenever the player votes.
#   onvoted				A trigger that happens whenever the player is voted.
#   poisontime      poison    2         The number of phases before the target dies, including the current phase.
#   recruit         recruit   old role  The new role which the recruit action gives the target. (The target's team is always changed to the recruiter's team.)
#                   superrecruit
#   recruited                           Indicates that the player is a cult recruit, and will die if the leader dies. Recruits can also be deculted.
#   reflect                             Causes all actions targeting the player to bounce back on the player who used them.
#   replace*                            Causes a given action to be replaced by another when the player uses it.
#   revive                              The number of times a player will revive on death. If set to 'transform', the player will transform after reviving.
#   sanity          inspect   normal    The type of inspection results a cop gets. "normal" gives accurate results. "paranoid" always gives mafia.
#                                       "naive" always gives town. "insane" gives mafia for town, and town for mafia or neutral. "random" gives either
#                                       mafia or town with a 50% chance of either. "role" gives the target's role. "weapon" checks for any weapon.
#                                       "weapon:*" checks for a specific weapon. "ability:*" checks for an ability. Adding "notarget" doesn't report the
#                                       target. "wolf" checks for a wolf. "cult" checks for a cultist. "pm" gives a full role PM.
#   set             setstatus           A ';'-seperated list of status,value pairs to give.
#   stealuses       steal     *         The maximum number of uses of an ability to steal with 'steal' or 'absorb'.
#   tag*                                These have no actual effect, but are used to indicate a property for template sanity-checking.
#   teamaltrole*                        What the role changes to if it moves to a player of a different team.
#   timer                               The delay before the player's day actions take effect.
#   track           track               If set to "notarget", the target of the track is not reported, only the result.
#                   watch
#                   patrol
#   transform       transform           The role and team a player transforms to, seperated by a comma. If no team is given, defaults to old team.
#   weapon                              The weapon the role has, or 'none' if it never has a weapon. If not set, the team's weapon (if any) is used.
#   wolf				True if the role is a werewolf.
# Given by temporary abilities: (T) = temporary status, (S) = safe status
#   blocked                  (T)        Set to indicate that all of a player's actions for the current phase are blocked.
#   bussed                   (T)        The player who has been exchanged with this player by a bus driver.
#   disabled                 (S)        The number of phases the player is disabled for, including the current phase.
#   extravote                (S)        The number of extra votes (positive or negative) a player has for the next/current day.
#   guarded_by               (T)        The player who used a 'guard' action on this player.
#   poisoned                 (S)        The number of phases the player has left to live before dying of poison, including the current phase.
# Bookkeeping:
#   act*                                The number of uses of a given action remaining.
#   group*                              The group which provides a given action.
#   hidden_by                (T)        The player who set hidden status on this player.
#   killedby                 (S)        The identity of the player who killed this player, or empty for no single killer (such as a lynch).
#   recieved_blocked_message (T)        Set to indicate that the player has already recieved "You have been blocked." this phase.
#   reflect_by               (T)        The player who set a reflect shield on this player.
#
# Triggers other than onlynch can have any of the following values:
#   action                              The player takes an automatic action, depending on the 'auto' status.
#   action:*                            The player takes an automatic action.
#   activate:*				The player takes an action, but checks for limited-uses first, and can be blocked/redirected/etc.
#   inherit                             The player transforms to the role of the player who caused the trigger. (Team does not change.)
#   silenttransform                     The player transforms to a new role depending on the 'transform' status. The player is not informed.
#   silenttransform:*,*                 The player transforms to a new role. The player is not informed.
#   transform                           The player transforms to a new role depending on the 'transform' status.
#   transform:*,*                       The player transforms to a new role.
#   use:*				The player takes an automatic action, which can be blocked/redirected/etc
#   win                                 The player's team immediately wins.
#   winsoft                             The player's team wins, but the game continues.
# The onlynch trigger instead has the following possible values:
#   action                              The player takes an automatic action, depending on the 'auto' status.
#   action:*                            The player takes an automatic action.
#   lyncherwins                         The team given in the 'lyncher' status immediately wins.
#   lyncherwinssoft                     The team given in the 'lyncher' status wins, but the game continues.
#   revive                              The player returns to life.
#   supersaint                          The player who cast the lynching vote dies.
#   transform                           The player revives, then transforms to a new role depending on the 'transform' status.
#   transform:*,*                       The player transforms to a new role.
#   win                                 The player's team immediately wins.
#   winsoft                             The player's team wins, but the game continues.

# Role naming conventions
# The following suffixes are common to many roles, indicating that the role is derived from a basic role.
# *i       [cop] x50 Insane sanity
# *n       [cop] x50 Naive sanity
# *p       [cop] x50 Paranoid sanity
# *r       [cop] --- Random sanity
# *z       [cop] --- Stoned (neutral) sanity
# *q       [doc] x20 Quack doctor; 100% failure
# *auto    [any] x50 Automatically hits a random target
# *backup  [any]  x4 Backup role: no ability, but becomes the role if someone with that role dies.
# *bud     [any] x50 Dedicated role; always targets the same player
# *cow     [any] x30 Cowardly; has a one-shot hide
# *day     [any]     Day ability
# *dm      [any] x50 Death miller
# *fail    [any] x20 100% failure rate
# *false   [any] x50 Actually vanilla
# *half    [any]  x6 50% failure rate
# *ik      [any] x20 Kill-immune
# *m       [any] x30 Miller
# *msk     [any] x50 SK miller
# *my      [any] x15 Mystery role; shows up as "Mystery Role" with a "mystery" ability.
# *nm      [any] x30 Amnesiac; starts with no ability, 1 in 3 chance of changing each morning.
# *paci    [any] x80 Pacifist; returns to life if lynched
# *psycho  [any] x50 Kills randomly and acts as an SK miller in addition to normal properties
# *q       [any] x15 Secret role; shows up as "Secret Role"
# *rad     [any] x50 Dooms target (50%) in addition to normal effect
# *rev     [any] x10 Revives once on death
# *skulk   [any] x50 Skulking; dies if targeted
# *splat   [any] x50 Target dies in addition to normal effect
# *x       [any]  x5 One-Shot, usable at any time
# *1       [any]  x5 One-Shot

# Role groupings
# The setup generator divides roles into groupings using the 'countas'
# property, and tries not to generate more than one of each grouping.
# The groupings, what they mean, and the role they should be set to count
# as are:
#
# Cop [c] - Gets information on another player's alignment, OR on who killed
#		another player.
# Role Cop [crole] - Gets information on another player's abilities.
# Tracker [trk] - Gets information on night actions or targets.
# Census [cens] - Gets information on the setup as a whole.
# Nonsane Cop [ci] - Any information role that gives incorrect or no information.
# Roleblocker [rb] - Can stop a night kill given knowledge of who is making it.
# Doctor [d] - Can stop a night kill given knowledge of who is being killed.
# Dedicated Doctor [dbud] - Protects a specific other player from night kills.
# Quack [dq] - Any role that doesn't actually work.
# Vigilante [v] - Can kill another player.
# Jack of All Trades [jat] - Can use three or more actions, or an action with
# 		random effects, or gains random actions.
# Backup [backup] - Gains a dead player's role or ability.
# Copycat [copy] - Duplicates a living player's role or ability.
# Kill-Immune [tik] - Is immune to kills, or returns to life when killed, or
# 		kills anyone who targets it with a kill.
# Goo [goo] - Does something to anyone who targets it that neither kills them
# 		nor stops the kill.
# Resurrecter [resu] - Can bring another player back from the dead.
# Inventor [giver] - Can give another player an extra action.
# Mad Scientist [sci] - Can change another player's role completely.
# Super Voter [vot2] - Has some sort of extra influence on lynch decisions.
# Missionary [miss] - Kills cultists.
# Psychiatrist [psy] - Stops SKs.
# Super-Saint [ss] - Does something unpleasant when lynched.
# Anarchist [anar] - Confuses actions.
# Sibling [sib] - Dies when another role does, or another role dies when it does (including only if nightkilled).
# Friend [fri] - Easily confirmable.
# Miller [tm] - Confuses inspection roles.
# Vanilla [t] - Does nothing.

my $townietips = ["You may not have any special powers, but you do have a vote. Use it wisely.",
		"Millers believe they are Townies, but inspections on them come up mafia.",
		"Some Townies are reflective. Night actions targeting a Reflective Townie will affect the player who used them instead.",
		"Townie is the most common role. Don't be surprised if there are multiple Townies in a game."];

my $coptips = ["If a player changes teams the same night you inspect them, you will learn the new team.",
		"If there are two or more Cops in the game, one of them is probably insane, naive, or paranoid."];
		
my $vigtips = ["Be careful - if the number of town players is close to the number of mafia players, killing a town player might lose the game.",
		"If you don't want to kill anyone, submit a 'none' action.",
		"Serial Killers often claim to be Vigilantes, so claiming your role may make people more suspicious.",
		"As long as you're alive, the mafia and any Serial Killers won't win.",
		"Mafia Godfathers are immune to night kills."];

my $doctips = ["Quack Doctors are told they are Doctors, but their protections don't work.",
		"If there are two or more Doctors in a game, one of them is probably a quack."],

my $santa_abilities =	"copy:1,hide:1,shield:1,bus:1,block:1,randomize:1,redirectkill:1,redirect:1,protect:1,superprotect:1,guard:1," .
			"morph:1,channel:1,gift:1,copyability:1,steal:1,swap:1,psych:1,curse:1,motivate:1,voteblock:1,command:1,daypoison:1," .
			"dayfriend:1,daypardon:1,suicidebomb:1,kill:1,doom:1,superkill:1,reverseprotect:1,mutate:1,selfmutate:1," .
			"evolve:1,resurrect:1,frame:1,clear:1,dayautopsy:1,watch:1,track:1,patrol:1,inspect:1,dayinspect:1,inspectrole:1," .
			"daycensus:1,eavesdrop:1,mup:1,hack:1,mimic:1,isolate:1,kill2:1,abduct:1,negate:1,dematerialize:1,reincarnate:1," .
			"raise:1,stealvote:1,absorb:1,replicate:1,trick:1,drain:1,eradicate:1,disable:1,cpr:1,wail:1,exorcise:1,defile:1," .
			"exchange:1,attract:1,karma:1,randomizeall:1,blockall:1,giftall:1,sacrifice:1,irradiate:1,randomkill:1,shuffle:1," .
			"cheat:1";

my $santa_unlimited_abilities = $santa_abilities;
$santa_unlimited_abilities =~ s/:1//g;
$dreamer_abilities = join ',', grep { !/^day|^x|all$|kill2/ } split /,/, $santa_unlimited_abilities;

our %role_config = (
	# Roles - Basic town
	
	t => {
		# This role is handled specially in the setup generator.
		name => "Townie",
		roletext => "",
		help => "You win when all the bad guys are gone.",
		actions => [],
		status => {
			evolveto => 'c,d,v,rb',
			teamaltrolemafia => 'm',
			teamaltrolesurvivor => 'sv',
			teamaltrolesk => 'sk',
		},
		setup => "town/basic",
		countas => 't',
		rarity => 1,
		#nonadaptive => 1,
		unlimited => 1,
		theme => "normal,foxworld,xylworld",
	},
	c => {
		# This role is handled specially in the setup generator.
		name => "Cop",
		roletext => "You can inspect another player to learn their alignment. Your results are not guaranteed to be accurate.",
		actions => ["inspect"],
		status => {
			weapon => 'gun',
			evolveto => 'f,stalk',
		},
		minplayers => 4,
		setup => "town/basic/power,mafia-ally",
		countas => 'c',
		changeto => "cbackup",
		power => 1,
		rarity => 1,
	},
	d => {
		# This role is handled specially in the setup generator.
		name => "Doctor",
		roletext => "You can protect other players from kills. Each protection stops one kill, and lasts for one night.",
		actions => ["protect"],
		status => {
			evolveto => 'drev,cmed',
			tagnoday => '*',
		},
		minteam => 2,
		minplayers => 4,
		minscum => 1,
		setup => "town/basic/power,mafia/power,mafia-ally",
		countas => 'd',
		changeto => "dbackup",
		power => 0.5,
		rarity => 1,
		theme => "normal,foxworld",
	},
	v => {
		name => "Vigilante",
		roletext => "You can kill other players.",
		actions => ["kill"],
		status => {
			weapon => 'gun',
			evolveto => 'vik,merc',
		},
		minplayers => 4,
		setup => "town/basic/power",
		countas => 'v',
		power => 0.5,
		rarity => 1,
	},
	rb => {
		name => "Roleblocker",
		roletext => "You can block another player's action each night. You are immune to roleblocks.",
		actions => ["block"],
		status => {
			immuneblock => '*',
			evolveto => 'dis,red',
			tagnoday => '*',
		},
		minplayers => 4,
		setup => "town/basic/power,mafia/basic/power,mafia-ally",
		countas => 'rb',
		power => 0.55,
		rarity => 1,
	},
	
	# Roles - Weird town - Cop variants & information roles - Standard night cops

	cs => {
		name => "Sane Cop",
		roletext => "You can inspect another player to learn their alignment. Your results are guaranteed to be sane.",
		actions => ["inspect"],
		status => {
			sanity => 'normal',
			weapon => 'gun',
		},
		minplayers => 4,
		setup => "town/power",
		countas => "c",
		power => 0.5,
		rarity => 50,
	},
	cn => {
		alias => 'c+template_n',
		minplayers => 4,
		setup => "town",
		power => -0.2,
		rarity => 50,
		countas => 'ci',
	},
	ci => {
		alias => 'c+template_i',
		minplayers => 4,
		setup => "town",
		power => -0.2,
		rarity => 50,
		countas => 'ci',
	},
	cp => {
		alias => 'c+template_p',
		minplayers => 4,
		setup => "town",
		power => -0.2,
		rarity => 50,
		countas => 'ci',
	},
	cr => {
		alias => 'c+template_r',
		minplayers => 4,
		setup => "town",
		power => -0.5,
		rarity => 500,
		countas => 'ci',
	},
	cz => {
		alias => 'c+template_z',
		minplayers => 4,
		setup => "town",
		power => -0.2,
		rarity => 500,
		countas => 'ci',
	},
	
	# Roles - Weird town - Cop variants & information roles - Standard day cops

	cday => {
		alias => 'c+template_day',
		countas => "c",
		setup => "town/power,mafia-ally",
		power => 0.5,
		rarity => 3,
		minplayers => 3,
	},
	cdayn => {
		alias => 'cday+template_n',
		setup => "town",
		power => -0.2,
		rarity => 150,
		countas => 'ci',
		minplayers => 3,
	},
	cnday => { alias => 'cdayn' },
	cdayp => {
		alias => 'cday+template_p',
		setup => "town",
		power => -0.2,
		rarity => 150,
		countas => 'ci',
		minplayers => 3,
	},
	cpday => { alias => 'cdayp' },
	cdayi => {
		alias => 'cday+template_i',
		setup => "town",
		power => -0.2,
		rarity => 150,
		countas => 'ci',
		minplayers => 3,
	},
	ciday => { alias => 'cdayi' },
	cdayr => {
		alias => 'cday+template_r',
		setup => "town",
		power => -0.5,
		rarity => 1500,
		countas => 'ci',
		minplayers => 3,
	},
	crday => { alias => 'cdayr' },
	cdayz => {
		alias => 'cday+template_z',
		minplayers => 4,
		setup => "town",
		power => -0.2,
		rarity => 1500,
		countas => 'ci',
	},
	czday => { alias => 'cdayz' },
	
	# Roles - Weird town - Cop variants & information roles - Other cops
	
	cbackup => {
		name => "Retired Cop",
		roletext => "When the cop dies, you become a Cop.",
		actions => [],
		status => {
			"onroledeath1:c" => "transform",
			transform => "cbackup=c",
			weapon => 'gun',
			backupactions => 'inspect',
		},
		nocombine => 1,
		countas => "backup",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 4,
		setup_checks => ["c,minrolec,1,minrolecn,1,minroleci,1,minrolecp,1"],
	},
	cbackupi => {
		alias => 'cbackup+template_i',
		countas => "backup",
		minplayers => 4,
		setup => "town",
		power => 0,
		rarity => 200,
		setup_checks => ["c,minrolec,1,minrolecn,1,minroleci,1,minrolecp,1"],
	},
	cibackup => { alias => 'cbackupi' },
	cbackupn => {
		alias => 'cbackup+template_n',
		minplayers => 4,
		setup => "town",
		power => 0,
		rarity => 200,
		countas => "backup",
		setup_checks => ["c,minrolec,1,minrolecn,1,minroleci,1,minrolecp,1"],
	},
	cnbackup => { alias => 'cbackupn' },
	cbackupp => {
		alias => 'cbackup+template_p',
		minplayers => 4,
		setup => "town",
		power => 0,
		rarity => 200,
		countas => "backup",
		setup_checks => ["c,minrolec,1,minrolecn,1,minroleci,1,minrolecp,1"],
	},
	cpbackup => { alias => 'cbackupp' },
	crole => {
		name => "Role Cop",
		roletext => "You can inspect people to find out their rolenames.",
		actions => ["inspect"],
		status => {
			sanity => 'role',
			weapon => 'gun',
			evolveto => 'mor',
		},
		minplayers => 4,
		setup => "town/power,mafia/power,mafia-ally",
		power => 0.5,
		rarity => 3,
	},
	crolefail => {
		alias => 'crole+template_fail',
		minplayers => 4,
		setup => "town,mafia",
		countas => 'dq',
		power => -0.2,
		rarity => 20,
	},
	crolex => {
		name => "One-Shot Role Cop",
		alias => 'crole+template_x',
		status => {
			evolveto => 'morx',
		},
		countas => 'crole',
		minplayers => 4,
		setup => "town/power",
		power => 0.3,
		rarity => 50,
		theme => "normal,xylworld",
	},
	crolenm => {
		alias => 'crole+template_nm',
		countas => 'crole',
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	cx => {
		name => "One-Shot Cop",
		alias => 'cs+template_x',
		status => {
			evolveto => 'cs,cday,cfriend',
		},
		countas => 'c',
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 50,
		theme => "normal,xylworld",
	},
	csx => { alias => 'cx' },
	c1 => { alias => 'cx' },
	cs1 => { alias => 'cx' },
	cnm => {
		alias => 'c+template_nm',
		countas => 'c',
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	cdm => {
		alias => 'c+template_dm',
		minplayers => 4,
		setup => "town",
		countas => "c",
		power => 0.5,
		rarity => 500,
	},
	cauto => {
		name => "Blogger",
		roletext => "You will learn the alignment of a random player each night. Your inspections are guaranteed to be sane.",
		alias => 'cs+template_auto',
		minplayers => 4,
		setup => "town",
		countas => "c",
		power => 1,
		rarity => 500,
	},
	csauto => { alias => 'cauto' },
	croleauto => {
		name => "Employment Agent",
		alias => 'crole+template_auto',
		setup => "town",
		countas => "crole",
		power => 0.5,
		rarity => 500,
	},
	casc => {
		name => "Inquisitor",
		alias => 'c+template_asc',
		countas => "c",
		power => 0.5,
		# No setup
	},
	ciasc => { alias => "casc+template_i" },
	cnasc => { alias => "casc+template_n" },
	cpasc => { alias => "casc+template_p" },
	crasc => { alias => "casc+template_r" },
	czasc => { alias => "casc+template_z" },
	cbackupasc => {
		name => "Retired Inquisitor",
		roletext => "When the cop dies, you become an Inquisitor.",
		alias => 'cbackup+template_asc',
		countas => "backup",
		power => 0.5,
		# No setup
	},
	cbackupiasc => { alias => "cbackupasc+template_i" },
	cbackupnasc => { alias => "cbackupasc+template_n" },
	cbackuppasc => { alias => "cbackupasc+template_p" },
	cbackuprasc => { alias => "cbackupasc+template_r" },
	cbackupzasc => { alias => "cbackupasc+template_z" },
	crev => {
		name => "Troubleshooter",
		alias => 'c+template_rev',
		countas => "c",
		power => 0.5,
		# No setup
	},
	cik => {
		name => "Bulletproof Cop",
		alias => 'c+template_ik',
		countas => "c",
		power => 0.5,
		# No setup
	},
	chalf => {
		name => "Psychic",
		roletext => "You can use your psychic powers to learn another player's alignment, but this has a 50% chance of failing. Your results are not guaranteed to be accurate.",
		actions => ["inspect"],
		status => {
			failurinspect => 50,
			weapon => 'gun',
			evolveto => 'c',
		},
		# No setup
		countas => 'c',
	},
	template_silly => {
		name => "Silly #NAME",
		roletext => "#TEXT You're also very silly.",
		template => 1,
		#secret => 1,
	},
	chalfsilly => {
		alias => 'chalf+template_silly',
		countas => 'c',
		minplayers => 4,
		setup => "town",
		rarity => 100,
		#secret => 1,
	},


	# Roles - Weird town - Cop variants & information roles - Other information roles
	
	trk => {
		name => "Tracker",
		roletext => "You can track another player. You will be told who that player targeted, if any.",
		actions => ["track"],
		status => {
			tagnoday => '*',
		},
		minplayers => 4,
		setup => "town/power,mafia,mafia-ally",
		countas => 'trk',
		power => 0.55,
		rarity => 2,
	},
	trkbud => {
		name => "Peeping Tom",
		roletext => "Each night, you will learn who BUDDY1 targeted with their night action.",
		alias => 'trk+template_bud',
		minplayers => 4,
		setup => "town,mafia,survivor",
		countas => "trk",
		power => 0.2,
		rarity => 500,
	},
	trkbudnt => {
		name => "Myopic Peeping Tom",
		roletext => "Each night, you will learn who another player targeted with their night action. It is the same player each night, "
			. "but you don't know who.",
		actions => ["autotrack"],
		status => {
			default => '#B',
			track => 'notarget',
			evolveto => 'trkbud',
		},
		minplayers => 4,
		setup => "town",
		countas => "trk",
		power => 0.1,
		rarity => 1000,
	},
	w => {
		name => "Watcher",
		roletext => "You can watch another player. You will be told if that player used an ability.",
		actions => ["watch"],
		status => {
			evolveto => 'trk',
			tagnoday => '*',
		},
		countas => "trk",
		minplayers => 4,
		setup => "town,mafia,mafia-ally",
		power => 0.5,
		rarity => 5,
		theme => "normal,foxworld",
	},
	gs => {
		name => "Gunsmith",
		roletext => "You can check the gun registry and see whether a player has a gun. Most mafia, cops, vigilantes have guns, but serial killers don't.",
		actions => ["inspect"],
		status => {
			sanity => "weapon:gun",
			evolveto => 'crole',
		},
		minplayers => 4,
		countas => 'crole',
		setup => "town,mafia,mafia-ally",
		power => 0.5,
		rarity => 50,
	},
	f => {
		name => "Forensics Expert",
		roletext => "You may perform an autopsy on a dead player, possibly giving you information about that player's killer.",
		actions => ["dayautopsy"],
		countas => 'c',
		setup => "town/power",
		minplayers => 12,
		minscum => 5,
		power => 0.5,
		rarity => 50,
	},
	fhalf => {
		alias => 'f+template_half',
		countas => 'c',
		setup => "town/power",
		minplayers => 10,
		minscum => 4,
		power => 0.5,
		rarity => 200,
	},
	ffail => {
		alias => 'f+template_fail',
		setup => "town",
		minplayers => 10,
		minscum => 3,
		power => 0,
		rarity => 200,
		countas => 'ci',
	},
	fnm => {
		alias => 'f+template_nm',
		setup => "town",
		minplayers => 6,
		minscum => 4,
		power => 1,
		rarity => 500,
		countas => 'c',
	},
	f1 => {
		alias => 'f+template_1',
		countas => 'c',
		setup => "town/power",
		minscum => 3,
		power => 1,
		rarity => 100,
		minplayers => 7,
	},
	f1lat => {
		alias => 'f1+template_lat',
		countas => 'c',
		setup => "town/power",
		minplayers => 6,
		minscum => 2,
		power => 0.5,
		rarity => 500,
	},
	flat1 => { alias => 'f1lat' },
	cens => {
		name => "Census Taker",
		roletext => "Once during the game, you may recieve a list of how many players on each team are alive.",
		actions => ["daycensus;1"],
		status => {
			census => "team",
			evolveto => 'censm',
		},
		minplayers => 4,
		setup => "town,mafia-ally",
		countas => 'cens',
		power => 0.2,
		rarity => 10,
	},
	cens1 => { alias => 'cens' },
	censc => {
		name => "Police Chief",
		roletext => "Once during the game, you may recieve a list of how many cops are alive and what their sanities are.",
		actions => ["daycensus;1"],
		status => {
			census => "actinspect",
			evolveto => 'c',
		},
		nocombine => 1,
		countas => 'cens',
		minplayers => 4,
		setup => "town,mafia-ally",
		power => 0.2,
		rarity => 10,
		setup_checks => ["c,minactinspect,1"],
	},
	censc1 => { alias => 'censc' },
	censd => {
		name => "Hospital Director",
		roletext => "Once during the game, you may recieve a list of how many doctors are alive.",
		actions => ["daycensus;1"],
		status => {
			census => "actprotect",
			evolveto => 'd',
		},
		nocombine => 1,
		countas => 'cens',
		minplayers => 4,
		setup => "town,mafia-ally",
		power => 0.2,
		rarity => 10,
		setup_checks => ["d,minactprotect,1"],
	},
	censd1 => { alias => 'censd' },
	censrb => {
		name => "Pimp",
		roletext => "Once during the game, you may recieve a list of how many roleblockers are alive.",
		actions => ["daycensus;1"],
		status => {
			census => "actblock",
			evolveto => 'rb',
		},
		nocombine => 1,
		countas => 'cens',
		minplayers => 4,
		setup => "town,mafia-ally",
		power => 0.2,
		rarity => 50,
		setup_checks => ["rb,minactblock,1"],
	},
	censrb1 => { alias => 'censrb' },
	censm => {
		#name => "Mafia Turncoat",
		name => "Turncoat",
		roletext => "Once during the game, you may recieve a list of how many mafia are alive and what their roles are.",
		actions => ["daycensus;1"],
		status => {
			census => "mafia",
			evolveto => 'croleauto',
		},
		nocombine => 1,
		countas => 'cens',
		setup => "town/power,survivor",
		minplayers => 6,
		minmafia => 2,
		power => 0.5,
		rarity => 250,
	},
	censm1 => { alias => 'censm' },
	censsk => {
		name => "FBI Profiler",
		roletext => "Once during the game, you may recieve a list of how many serial killers are alive and what their roles are.",
		actions => ["daycensus;1"],
		status => {
			census => "sk",
			evolveto => 'psy',
		},
		nocombine => 1,
		countas => 'cens',
		minplayers => 4,
		setup => "town/power",
		minsk => 1,
		power => 0.5,
		rarity => 50,
	},
	censsk1 => { alias => 'censsk' },
	censw => {
		name => "Arms Dealer",
		roletext => "Once during the game, you may recieve a list of how many weapons are in use and what types they are.",
		actions => ["daycensus;1"],
		status => {
			census => "weapon",
			evolveto => 'v',
		},
		nocombine => 1,
		setup => "town,survivor",
		minplayers => 6,
		power => 0.2,
		rarity => 50,
		countas => 'cens',
		theme => "normal,xylworld",
	},
	censw1 => { alias => 'censw' },
	censmy => {
		name => "Keeper of Secrets",
		roletext => "Once during the game, you may recieve a list of all mystery roles' true abilities.",
		actions => ["daycensus;1"],
		status => {
			census => "actmystery",
			evolveto => 'eaves',
		},
		nocombine => 1,
		countas => 'cens',
		minplayers => 4,
		setup => "town,survivor",
		power => 0.2,
		rarity => 100,
		setup_checks => ["cens,minactmystery,1"],
	},
	censmy1 => { alias => 'censmy' },
	nw => {
		name => "Night Watchman",
		pluralname => "Night Watchmen",
		roletext => "You can patrol near a player to learn who targets that player with a night action.",
		actions => ["patrol"],
		status => {
			evolveto => 'hider,bg1,bg3',
			tagnoday => '*',
		},
		countas => "trk",
		minplayers => 4,
		setup => "town/power",
		power => 1,
		rarity => 50,
		theme => "normal,xylworld",
	},
	nwbud => {
		name => "Sentry",
		pluralname => "Sentries",
		roletext => "You learn who targets BUDDY1 with a night action each night.",
		alias => 'nw+template_bud',
		countas => "trk",
		minplayers => 4,
		setup => "town",
		power => 0.3,
		rarity => 500,
		theme => "normal,foxworld",
	},
	nwself => {
		name => "Nervous Watchman",
		pluralname => "Nervous Watchmen",
		roletext => "You learn who targets you with a night action each night.",
		alias => 'nw+template_self',
		status => {
			evolveto => 'pgo,vcow',
		},
		countas => "trk",
		minplayers => 4,
		setup => "town",
		power => 0.3,
		rarity => 50,
		theme => "normal,xylworld",
	},
	cheat => {
		name => "Cheater",
		roletext => "Each night you learn the role PM of a random role in the setup, but not who has it.",
		actions => ["autocheat"],
		status => {
			sanity => 'pm,notarget',
			evolveto => 'crole',
		},
		countas => "crole",
		minplayers => 4,
		setup => "town,mafia,mafia-ally",
		power => 0.5,
		rarity => 25,
	},
	eaves => {
		name => "Eavesdropper",
		roletext => "You may tap a player's communicaton lines, receiving duplicates of all game messages they recieve that night.",
		actions => ["eavesdrop"],
		status => {
			evolveto => 'crole',
			tagnoday => '*',
		},
		countas => "crole",
		minplayers => 4,
		setup => "town,mafia,mafia-ally",
		power => 0.4,
		rarity => 25,
	},
	eavesreflex => {
		name => "Resonating Goo",
		alias => 'eaves+template_reflex',
		roletext => "Whenever someone targets you, you will automatically intercept their communication lines, receiving duplicates of all game messages they receive that night.",
		countas => 'goo',
		minplayers => 4,
		setup => "town,survivor",
		power => 1,
		rarity => 300,
		secret => 1,
	},
	cfriend => {
		name => "Nosy Neighbor",
		roletext => "You can pry into another player's business during the day, letting them see your alignment and also telling you theirs.",
		actions => ["daypry"],
		countas => "c",
		minplayers => 4,
		setup => "town/power",
		power => 0.5,
		rarity => 500,
	},
	astrologer => {
		name => "Astrologer",
		roletext => "The answers are in the stars, and you know how to look for them. You recieve a piece of information each night.",
		status => {
			onnight => "action:track #? ? patrol #? ? watch #? ? inspect #? ? inspectrole #? ? autopsy #?",
			evolveto => 'c,crole,nw,trk,f',
		},
		countas => "c",
		setup => "town",
		power => 0.5,
		rarity => 50,
		#secret => 1,
		theme => "normal,xylworld",
	},
	
	# Roles - Weird town - Doctor variants - True doctors

	dhalf => {
		# This role is handled specially in the setup generator.
		name => "Faith Healer",
		roletext => "Your can protect another player from one kill per night, but your protections will succeed only half the time.",
		actions => ["protect"],
		status => {
			failureprotect => 50,
			evolveto => 'rein',
			tagnoday => '*',
		},
		minplayers => 4,
		countas => "d",
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 5,
	},
	dq => {
		truename => "Quack Doctor",
		name => "Doctor",
		alias => 'd+template_fail',
		minplayers => 4,
		minscum => 1,
		setup => "town",
		countas => 'dq',
		power => -0.2,
		rarity => 20,
	},
	dfail => { alias => 'dq' },
	drev => {
		# This role is handled specially in the setup generator.
		name => "Angel",
		roletext => "You can protect another player. You will also revive upon death once per game.",
		alias => 'd+template_rev',
		countas => "d",
		minplayers => 6,
		minteam => 2,
		minscum => 1,
		setup => "town/power",
		power => 0.5,
		rarity => 10,
	},
	drevq => {
		truename => "Fallen Angel",
		name => "Angel",
		alias => 'drev+template_fail',
		countas => "tik",
		minplayers => 6,
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.1,
		rarity => 100,
	},
	drevfail => { alias => 'drevq' },
	dqrev => { alias => 'drevq' },
	drevmy => {
		alias => 'drev+template_my',
		countas => "d",
		minplayers => 6,
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 1,
		rarity => 100,
	},
	drevnm => {
		alias => 'drev+template_nm',
		countas => "d",
		minplayers => 6,
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	dcow => {
		name => "Cowardly Doctor",
		alias => 'd+template_cow',
		status => {
			evolveto => 'sguardian,drev',
		},
		minplayers => 4,
		countas => "d",
		minteam => 2,
		minscum => 1,
		setup => "town/power",
		changeto => "cow",
		power => 0.5,
		rarity => 100,
		theme => "normal,xylworld",
	},
	dnm => {
		alias => 'd+template_nm',
		countas => "d",
		minplayers => 6,
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	dmy => {
		alias => 'd+template_my',
		minplayers => 4,
		minteam => 2,
		setup => "town",
		power => 0.2,
		rarity => 50,
		countas => "d",
	},
	dbud => {
		name => "Personal Physician",
		alias => 'd+template_bud',
		minplayers => 4,
		setup => "town,survivor",
		countas => 'dbud',
		power => 0.4,
		rarity => 250,
	},

	# Roles - Weird town - Doctor variants - Other protection roles

	dbackup => {
		name => "Nurse",
		roletext => "When the doctor dies, you become a Doctor.",
		actions => [],
		status => {
			"onroledeath1:d" => "transform",
			transform => "dbackup=d",
			backupactions => 'protect',
		},
		nocombine => 1,
		countas => 'backup',
		minplayers => 4,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 4,
		setup_checks => ["d,minroled,1,minroledq,1"],
	},
	dbackupq => {
		truename => "Quack Nurse",
		name => "Nurse",
		alias => 'dbackup+template_fail',
		countas => "backup",
		minplayers => 4,
		minscum => 1,
		setup => "town",
		power => 0,
		rarity => 80,
		setup_checks => ["d,minroled,1,minroledq,1"],
	},
	dqbackup => { alias => 'dbackupq' },
	dbackupfail => { alias => 'dbackupq' },
	dpoison => {
		name => "Poison Doctor",
		roletext => "You can give someone an antidote, curing that player of any poison.",
		actions => ["antidote"],
		status => {
			evolveto => 'd',
			tagnoday => '*',
		},
		countas => "d",
		minplayers => 4,
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 2,
		setup_checks => ["d,minactpoison,1"],
		theme => "normal,foxworld",
	},
	bg1 => {
		name => "Elite Bodyguard",
		roletext => "You can guard another player. If that player would be killed, you will kill the attacker instead.",
		actions => ["guard"],
		status => {
			guard => "a",
			evolveto => 'refl',
			tagnoday => '*',
		},
		countas => "d",
		minplayers => 7,
		minteam => 2,
		minscum => 1,
		setup => "town/power",
		power => 0.5,
		rarity => 50,
	},
	bg1nm => {
		alias => 'bg1+template_nm',
		minplayers => 6,
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 1000,
		countas => 'd',
	},
	bg2 => {
		name => "Human Shield",
		roletext => "You can guard another player. If that player would be killed, you will be killed instead.",
		actions => ["guard"],
		status => {
			guard => "b",
			evolveto => "bg3",
			tagnoday => '*',
		},
		minplayers => 4,
		countas => "d",
		minteam => 2,
		minscum => 1,
		setup => "town",
		power => 0.5,
		rarity => 10,
	},
	bg3 => {
		name => "Bodyguard",
		roletext => "You can guard another player. If that player would be killed, you and the attacker will kill each other instead.",
		actions => ["guard"],
		status => {
			guard => "ab",
			evolveto => "bg1",
			tagnoday => '*',
		},
		minplayers => 4,
		countas => "d",
		minteam => 2,
		minscum => 1,
		setup => "town/power",
		power => 1,
		rarity => 5,
		theme => "normal,foxworld",
	},
	bg3my => {
		alias => 'bg3+template_my',
		minplayers => 4,
		minteam => 2,
		setup => "town",
		power => 0.2,
		rarity => 100,
		countas => "d",
	},
	bg3lat => {
		alias => 'bg3+template_lat',
		minplayers => 5,
		minteam => 2,
		setup => "town",
		power => 0.3,
		rarity => 500,
		countas => "d",
	},
	defus => {
		name => "Bomb Defuser",
		actions => ["daydefuse"],
		roletext => "You can defuse a timebomb on a target player. (This action takes 30 seconds.)",
		status => {
			timer => 30,
			dayaction => "public",
			evolveto => 'tbomb',
		},
		minplayers => 4,
	},
	sguardian => {
		name => "Super Guardian Angel",
		roletext => "As long as you are alive, other players on your team can't be nightkilled. You can't be protected by doctors.",
		status => {
			ondusk => "action:setstatus #T",
			set => "immunekill,*",
			immuneprotect => '*',
			maxvote => 0,
		},
		minplayers => 4,
		power => 0.5,
		rarity => 1000,
		countas => "d",
		#secret => 1,
		template_forbidstatus => 'ondusk',
	},
	
	# Roles - Weird town - Vigilante variants
	
	vhalf => {
		alias => 'v+template_half',
		minplayers => 4,
		countas => "v",
		setup => "town",
		power => 0.5,
		rarity => 50,
	},
	vfail => {
		alias => 'v+template_fail',
		countas => 'dq',
		minplayers => 4,
		power => 0,
	},
	v1 => {
		alias => 'v+template_1',
		countas => "v",
		setup => "town",
		power => 0.5,
		rarity => 5,
		minplayers => 3,
		theme => "normal,foxworld,xylworld",
	},
	v1half => {
		alias => 'v+template_1+template_half',
		setup => "town",
		countas => 'v',
		power => 0.2,
		rarity => 1000,
		minplayers => 4,
	},
	vhalf1 => { alias => 'v1half' },
	v1fail => {
		alias => 'v+template_1+template_fail',
		setup => "town",
		countas => 'dq',
		power => 0,
		rarity => 500,
		minplayers => 4,
	},
	vfail1 => { alias => 'v1fail' },
	v1bud => {
		name => "Azwolg",
		alias => 'v1+template_bud',
		roletext => "You will kill BUDDY1 the first night.",
		setup => "town,survivor",
		countas => 'v',
		power => 0,
		rarity => 1000,
		minplayers => 6,
	},
	vbud1 => { alias => 'v1bud' },
	vgrave => {
		name => "Death Vigilante",
		alias => 'v+template_grave',
		setup => "town",
		countas => 'v',
		power => 0.5,
		rarity => 50,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	sui => {
		name => "Suicide Bomber",
		roletext => "You can suicide-bomb another player, killing you and your target.",
		actions => ["suicidebomb"],
		status => {
			weapon => 'bomb',
		},
		# No setup
		countas => 'v',
	},
	suiday => {
		name => "Suicide Bomber",
		roletext => "You can suicide-bomb a player during the day, killing you and your target.",
		alias => 'sui+template_day',
		countas => "v",
		minplayers => 6,
		minteam => 2,
		setup => "town,mafia,mafia-ally",
		power => 0.5,
		rarity => 50,
		theme => "normal,foxworld",
	},
	suireflex => {
		name => "Paranoid Suicide Bomber",
		roletext => "If another player targets you with an ability, you will suicide-bomb them, killing both of you.",
		status => {
			evolveto => 'pgo,suiday',
		},
		alias => 'sui+template_reflex',
		countas => "tik",
		minplayers => 6,
		minteam => 2,
		setup => "town,mafia",
		power => 0,
		rarity => 50,
		theme => "normal,xylworld",
	},
	dk => {
		name => "Daykiller",
		roletext => "You are a daykiller.",
		alias => 'v+template_day',
		countas => "v",
		minplayers => 6,
		setup => "town/power,sk",
		power => 0.5,
		rarity => 50,
	},
	vday => { alias => 'dk' },
	skday => { alias => 'dk' },
	dk1 => {
		alias => 'dk+template_1',
		countas => "v",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 20,
		theme => "normal,xylworld",
	},
	vik => {
		name => "Commando",
		alias => 'v+template_ik',
		countas => "v",
		minplayers => 6,
		setup => "town/power",
		power => 0.5,
		rarity => 500,
	},
	skik => {
		name => "Rogue Commando",
		alias => 'sk+template_ik',
		countas => "v",
		power => 0.5,
		# No setup
	},
	vikmy => {
		alias => 'vik+template_my',
		countas => "v",
		minplayers => 6,
		setup => "town/power",
		power => 1,
		rarity => 500,
	},
	viknm => {
		alias => 'vik+template_nm',
		minplayers => 6,
		countas => "v",
		setup => "town",
		power => 0.5,
		rarity => 1000,
	},
	vpaci => {
		name => "Paladin",
		alias => 'v+template_paci',
		minplayers => 7,
		countas => 'v',
		setup => "town/power",
		power => 0.5,
		rarity => 250,
		setup_checks => ["v,team,sk,minkill,3", "sk,minkill,3"],
	},
	skpaci => {
		name => "Blackguard",
		alias => 'sk+template_paci',
		minplayers => 7,
		countas => 'v',
		setup => "sk",
		power => 0.5,
		rarity => 500,
		setup_checks => ["v,team,sk,minkill,3", "sk,minkill,3"],
	},
	vdouble => {
		name => "Doublekiller",
		roletext => "You can kill two players at once. If you use your ability, you must choose two different targets.",
		actions => ["kill2"],
		status => {
			weapon => 'gun',
		},
		countas => "v",
		minplayers => 7,
		setup => "town/power",
		power => 0.5,
		rarity => 500,
	},
	vdouble1 => {
		alias => 'vdouble+template_1',
		countas => "v",
		minplayers => 5,
		setup => "town/power",
		power => 0.3,
		rarity => 1000,
	},
	monk => {
		name => "Mad Monk",
		roletext => "You can kill another player each night. You are immune to all actions except kills.",
		alias => 'v+template_asc',
		minplayers => 4,
		countas => "v",
		setup => "town/power,sk",
		changeto => "asc",
		power => 1,
		rarity => 5,
	},
	vasc => { alias => 'monk' },
	skasc => { alias => 'monk' },
	monkmy => {
		alias => 'monk+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 250,
		countas => "v",
	},
	vnm => {
		alias => 'v+template_nm',
		countas => "v",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	vmy => {
		alias => 'v+template_my',
		minplayers => 6,
		setup => "town",
		power => 0.2,
		rarity => 50,
		countas => "v",
	},
	vmsk => {
		alias => 'v+template_msk',
		minplayers => 4,
		setup => "town",
		power => 0.3,
		rarity => 50,
		setup_checks => ["v,minactinspect,1"],
		countas => "v",
	},
	tbomb => {
		name => "Timebomber",
		roletext => "You can plant a timebomb on a player in daytime once during the game. That player will be killed in 60 seconds. Your day-actions will be announced publically.",
		actions => ["daytimebomb;1"],
		status => {
			timer => 60,
			dayaction => "public",
			weapon => "bomb",
			evolveto => 'xk',
		},
		minplayers => 4,
		countas => "v",
		setup => "town/power",
		power => 0.5,
		rarity => 100,
	},
	vcow => {
		name => "Cowardly Vigilante",
		alias => 'v+template_cow',
		minplayers => 4,
		countas => "v",
		setup => "town/power",
		changeto => "cow",
		power => 0.5,
		rarity => 250,
	},
	vcownm => {
		alias => 'vcow+template_nm',
		minplayers => 6,
		countas => "v",
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	monkik => {
		name => "Jackie Chan",
		roletext => "You can kill another player each night. You are immune to all actions.",
		alias => 'monk+template_ik',
		minplayers => 4,
		countas => "v",
		setup => "town/power,sk",
		changeto => "asc",
		power => 0.5,
		rarity => 500,
	},
	monkiknm => {
		alias => 'monkik+template_nm',
		countas => "v",
		setup => "town",
		minplayers => 6,
		power => 0.5,
		rarity => 500,
	},
	vikasc => { alias => 'monkik' },
	vdm => {
		alias => 'v+template_dm',
		countas => "v",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	dcpr => {
		name => "CPR Doctor",
		roletext => "You may give another player CPR. If someone attempts to kill that player, they will survive. Otherwise, they will die.",
		actions => ["cpr"],
		status => {
			evolveto => 'cmed,vpaci,v,bg3',
		},
		minplayers => 4,
		setup => "town",
		countas => "v",
		power => 0.5,
		rarity => 10,
		theme => "normal,xylworld",
	},
	dcprmy => {
		alias => 'dcpr+template_my',
		minplayers => 4,
		setup => "town,mafia-ally",
		power => 0.2,
		rarity => 250,
		countas => "v",
	},
	csplat => {
		alias => 'c+template_splat',
		minplayers => 6,
		setup => "town",
		power => 0.4,
		rarity => 500,
		countas => "v",
	},
	crolesplat => {
		alias => 'crole+template_splat',
		minplayers => 6,
		setup => "town",
		power => 0.4,
		rarity => 500,
		countas => "v",
	},
	rbsplat => {
		alias => 'rb+template_splat',
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 500,
		countas => "v",
	},
	ninja => {
		name => "Ninja",
		roletext => "You may kill another player. You show up as a Townie (town) to cops and on death, and your actions can't be detected by trackers or watchmen.",
		actions => ["kill"],
		status => {
			inspect => "town",
			inspectrole => "Townie",
			deathteam => "town",
			deathrole => "Townie",
			invisible => '*',
		},
		setup => "town/power,sk",
		power => 1,
		rarity => 50,
		countas => "v",
		minplayers => 4,
	},
	vlat => {
		alias => 'v+template_lat',
		minplayers => 5,
		setup => "town",
		power => 0.2,
		rarity => 500,
		countas => "v",
	},

	# Roles - Weird town - Metaabilities - Roleblockers

	rbnm => {
		alias => 'rb+template_nm',
		countas => "rb",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	rbmy => {
		alias => 'rb+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 50,
		countas => "rb",
	},
	dis => {
		name => "Disabler",
		roletext => "You can disable someone's role. That player will temporarily lose all abilities/characteristics until the next night.",
		actions => ["disable"],
		status => {
			disabletime => 2,
		},
		minplayers => 4,
		countas => "rb",
		setup => "mafia/power,town/power,mafia-ally",
		power => 0.5,
		rarity => 5,
	},
	dismy => {
		alias => 'dis+template_my',
		minplayers => 4,
		countas => "rb",
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	disday => {
		alias => 'dis+template_day',
		status => {
			evolveto => 'dk',
		},
		minplayers => 4,
		countas => "rb",
		setup => "town,mafia",
		power => 1,
		rarity => 50,
		theme => "normal,xylworld",
	},
	disnm => {
		alias => 'dis+template_nm',
		minplayers => 6,
		countas => "rb",
		setup => "town",
		power => 0.5,
		rarity => 250,
	},
	disreflex => {
		name => "Skunk Farmer",
		roletext => "Anyone who tries to target you with an action will be disabled by your smell until the next night.",
		alias => 'dis+template_reflex',
		minplayers => 4,
		countas => 'tik',
		setup => "town",
		power => 0.5,
		rarity => 1000,
	},
	discheat => {
		# Suggested by Fo
		# 		# Suggested by Foax
		name => "Jedi",
		alias => 'dis+cheat',
		minplayers => 4,
		countas => "rb",
		setup => "town,mafia",
		power => 1,
		rarity => 500,
	},
	cheatdis => { alias => 'discheat' },
	witch => {
		name => "Witch",
		roletext => "You can curse a player, giving their actions a 50% chance of failure. They know that they are cursed.",
		actions => ["curse"],
		status => {
			curse => '+template_cursed',
		},
		minplayers => 4,
		countas => 'rb',
		setup => "town,survivor,mafia,mafia-ally",
		power => 0.5,
		rarity => 25,
	},
	template_cursed => {
		name => "Cursed #NAME",
		roletext => "#TEXT Your actions have a 50% chance of failing.",
		status => {
			failure => 50,
		},
		template => 1,
		template_forbidstatus => 'failure',
	},
	witchreflex => {
		name => "Wicked Witch",
		alias => 'witch+template_reflex',
		# No setup
		countas => 'goo',
	},

	# Roles - Weird town - Metaabilities - Redirecters and randomizers

	red => {
		name => "Redirecter",
		roletext => "You can redirect another player's ability to target another player (\"redirect [player] [newtarget]\").",
		actions => ["redirect"],
		status => {
			immuneredirect => '*',
			tagnoday => '*',
		},
		minplayers => 4,
		countas => "rb",
		setup => "town/power,mafia/power,mafia-ally,sk",
		power => 0.5,
		rarity => 2,
		setup_checks => ["sk,team,town,team,mafia,team,mafia-ally,minactmafiakill,1"],
	},
	rednm => {
		alias => 'red+template_nm',
		minplayers => 6,
		countas => "rb",
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	red1 => {
		alias => 'red+template_1',
		countas => "rb",
		setup => "town,mafia",
		power => 0.5,
		rarity => 10,
		minplayers => 3,
		theme => "normal,xylworld",
	},
	"rand" => {
		name => "Randomizer",
		roletext => "You can randomize another player, changing their target to a random player.",
		actions => ["randomize"],
		status => {
			evolveto => 'red',
			tagnoday => '*',
		},
		minplayers => 4,
		countas => "rb",
		setup => "town,mafia/power,survivor",
		power => 0.5,
		rarity => 50,
	},
	randmy => {
		alias => 'rand+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.1,
		rarity => 500,
		countas => "rb",
	},
	randbud => {
		name => "Gremlin",
		roletext => "You automatically randomize BUDDY1's night action target each night.",
		alias => 'rand+template_bud',
		minplayers => 4,
		setup => "town,survivor",
		power => 0,
		rarity => 1000,
		countas => 'anar',
	},
	magn => {
		name => "Magnet",
		roletext => "You can change another player's night action to target yourself.",
		actions => ["attract"],
		status => {
			evolveto => 'dis,red',
			tagnoday => '*',
		},
		minplayers => 4,
		countas => "rb",
		setup => "town",
		power => 0.2,
		rarity => 50,
		theme => "normal,xylworld",
	},
	magnmy => {
		alias => 'magn+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.1,
		rarity => 500,
		countas => "rb",
	},
	mimic => {
		name => "Mimic",
		roletext => "You can mimic another player. Any actions targetting you will affect that player instead, and vice versa.",
		actions => ["mimic"],
		minplayers => 4,
		countas => "tik",
		setup => "town,mafia",
		power => 0.2,
		rarity => 50,
		theme => "normal,foxworld",
	},
	rbeager => {
		alias => 'rb+template_eager',
		countas => "rb",
		minplayers => 5,
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	rbauto => {
		name => "Cheerleader",
		alias => 'rb+template_auto',
		minplayers => 4,
		setup => "town,survivor,mafia",
		power => 0.1,
		rarity => 500,
		countas => 'anar',
	},
	
	# Roles - Weird town - Metaabilities - Other metaabilities

	alien => {
		name => "Alien",
		roletext => "You can abduct a player, preventing all actions involving that player.",
		actions => ["abduct"],
		status => {
			evolveto => 'adv',
			tagnoday => '*',
		},
		countas => "rb",
		minplayers => 7,
		setup => "town/power,survivor",
		power => 1,
		rarity => 10,
		theme => "normal,xylworld",
	},
	alienmy => {
		alias => 'alien+template_my',
		minplayers => 7,
		setup => "town",
		power => 0.2,
		rarity => 250,
		countas => "rb",
	},
	deva => {
		name => "Deva",
		roletext => "At night, you may use the power of karma on another player, duplicating their night action against them. ",
		actions => ["karma"],
		status => {
			evolveto => 'copy,drev,ssrev',
		},
		countas => "copy",
		minplayers => 6,
		setup => "town/power",
		power => 0.5,
		rarity => 50,
		template_forbidstatus => 'ontarget',
		theme => "normal,xylworld",
	},
	refl => {
		name => "Reflecter",
		roletext => "You can give someone a reflection shield. Any other actions targeting that player will be reflected back.",
		actions => ["reflectshield"],
		status => {
			tagnoday => '*',
		},
		countas => "d",
		minplayers => 6,
		setup => "town/power,mafia,mafia-ally",
		power => 0.5,
		rarity => 50,
		theme => "normal,foxworld",
	},
	reflmy => {
		alias => 'refl+template_my',
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 500,
		countas => "d",
	},
	copy => {
		name => "Copycat",
		roletext => "You can copy another player's action (\"copy [player] [newtarget]\").",
		actions => ["copy"],
		status => {
			evolveto => 'mor',
			tagnoday => '*',
		},
		setup => "town/power",
		power => 0.5,
		rarity => 10,
		setup_checks => ["sk,team,town,minactmafiakill,1"],
		minplayers => 4,
		theme => "normal,foxworld",
	},
	bus => {
		name => "Bus Driver",
		roletext => "You may bus two players, causing any actions that would affect one to affect the other instead.",
		actions => ["bus"],
		status => {
			evolveto => 'nexus',
		},
		countas => 'd',
		minplayers => 4,
		setup => "town/power",
		power => 1,
		rarity => 5,
		theme => "normal,foxworld",
	},
	hack => {
		name => "Computer Hacker",
		roletext => "You may hack another player's action, modifying it randomly.",
		actions => ["hack"],
		status => {
			evolveto => 'copy',
			tagnoday => '*',
		},
		minplayers => 4,
		setup => "town",
		countas => "rb",
		power => 0.5,
		rarity => 100,
	},
	mirr => {
		name => "Mirror",
		roletext => "Whenever someone targets you with an ability, you will target them with the same ability.",
		status => {
			ontarget => "action:karma",
			immuneblock => '*',
			immunerandomize => '*',
			immuneredirect => '*',
			evolveto => 'tref',
		},
		countas => "tik",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.5,
		rarity => 100,
		template_forbidstatus => 'ontarget',
		theme => "normal,foxworld",
	},
	mirrq => {
		alias => "mirr+template_q",
		countas => "tik",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	delay => {
		name => "Delayer",
		roletext => "You may delay another player's night action so that it happens one night later.",
		actions => ["delay"],
		status => {
			evolveto => 'rb,rand,dis',
		},
		countas => "rb",
		minplayers => 4,
		setup => "town,mafia,mafia-ally",
		power => 0.2,
		rarity => 2,
		theme => "normal,xylworld",
	},
	delayreflex => {
		name => "Timewarp",
		roletext => "You live in a zone of slow time. All actions targeting you have their effect delayed until the following night.",
		alias => 'delay+template_reflex',
		status => {
			evolveto => 'tikasc,hiderauto',
		},
		countas => "tik",
		minplayers => 4,
		setup => "town,survivor",
		power => 0,
		rarity => 1000,
		theme => "normal,xylworld",
	},
	
	# Roles - Weird town - Combination roles

	stalk => {
		name => "Stalker",
		roletext => "You can choose to either inspect someone or kill someone.",
		actions => ["inspect", "kill"],
		status => {
			weapon => 'gun',
		},
		countas => "c",
		minplayers => 6,
		setup => "town/power",
		power => 0.5,
		rarity => 10,
	},
	cv => { alias => 'stalk' },
	vc => { alias => 'stalk' },
	stalknm => {
		alias => 'stalk+template_nm',
		countas => "c",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	stalkp => {
		alias => 'stalk+template_p',
		countas => "v",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 200,
	},
	vcp => { alias => 'stalkp' },
	stalkwolfret => {
		name => "Retired Wolf Hunter",
		roletext => "You were once a proud werewolf hunter, but now you just want to live out your retirement " .
			"in peace.",
		actions => [],
		status => {
			"onteamdeath:wolf" => "transform:stalkwolf",
			"onroledeath:wolfsk" => "transform:stalkwolf",
			"onroledeath:wolfpsycho" => "transform:stalkwolf",
			"onroledeath:stalkwolf" => "transform:stalkwolf",
			evolveto => 'stalkwolf',
		},
		nocombine => 1,
		setup => "town",
		countas => 'backup',
		power => 0,
		rarity => 10,
		minplayers => 3,
	},
	stalkwolf => {
		name => "Wolf Hunter",
		actions => ["inspect", "kill"],
		roletext => "You hunt the werewolves which infest the town. Normal cops can't expose a werewolf, but you can. " .
			"You can also eliminate other players.",
		status => {
			sanity => "wolf",
			weapon => "gun",
		},
		nocombine => 1,
		countas => "v",
		setup => "town/power",
		changeto => 'c',
		power => 1,
		rarity => 5,
		minwolf => 1,
		setup_checks => ["c,minteamwolf,1,minrolewolfsk,1,minrolewolfpsycho,1"],
		minplayers => 4,
	},
	cmed => {
		name => "Combat Medic",
		roletext => "You can either protect someone or kill someone each night.",
		actions => ["protect", "kill"],
		status => {
			weapon => 'gun',
		},
		countas => "d",
		minplayers => 6,
		setup => "town/power",
		power => 0.5,
		rarity => 20,
	},
	dv => { alias => 'cmed' },
	vd => { alias => 'cmed' },
	cmednm => {
		alias => 'cmed+template_nm',
		countas => "d",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 1000,
	},
	cmedfail => {
		truename => "Shellshocked Combat Medic",
		name => "Combat Medic",
		alias => 'cmed+template_fail',
		minplayers => 6,
		setup => "town",
		power => -0.2,
		rarity => 500,
		countas => 'dq',
	},
	jat => {
		name => "Jack of All Trades",
		plural => "Jacks of All Trades",
		roletext => "You have four one-shot abilities: kill, inspect, protect, and roleblock. You can only use one ability each night.",
		actions => ["kill;1", "inspect;1", "protect;1", "block;1"],
		status => {
			evolveto => 'evo,jatplus',
		},
		minplayers => 5,
		setup => "town/power",
		countas => 'jat',
		power => 1,
		rarity => 2,
		theme => "normal",
	},
	jat1 => { alias => 'jat' },
	jatconf => {
		truename => "Confused Jack of All Trades",
		name => "Jack of All Trades",
		plural => "Jacks of All Trades",
		roletext => "You have four one-shot abilities: kill, inspect, protect, and roleblock. You can only use one ability each night.",
		help => "A confused jack of all trades uses an ability other than the one he tries to.",
		actions => ["kill;1", "inspect;1", "protect;1", "block;1"],
		status => {
			replaceinspect => 'kill ? protect ? block',
			replacekill => 'inspect ? protect ? block',
			replaceprotect => 'kill ? inspect ? block',
			replaceblock => 'kill ? inspect ? protect',
			evolveto => 'pumpkin',
		},
		minplayers => 5,
		setup => "town",
		countas => 'jat',
		power => -0.2,
		rarity => 250,
	},
	jatconf1 => { alias => 'jatconf' },
	jatplus => {
		name => "Batman",
		roletext => "You can inspect, kill, protect, or roleblock each night. Your inspections are guaranteed to be sane.",
		actions => ["kill", "inspect", "protect", "block"],
		status => {
			sanity => 'normal',
		},
		countas => "jat",
		minplayers => 5,
		setup => "town",
		power => 2,
		rarity => 1000,
		#secret => 1,
		theme => "normal,xylworld",
	},
	cmedcrb => { alias => 'jatplus' },
	crbcmed => { alias => 'jatplus' },
	merccd => { alias => 'jatplus' },
	cdmerc => { alias => 'jatplus' },
	stalkdrb => { alias => 'jatplus' },
	drbstalk => { alias => 'jatplus' },
	jatplus1 => { alias => 'jat' },
	jatpluslat => {
		name => "Bruce Wayne",
		alias => 'jatplus+template_lat',
		countas => "jat",
		minplayers => 5,
		setup => "town",
		power => 0.5,
		rarity => 500,
		#secret => 1,
		theme => "normal,xylworld",
	},
	jatrt => {
		alias => "jat+template_rt",
		minplayers => 5,
		setup => "town",
		countas => 'jat',
		power => -0.1,
		rarity => 250,
	},
	pumpkin => {
		name => "Flying Pumpkin",
		roletext => "You have about a zillion one-shot abilities. You can only use one ability each night.",
		actions => ["randomize;1", "psych;1", "mutate;1", "motivate;1", "antidote;1", "exorcise;1", "frame;1", "watch;1", "mup;1", "cpr;1", "attract;1", "shuffle;1"],
		status => {
			failure => 25,
		},
		countas => "jat",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 1000,
		theme => "normal,xylworld",
	},
	pumpkin1 => { alias => 'pumpkin' },
	wiz => {
		name => "Wizard",
		roletext => "You have three one-shot abilities. You can swap two players' roles, evolve a player to a better role, or curse a player by transforming them into a frog.",
		actions => ["swap;1", "evolve;1", "curse;1"],
		status => {
			curse => "frog",
			evolveto => 'adept,pumpkin,jat',
		},
		countas => "jat",
		minplayers => 6,
		setup => "town",
		power => 1,
		rarity => 100,
		#secret => 1,
		theme => "normal,xylworld",
	},
	wiz1 => { alias => 'wiz' },
	frog => {
		name => "Frog",
		roletext => "You have been transformed into a frog. You can't vote.",
		status => {
			maxvote => 0,
			evolveto => 't',
		},
		power => -0.6,
	},
	cd => {
		name => "Cream Puff",
		roletext => "You can inspect someone or protect someone each night.",
		actions => ["protect", "inspect"],
		countas => "c",
		setup => "town",
		power => 0.5,
		rarity => 250,
		minplayers => 4,
	},
	dc => { alias => 'cd' },
	cdrev => {
		name => "Chocolate Cream Puff",
		alias => 'cd+template_rev',
		countas => "c",
		setup => "town",
		power => 0.5,
		rarity => 5000,
		#secret => 1,
		minplayers => 4,
	},
	cdcomb => {
		name => "Super Cream Puff",
		alias => 'cd+template_comb',
		# No setup
		countas => 'c',
		power => 0.5,
	},
	crb => {
		name => "Vice Cop",
		roletext => "You can inspect someone or roleblock someone each night.",
		actions => ["inspect", "block"],
		countas => "c",
		setup => "town",
		power => 0.5,
		rarity => 100,
		minplayers => 4,
	},
	rbc => { alias => 'crb' },
	crbcomb => {
		name => "Super Vice Cop",
		roletext => "You can both inspect and roleblock someone each night.",
		alias => 'crb+template_comb',
		# No setup
		countas => 'c',
		power => 0.5,
	},
	drb => {
		name => "Hot Nurse",
		roletext => "You can protect someone or roleblock someone each night.",
		actions => ["protect", "block"],
		countas => "rb",
		setup => "town,mafia,mafia-ally",
		power => 0.5,
		rarity => 100,
		minplayers => 4,
	},
	rbd => { alias => 'drb' },
	drbcomb => {
		name => "Jailkeeper",
		roletext => "You both protect and roleblock your target.",
		alias => 'drb+template_comb',
		# No setup
		countas => 'rb',
		power => 0.5,
	},
	crolerb => {
		name => "Private Eye",
		roletext => "You can inspect someone to learn their role name or roleblock someone each night.",
		actions => ["inspect", "block"],
		status => {
			sanity => "role",
		},
		countas => "crole",
		setup => "town,mafia,mafia-ally",
		power => 0.5,
		rarity => 500,
		minplayers => 4,
	},
	rbcrole => { alias => 'crolerb' },
	crolerbcomb => {
		name => "Super Private Eye",
		roletext => "You can both inspect someone to learn their role name and roleblock them each night.",
		alias => 'crolerb+template_comb',
		# No setup
		countas => 'crole',
		power => 0.5,
	},
	# XXX Inventor - mikeburnfire

	# Roles - Weird town - Role exchangers
	
	cha => {
		name => "Changeling",
		roletext => "You can permanently swap roles with another player. (Your teams don't change.)",
		actions => ["exchange"],
		status => {
			evolveto => 'doppel',
		},
		minplayers => 4,
		setup => "town/power,survivor",
		power => 1,
		rarity => 50,
		countas => "crole",
	},
	chamy => {
		alias => 'cha+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 500,
		countas => "crole",
	},
	chaday => {
		alias => 'cha+template_day',
		minplayers => 3,
		setup => "town,survivor",
		power => 0.5,
		rarity => 1000,
		countas => "crole",
	},
	chareflex => {
		name => "Purple Goo",
		roletext => "Whenever someone targets you with an action, you switch roles with that player.",
		alias => 'cha+template_reflex',
		setup => "town,survivor",
		power => 0.1,
		rarity => 1000,
		countas => 'goo',
		minplayers => 4,
	},
	shuf => {
		name => "Shuffler",
		roletext => "You may shuffle the setup, exchanging two random players' roles. You don't know whose roles were exchanged.",
		actions => ["shuffle"],
		status => {
			evolveto => 'cha',
		},
		minplayers => 4,
		setup => "town,survivor,mafia",
		countas => 'sci',
		power => 0.1,
		rarity => 50,
	},
	
	# Roles - Weird town - Self role-changers

	mor => {
		name => "Morpher",
		roletext => "You can morph into another player, becoming a perfect copy of them except for your win condition. You can only use this ability three times per game.",
		actions => ["morph;3"],
		countas => "crole",
		minplayers => 6,
		setup => "town/power,sk",
		power => 0.5,
		rarity => 50,
	},
	mormy => {
		alias => 'mor+template_my',
		countas => "crole",
		minplayers => 6,
		setup => "town",
		power => 0.5,
		rarity => 1000,
	},
	morreflex => {
		name => "Silver Goo",
		alias => 'mor+template_reflex',
		roletext => "Whenever another player targets you with an action, you become a perfect copy of that player.",
		minplayers => 4,
		setup => "town,survivor",
		countas => 'goo',
		power => 0,
		rarity => 1000,
	},
	morx => {
		name => "X-Morpher",
		roletext => "You can morph into another player once per game, becoming a perfect copy of them except for your win condition.",
		actions => ["xmorph;1"],
		status => {
			evolveto => 'mor,chan',
		},
		minplayers => 3,
		countas => 'crole',
		setup => "town/power",
		power => 0.5,
		rarity => 100,
		theme => "normal,xylworld",
	},
	morauto => {
		name => "Polymorph",
		roletext => "You will become a copy of a random player each morning.",
		actions => ["autodaymorph"],
		countas => "copy",
		minplayers => 6,
		setup => "town,survivor",
		power => 0.5,
		rarity => 2500,
		#secret => 1,
	},
	chan => {
		name => "Channeler",
		roletext => "You can channel the spirit of a dead player, giving you all of that player's abilities and traits except their win condition.",
		actions => ["channel"],
		minplayers => 6,
		countas => 'backup',
		setup => "town/power",
		power => 1,
		rarity => 1000,
	},
	chanx => {
		name => "Backup",
		alias => 'chan+template_x',
		roletext => "You can take on a dead player's abilities. You can use this ability at any time, and its effects happen instantly. If " .
			"you want to save your ability for later, send a 'none' action at night.",
		status => {
			freechannel => 1,
		},
		minplayers => 4,
		countas => 'backup',
		setup => "town/",
		power => 0.5,
		rarity => 10,
		theme => "normal,xylworld",
	},
	mut => {
		name => "Mutant",
		roletext => "You can mutate yourself, getting a new role. You keep this ability.",
		actions => ["selfmutate"],
		status => {
			mutate => "norarity,template:mut2,saverole",
			evolveto => 'evo',
		},
		minplayers => 4,
		setup => "town",
		power => 0.3,
		rarity => 50,
		countas => 'jat',
	},
	mut2 => {
		truename => "#NAME",
		roletext => "You have mutated into a #NAME. #TEXT",
		actions => ["selfmutate"],
		status => {
			mutate => "norarity,template:mut2,saverole",
			evolveto => 'evo',
		},
		template => 1,
		template_forcevalid => 1,
	},
	mutu => {
		name => "Unstable Mutant",
		roletext => "You will mutate into a new role, and possibly a new team, every morning.",
		actions => ["autodayselfmutate"],
		status => {
			mutate => "norarity,newteam,template:mutu2,saverole",
			evolveto => 'mut,mor',
		},
		countas => "jat",
		minplayers => 4,
		setup => "town/bad",
		power => -0.1,
		rarity => 100,
		#secret => 1,
		theme => "normal,xylworld",
	},
	mutu2 => {
		name => "Unstable #NAME",
		roletext => "You are an Unstable Mutant who has mutated into a #NAME. You will mutate into a new role, and possibly a new team, every morning. #TEXT",
		actions => ["autodayselfmutate"],
		status => {
			mutate => "norarity,newteam,template:mutu2,saverole",
			evolveto => 'mor',
		},
		template => 1,
	},
	thief => {
		name => "Thief",
		pluralname => "Thieves",
		roletext => "You can steal a random ability from another player. (Group abilities can't be stolen.)",
		actions => ["steal"],
		status => {
			evolveto => 'can',
		},
		minplayers => 4,
		countas => "crole",
		setup => "town,survivor",
		power => 0.5,
		rarity => 50,
	},
	thiefmy => {
		alias => 'thief+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 500,
		countas => "crole",
	},
	thiefreflex => {
		name => "Yellow Goo",
		roletext => "Whenever someone targets you with an action, they lose the ability to use that action and you gain it. This even affects group actions.",
		alias => 'thief+template_reflex',
		setup => "town,survivor",
		power => 0.1,
		rarity => 2500,
		countas => 'goo',
		minplayers => 4,
	},
	thiefgrave => {
		name => "Graverobber",
		roletext => "You can defile a dead player's grave, stealing one of their role abilities. A player whose grave has been defiled can't be resurrected or autopsied.",
		actions => ["defile"],
		status => {
			evolveto => 'chan,necro',
			tagdeadtarget => '*',
		},
		countas => "backup",
		minplayers => 6,
		setup => "town/power,survivor",
		power => 0.5,
		rarity => 50,
		theme => "normal,xylworld",
	},
	backup => {
		name => "Super Backup",
		roletext => "You will take on the role of the first player with a power role to die.",
		actions => [],
		status => {
			onpowerdeath1 => "inherit",
			inherittemplate => '*',
			evolveto => 'morx',
		},
		minplayers => 4,
		setup => "town",
		countas => 'backup',
		power => 0.4,
		rarity => 20,
		template_forbidstatus => 'ondeath1',
	},
	backupq => {
		alias => 'backup+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'backup',
		power => 0.5,
		rarity => 500,
	},
	echo => {
		name => "Echo",
		roletext => "Whenever a player dies, you will take on their role. You retain this property.",
		status => {
			ondeath1 => "inherit",
			inherittemplate => "echo2",
			evolveto => 'chanx',
		},
		countas => "backup",
		minplayers => 4,
		setup => "town",
		power => 0.4,
		rarity => 100,
		template_forbidstatus => 'ondeath1',
		theme => "normal,xylworld",
	},
	echo2 => {
		roletext => "#TEXT Whenever a player dies, you will take on their role.",
		status => {
			ondeath1 => "inherit",
			inherittemplate => "echo2",
		},
		template => 1,
		template_forbidstatus => 'ondeath1',
	},
	evo => {
		name => "Evolver",
		roletext => "You start with no night abilities, but each day you recieve one at random.",
		actions => [],
		status => {
			onday => "action:giveability #S",
			give => $dreamer_abilities,
		},
		countas => "jat",
		setup => "town,survivor",
		power => 0.5,
		rarity => 50,
		minplayers => 6,
		template_forbidstatus => 'onday',
	},
	evod => {
		name => "Dusk Evolver",
		roletext => "You start with no night abilities, but each night you receive one at random",
		actions => [],
		status => {
			onall => "action:giveability #S",
			give => $dreamer_abilities,
		},
		countas => "jat",
		template_forbidstatus => 'onnight',
	},
	evoq => {
		alias => 'evo+template_q',
		countas => "jat",
		setup => "town",
		power => 0.5,
		rarity => 1000,
		minplayers => 6,
	},

	# Roles - Weird town -  Resurrecters

	rein => {
		name => "Shaman",
		roletext => "You may reincarnate a dead player. That player will return from the dead and get a new role and team. You can only use this ability " .
			"three times, and you cannot reincarnate the same player twice.",
		actions => ["reincarnate;3"],
		status => {
			mutate => 'newteam',
			evolveto => 'resu',
			tagdeadtarget => '*',
		},
		countas => "resu",
		minplayers => 7,
		setup => "town/power",
		power => 0.5,
		rarity => 500,
	},
	reingrave => {
		name => "Bone Shaman",
		roletext => "When you die, you can return another dead player to life with a new role and team.",
		alias => 'rein+template_grave',
		status => {
			evolveto => 'rv1mut,necro',
		},
		countas => "resu",
		minplayers => 5,
		setup => "town",
		power => 0,
		rarity => 1000,
		#secret => 1,
		theme => "normal,xylworld",
	},
	resu => {
		name => "High Priest",
		roletext => "You may resurrect a dead player. That player has a 50% chance of returning from the dead. You can only use this ability " .
			"three times, and you cannot resurrect the same player twice.",
		actions => ["resurrect;3"],
		status => {
			failureresurrect => 50,
			evolveto => 'rean',
			tagdeadtarget => '*',
		},
		minplayers => 7,
		minteam => 2,
		setup => "town/power",
		power => 0.5,
		rarity => 500,
	},
	necro => {
		name => "Necromancer",
		roletext => "You can bring another player back from the dead in exchange for your own life.",
		actions => ["raise"],
		status => {
			evolveto => 'chan',
		},
		countas => "resu",
		minplayers => 5,
		minteam => 2,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},

	# Roles - Weird town - Role changers
	
	psy => {
		name => "Psychiatrist",
		roletext => "You can target a player each night. If that player counts as a Serial Killer, you will convert that player into a normal Townie.",
		actions => ["psych"],
		status => {
			convert => "sk,t,town",
			evolveto => 'skghost',
		},
		minplayers => 3,
		setup => "town",
		countas => 'psy',
		minsk => 1,
		power => 0.5,
		rarity => 1,
	},
	psymy => {
		alias => 'psy+template_my',
		minplayers => 4,
		minsk => 1,
		setup => "town",
		power => 0.1,
		rarity => 50,
		countas => "psy",
	},
	scibud => {
		name => "Frankenstein",
		roletext => "BUDDY1 is your monster. You will mutate them each night, giving them a new role.",
		alias => 'sci+template_bud',
		countas => "sci",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.1,
		rarity => 1000,
	},
	sci => {
		name => "Mad Scientist",
		roletext => "You can mutate another player, changing their role randomly.",
		actions => ["mutate"],
		status => {
			evolveto => 'adv',
		},
		minplayers => 4,
		setup => "town,survivor,mafia",
		countas => 'sci',
		power => 0.2,
		rarity => 50,
	},
	scimy => {
		alias => 'sci+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 1000,
		countas => "sci",
	},
	scireflex => {
		name => "Uranium",
		roletext => "Any player who targets you with an action will mutate into a new role.",
		alias => 'sci+template_reflex',
		countas => "sci",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.1,
		rarity => 2500,
	},
	scigrave => {
		name => "Plutonium",
		roletext => "When you die, you can mutate another player into a new role.",
		alias => 'sci+template_grave',
		countas => "sci",
		minplayers => 5,
		setup => "town",
		power => 0,
		rarity => 2500,
		#secret => 1,
	},
	icecream => {
		name => "Ice Cream Man",
		roletext => "You can target another player to remove all their role abilities, turning them into the vanilla role for their team.",
		actions => ["gift"],
		status => {
			replacegift => "transformother",
			transform => "t",
		},
		countas => "sci",
		minplayers => 4,
		setup => "town,mafia",
		power => 0,
		rarity => 100,
	},
	icecreamreflex => {
		name => "Milky Goo",
		roletext => "If somebody targets you, you will turn them into a vanilla role for their team.",
		alias => 'icecream+template_reflex',
		countas => "goo",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.2,
		rarity => 500,
		secret => 1,
	},
	rv1grant => {
		name => "Faerie Godmother",
		roletext => "You can target another player to make them a Reviver, giving them the ability to survive one death. Your ability won't work on a player killed the same night.",
		alias => 'rv1+template_grant',
		countas => "d",
		minplayers => 5,
		setup => "town",
		power => 0.3,
		rarity => 500,
		#secret => 1,
	},
	ssgrant => {
		name => "Pope",
		roletext => "You can target another player to make them a Super-Saint, so that anyone casting the lynching vote on them dies as well.",
		alias => 'ss+template_grant',
		status => {
			evolveto => 'jatplus',
		},
		countas => "v",
		minplayers => 5,
		setup => "town",
		power => 0.5,
		rarity => 500,
		#secret => 1,
		theme => "normal,xylworld",
	},
	adv => {
		name => "Monolith",
		roletext => "You can evolve another player's role, possibly giving them extra abilities. If and how they evolve depends on their current role.",
		actions => ["evolve"],
		countas => "sci",
		minplayers => 4,
		setup => "town,survivor",
		power => 1,
		rarity => 250,
	},
	advmy => {
		alias => 'adv+template_my',
		countas => "sci",
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 2500,
	},
	advrad => {
		alias => 'adv+template_rad',
		countas => "v",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 5000,
	},
	advreflex => {
		name => "Teal Goo",
		alias => 'adv+template_reflex',
		roletext => "Anyone who targets you with an action will evolve to a new role.",
		countas => 'sci',
		minplayers => 4,
		setup => "town,survivor",
		power => 0,
		rarity => 2500,
		#secret => 1,
	},
	exor => {
		name => "Exorcist",
		roletext => "You can exorcise a player during the day. If they are a cultist, they will die. Otherwise, they will be restored to their original role and team.",
		actions => ["dayexorcise"],
		status => {
			evolveto => 'resu',
		},
		countas => "miss",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 100,
	},
	irrad => {
		name => "Dirty Bomber",
		roletext => "You can irradiate everyone in the game, giving all other players new roles. You can only do this once.",
		actions => ["dayirradiate;1"],
		status => {
			evolveto => 'sci',
		},
		countas => "sci",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 500,
	},
	irrad1 => { alias => 'irrad' },
	irradnm => {
		alias => 'irrad+template_nm',
		countas => "sci",
		minplayers => 6,
		setup => "town",
		power => 0,
		rarity => 3000,
	},

	# Roles - Weird town - Ability givers

	giver => {
		name => "Inventor",
		roletext => "You can give another player a random 1-shot ability.",
		actions => ["giveability"],
		status => {
			give => "inspect:1,protect:1,block:1,kill:1",
			evolveto => 'adv',
		},
		minplayers => 4,
		minteam => 2,
		setup => "town,mafia-ally",
		countas => 'giver',
		power => 0.5,
		rarity => 5,
	},
	givermy => {
		alias => 'giver+template_my',
		minplayers => 4,
		minteam => 2,
		setup => "town",
		power => 0.2,
		rarity => 250,
		countas => "giver",
	},
	santa => {
		name => "Santa",
		roletext => "You are the bearer of gifts. Each night, you will give a random player a one-shot action. (You can't choose not to use this ability.)",
		actions => ["autogift"],
		status => {
			default => '#?',
			give => $santa_abilities,
			evolveto => 'giver,djinni,satan',
		},
		minplayers => 4,
		countas => "giver",
		setup => "town,survivor",
		power => 0.2,
		rarity => 50,
		theme => "normal,xylworld",
	},
	# santaq => {
	#	truename => "Secret Santa",
	#	name => "Secret Role",
	#	roletext => "You don't know what your role does.",
	#	actions => [],
	#	status => {
	#		onnight => "action:gift",
	#		default => '#?',
	#		give => $santa_abilities,
	#		evolveto => 'santa',
	#	},
	#	minplayers => 4,
	#	countas => "giver",
	#	setup => "town",
	#	power => 0.1,
	#	rarity => 600,
	#	secret => 1,
	# },
	santabud => {
		name => "Secret Admirer",
		roletext => "You are BUDDY1's secret admirer. Each night, you give them a random gift.",
		actions => ["autogift"],
		status => {
			default => '#B',
			give => $santa_abilities,
			evolveto => 'giver',
		},
		countas => "giver",
		setup => "town,survivor,mafia",
		power => 0.4,
		rarity => 500,
		minplayers => 4,
	},
	pinata => {
		name => "Pinata",
		roletext => "If you die, each other player will recieve a random gift.",
		status => {
			ongrave => "action:giftall",
			give => $santa_abilities,
			evolveto => 'santa',
		},
		countas => "giver",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.2,
		rarity => 500,
		template_forbidstatus => 'ongrave',
	},
	djinni => {
		name => "Djinni",
		roletext => "You may give another player awesome powers each night.",
		actions => ["gift"],
		status => {
			replacegift => "giveability #1 \\ evolve #1",
			give => $santa_unlimited_abilities,
		},
		countas => "giver",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.3,
		rarity => 100,
		#secret => 1,
		theme => "normal,xylworld",
	},
	djinnigrave => {
		name => "Magic Lamp",
		roletext => "If you die, you can give another player awesome powers.",
		alias => 'djinni+template_grave',
		countas => "giver",
		minplayers => 4,
		setup => "town,survivor",
		power => 0,
		rarity => 1000,
		#secret => 1,
	},

	# Roles - Weird town - Miscellaneous non-power - Night abilities
	
	mup => {
		name => "MUP",
		roletext => "You are a Multiple User Personality. At night you can \"mup\" someone, which will either protect that player, inspect that player, kill that player, or do nothing.",
		actions => ["mup"],
		status => {
			evolveto => 'jat',
		},
		countas => "jat",
		minplayers => 4,
		setup => "town,survivor",
		power => 0.2,
		rarity => 2,
	},
	mupmy => {
		alias => 'mup+template_my',
		minplayers => 4,
		setup => "town",
		power => 0.1,
		rarity => 50,
		countas => "jat",
	},
	mupday => {
		alias => 'mup+template_day',
		minplayers => 3,
		setup => "town",
		power => 0.1,
		rarity => 1000,
		countas => "jat",
	},
	cow => {
		name => "Coward",
		alias => 't+template_cow',
		countas => "tik",
		minplayers => 4,
		setup => "town,mafia,survivor",
		power => 0.2,
		rarity => 15,
		theme => "normal,foxworld",
	},
	tcow => { alias => 'cow' },
	mcow => { alias => 'cow' },
	template_cow => {
		name => "Cowardly #NAME",
		roletext => "#TEXT You can hide once, making you immune to all actions that night.",
		actions => ["hide;1"],
		template => 1,
		showhelp => 1,
	},
	template_cowday => { alias => 'template_day+template_cow' },
	template_cowcomb => {
		name => "Super Coward #NAME",
		roletext => "#TEXT In addition, when you use your action you hide, making you immune to all actions that night.",
		status => {
			"replace#ACTION*" => "#ACTION* \\ makehidden #S",
		},
		template => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
		showhelp => 1,
		power => 0.5,
	},
	mot => {
		name => "Motivator",
		roletext => "At night, you can choose to grant someone an additional vote for the next day.",
		actions => ["motivate"],
		status => {
			evolveto => 'vot2',
		},
		minplayers => 6,
		countas => "vot2",
		setup => "town,mafia-ally",
		power => 0.2,
		rarity => 50,
		theme => "normal,foxworld",
	},
	motmy => {
		alias => 'mot+template_my',
		minplayers => 6,
		setup => "town",
		power => 0.1,
		rarity => 250,
		countas => "vot2",
	},
	motday => {
		alias => "mot+template_day",
		minplayers => 3,
		setup => "town",
		power => 0.4,
		rarity => 5000,
		countas => "vot2",
		#secret => 1,
	},
	antimot => {
		name => "Voteblocker",
		roletext => "You can block a player from voting the next day.",
		actions => ["voteblock"],
		status => {
			evolveto => 'votthief',
		},
		minplayers => 8,
		setup => "mafia,town,mafia-ally",
		power => 0.5,
		rarity => 10,
		countas => 'vot2',
		theme => "normal,foxworld",
	},
	antimotreflex => {
		name => "Al",
		roletext => "Anyone who targets you with an action will lose their vote the next day.",
		alias => 'antimot+template_reflex',
		minplayers => 8,
		setup => "town,survivor,mafia",
		power => 0.5,
		rarity => 1000,
		#secret => 1,
		countas => 'goo',
	},
	miss => {
		# This role is handled specially in the setup generator.
		name => "Missionary",
		pluralname => "Missionaries",
		roletext => "You can attempt to convert a player each night. If that player is a cultist, that player will peacefully leave the town.",
		actions => ["convert"],
		status => {
			evolveto => 'missri',
		},
		minplayers => 4,
		setup => "town",
		countas => 'miss',
		mincult => 1,
		power => 0.4,
		rarity => 10,
	},
	missri => {
		name => "Deprogrammer",
		roletext => "You can inspect a player to determine if they are in a cult. You can convert a player, " .
			"which causes them to leave the town if they are a cultist. You are also immune to being recruited into a cult.",
		actions => ["inspect", "convert"],
		status => {
			sanity => 'cult',
			immunerecruit => '*',
			immunesuperrecruit => '*',
			evolveto => 'monk',
		},
		countas => "miss",
		minplayers => 4,
		setup => "town/power",
		mincult => 1,
		power => 0.5,
		rarity => 500,
	},
	votthief => {
		name => "Vote Thief",
		pluralname => "Vote Thieves",
		roletext => "You can steal another player's vote for the next day. That player will have one fewer vote than normal, and you will have one more.",
		actions => ["stealvote"],
		status => {
			evolveto => 'mastermind',
		},
		countas => "vot2",
		minplayers => 6,
		setup => "town,survivor,mafia-ally",
		power => 0.5,
		rarity => 50,
		theme => "normal,xylworld",
	},
	votthiefreflex => {
		name => "Orange Goo",
		alias => 'votthief+template_reflex',
		roletext => "You will steal the vote of anyone who targets you.",
		countas => "tik",
		minplayers => 6,
		setup => "town,survivor",
		power => 0.2,
		rarity => 250,
		#secret => 1,
	},
	martyr => {
		name => "Martyr",
		roletext => "You can sacrifice yourself to prevent all other kills.",
		actions => ["sacrifice"],
		status => {
			evolveto => 'necro',
			tagnoday => '*',
		},
		countas => "d",
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 50,
	},

	# Roles - Weird town - Miscellaneous non-power - Day abilities and extra votes
	
	fri => {
		name => "Friendly Neighbor",
		roletext => "During the day, you can make someone your friend. That player will be told your alignment.",
		actions => ["dayfriend"],
		status => {
			evolveto => 'cfriend',
		},
		minteam => 2,
		setup => "town",
		countas => 'fri',
		power => 0.3,
		rarity => 10,
		minplayers => 3,
	},
	frirad => {
		alias => 'fri+template_rad',
		countas => "v",
		minteam => 2,
		setup => "town",
		power => 0.5,
		rarity => 250,
		minplayers => 4,
		theme => "normal,xylworld",
	},
	vot2 => {
		name => "Double Voter",
		roletext => "You have two votes. To vote twice, type \"!vote [player] [player]\"",
		actions => [],
		status => {
			maxvote => 2,
			evolveto => 'mayor',
		},
		minplayers => 6,
		setup => "town,mafia-ally",
		countas => 'vot2',
		power => 0.3,
		rarity => 2,
		theme => "normal,xylworld",
	},
	vot0 => {
		name => "Nonvoter",
		roletext => "You have no vote.",
		actions => [],
		status => {
			maxvote => 0,
			evolveto => 't',
		},
		minplayers => 7,
		setup => "town,mafia-ally",
		countas => 't',
		power => -0.5,
		rarity => 500,
		theme => "normal,xylworld",
	},
	vot2lat => {
		alias => 'vot2+template_lat',
		minplayers => 5,
		setup => "town,mafia-ally",
		power => 0.1,
		rarity => 500,
	},
	mayor => {
		name => "Magistrate",
		roletext => "You may pardon someone during the day. If the chosen player is lynched, they return to life. You can't pardon yourself.",
		actions => ["daypardon"],
		countas => "vot2",
		minplayers => 4,
		setup => "town",
		power => 0.5,
		rarity => 50,
		theme => "normal,foxworld",
	},
	
	tree_stump => {
	# Made by Tanarin
		name => "Tree Stump",
		roletext => "Once per game, you may declare yourself a townie and make yourself kill and lynch immune. You will lose your vote for the rest of the game though.",
		actions =>["dayspecial"],
		status => {
			replacetransform => "transform #S \\ announce",
			transform =>"tree_stump2",
			announce => "TARGET has declared himself a Townie!",
		},
		minplayers => 7,
		rarity => 500,
		setup => "town",
		countas => 'fri',
		evolveto => 'fri',
		power => 1,
	},

	tree_stump2 => {
	# Made by Tanarin 
		name => "Confirmed Townie",
		roletext => "You have stumped yourself! You may not vote for the rest of the game, but you are kill and lynch immune.",
		status => {
			maxvotes => 0,
			onlynch => 'revive',
			immunekill => '*',
		},
	},

	# Roles - Weird town - Miscellaneous non-power - Automatic and passive abilities
	
	mas1 => {
		# This role is handled specially in the setup generator.
		name => "Mason",
		roletext => "",
		actions => [],
		groups => ["mason1"],
		status => {
			evolveto => 'fri',
			tagmason => '*',
		},
		setup => "town/power",
		countas => 'fri',
		minplayers => 7,
		minteam => 2,
		minrole => 2,
		power => 0.4,
		rarity => 3,
		theme => "normal",
	},
	mas2 => {
		# This role is handled specially in the setup generator.
		name => "Mason",
		roletext => "",
		actions => [],
		groups => ["mason2"],
		status => {
			evolveto => 'fri',
			tagmason => '*',
		},
		setup => "town/power",
		countas => 'fri',
		minplayers => 7,
		minteam => 2,
		minrole => 2,
		power => 0.4,
		rarity => 3,
		theme => "normal",
	},
	mas3rec => {
		name => "Recruiting Mason",
		roletext => "You can recruit another player each night. If your target is protown, they will join your mason group. You die if you try to recruit a nontown player.",
		actions => ["recruit"],
		groups => ["mason3"],
		status => {
			tagmason => '*',
			recruit => "+mas3,dieonfail,nofollowerdeath",
		},
		setup => "town/power",
		countas => 'fri',
		minplayers => 7,
		minteam => 2,
		power => 1,
		rarity => 100,
		theme => "normal",
	},
	mas3 => {
		name => "Mason",
		roletext => "",
		actions => [],
		groups => ["mason3"],
		status => {
			evolveto => 'fri',
			tagmason => '*',
		},
	},
	sib => {
		# This role is handled specially in the setup generator.
		# This version of sibling is paired with town.
		name => "Sibling",
		roletext => "If your sibling dies, you die as well.",
		help => "Sometimes one sibling (but not both) is mafia.",
		actions => [],
		groups => ["sibling"],
		status => {
			evolveto => 'twin',
			tagsibling => '*',
		},
		minplayers => 5,
		setup => "town",
		countas => 'sib',
		minrole => 2,
		power => -0.2,
		rarity => 5,
	},
	sib2 => {
		# This role is handled specially in the setup generator.
		# This version of sibling is paired with mafia.
		name => "Sibling",
		roletext => "If your sibling dies, you die as well.",
		help => "Sometimes one sibling (but not both) is mafia.",
		actions => [],
		groups => ["sibling"],
		status => {
			evolveto => 'twin',
			tagsibling => '*',
		},
		minplayers => 5,
		countas => 'sib',
		minmafia => 1,
		setup => "town",
		minrole => 2,
		power => -0.2,
		rarity => 15,
	},
	ss => {
		name => "Super-Saint",
		roletext => "If you are lynched, the person who cast the final vote on you will die also. Be careful, this can work both for and against you.",
		actions => [],
		status => {
			onlynch => "supersaint",
			evolveto => 'paci',
		},
		setup => "town,survivor",
		countas => 'ss',
		power => 0.2,
		rarity => 2,
		minplayers => 3,
		template_forbidstatus => 'onlynch',
	},
	ssq => {
		alias => 'ss+template_q',
		setup => "town",
		countas => 'ss',
		power => 0.1,
		rarity => 100,
		minplayers => 3,
	},
	ssfalse => {
		alias => 'ss+template_false',
		setup => "town",
		countas => 'ss',
		power => -0.3,
		rarity => 500,
		minplayers => 4,
	},
	ssasc => {
		name => "Abbot",
		roletext => "You are immune to non-kill actions. If you are lynched, the person who cast the final vote on you will die also.",
		actions => [],
		status => {
			onlynch => "supersaint",
			immunenonkill => '*',
			evolveto => 'paci',
		},
		countas => "ss",
		setup => "town",
		power => 0.2,
		rarity => 100,
		minplayers => 3,
		template_forbidstatus => 'onlynch',
	},
	bomb => {
		name => "Bomb",
		roletext => "If you die, you kill the player who killed you. (If you were lynched, this is the player who cast the final vote on you.)",
		actions => [],
		status => {
			ongrave => "action:kill #1",
			evolveto => 'ss,pgo,suiday',
		},
		countas => "ss",
		setup => "town",
		power => 0.5,
		rarity => 10,
		minplayers => 3,
		template_forbidstatus => 'ongrave',
		theme => "normal,xylworld",
	},
	rv1 => {
		name => "Reviver",
		alias => 't+template_rev',
		countas => 'tik',
		minplayers => 3,
		setup => "town",
		power => 0.45,
		rarity => 3,
	},
	trev => { alias => 'rv1' },
	template_rev => {
		name => "Reviver #NAME",
		roletext => "#TEXT You will revive once on death.",
		status => {
			revive => 1,
		},
		template => 1,
		template_forbidstatus => "revive",
	},
	rv1q => {
		alias => 'rv1+template_q',
		minplayers => 3,
		setup => "town",
		countas => 'tik',
		power => 0.3,
		rarity => 250,
	},
	rv1false => {
		alias => 'rv1+template_false',
		minplayers => 4,
		setup => "town",
		countas => 'dq',
		power => -0.3,
		rarity => 500,
	},
	rv1lat => {
		alias => 'rv1+template_lat',
		minplayers => 5,
		setup => "town,survivor",
		countas => "tik",
		power => 0.1,
		rarity => 500,
	},
	rv1mut => {
		name => "Reincarnator",
		roletext => "If you die, you will return to life and get a new role and possibly a new team.",
		status => {
			revive => 1,
			onrevive => "action:selfmutate",
			mutate => 'newteam',
			evolveto => 'mut,rein',
		},
		minplayers => 3,
		setup => "town",
		countas => 'tik',
		power => 0.1,
		rarity => 50,
		template_forbidstatus => 'onrevive',
		theme => "normal,xylworld",
	},
	rv1mutq => {
		alias => 'rv1mut+template_q',
		minplayers => 3,
		setup => "town",
		countas => "tik",
		power => 0.3,
		rarity => 1000,
	},
	kesey => {
		name => "Ken Kesey",
		roletext => "You can fake your own death at night. You die and then return to life.",
		actions => ["suicide"],
		status => {
			replacesuicide => "kill #S \\ setstatus #S",
			set => "revive,1",
		},
		minplayers => 4,
		setup => "survivor,mafia",
		countas => 'fri',
		power => 0.1,
		rarity => 1000,
	},
	paci => {
		name => "Unlynchable",
		alias => 't+template_paci',
		minplayers => 3,
		setup => "town",
		countas => 'paci',
		power => 0.2,
		rarity => 100,
		#setup_checks => ["rv1,minkill,2"],
	},
	tpaci => { alias => 'paci' },
	template_paci => {
		name => "Lynchproof #NAME",
		roletext => "#TEXT If you are lynched, you will return to life.",
		status => {
			onlynch => 'revive',
		},
		template => 1,
		template_forbidstatus => "onlynch",
	},
	paciq => {
		alias => 'paci+template_q',
		countas => 'paci',
		minplayers => 3,
		setup => "town",
		power => 0.3,
		rarity => 1000,
		#setup_checks => ["rv1q,minkill,2"],
	},
	pacilat => {
		alias => 'paci+template_lat',
		countas => 'paci',
		minplayers => 5,
		setup => "town,survivor",
		power => 0.1,
		rarity => 1000,
	},
	asc => {
		name => "Ascetic",
		alias => 't+template_asc',
		minplayers => 3,
		setup => "town,mafia,survivor",
		countas => 'asc',
		power => 0,
		rarity => 2,
		theme => "normal,xylworld",
	},
	tasc => { alias => 'asc' },
	masc => { alias => 'asc' },
	ascfalse => {
		alias => 'asc+template_false',
		countas => 'dq',
		minplayers => 4,
		setup => "town,mafia,survivor",
		power => -0.3,
		rarity => 250,
	},
	template_asc => {
		name => "Ascetic #NAME",
		roletext => "#TEXT You are immune to non-kill actions.",
		status => {
			immunenonkill => '*',
			weapon => 'none',
		},
		template => 1,
		template_forbidstatus => "immunenonkill",
	},
	ascq => {
		alias => 'asc+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'asc',
		power => -0.4,
		rarity => 50,
	},
	tref => {
		alias => 't+template_ref',
	},
	template_ref => {
		truename => "Reflective #NAME",
		status => {
			reflect => '*',
		},
		template => 1,
	},
	trefq => {
		truename => "Secret Reflective Townie",
		alias => 'tq+template_ref',
		countas => "tik",
		setup => "town",
		power => 0.5,
		rarity => 100,
		minplayers => 3,
	},
	tqref => { alias => 'tref' },
	tik => {
		alias => 't+template_ik',
		minplayers => 4,
		setup => "town,mafia-ally",
		countas => 'tik',
		power => 0.2,
		rarity => 5,
		theme => "normal,xylworld",
	},
	template_ik => {
		name => "Kill-Immune #NAME",
		roletext => "#TEXT You are immune to kills.",
		status => {
			immunekill => '*',
		},
		template => 1,
		template_forbidstatus => "immunekill",
	},
	tikq => {
		alias => 'tik+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'tik',
		power => 0.3,
		rarity => 50,
	},
	tikasc => {
		alias => 't+template_ikasc',
		minplayers => 4,
		setup => "town",
		countas => 'tik',
		power => 0.5,
		rarity => 1000,
	},
	ascik => { alias => 'tikasc' },
	anar => {
		name => "Anarchist",
		roletext => "Chaos is good! As long as you are alive, each other player's night action has a 50% chance of affecting a random player. (You can't choose not to use this ability.)",
		actions => ["autochaos"],
		status => {
			evolveto => 'irrad',
		},
		minplayers => 4,
		setup => "town,survivor",
		countas => 'anar',
		power => -0.2,
		rarity => 50,
	},
	# anarq => {
	# 	truename => "Secret Anarchist",
	# 	name => "Secret Role",
	# 	roletext => "You don't know what your role does.",
	# 	actions => [],
	# 	status => {
	# 		onnight => "action:chaos",
	# 		evolveto => 'anar',
	# 	},
	# 	minplayers => 4,
	# 	setup => "town",
	# 	countas => 'anar',
	# 	power => -0.5,
	# 	rarity => 300,
	# 	secret => 1,
	# },
	anarasc => {
		name => "Discordian",
		alias => 'anar+template_asc',
		countas => 'anar',
		power => -0.8,
	},
	anarfail => {
		truename => "Emo Anarchist",
		name => "Anarchist",
		alias => 'anar+template_fail',
		countas => 'dq',
		power => -1,
	},
	hiderauto => {
		name => "Warp",
		roletext => "Each night, you will cause all actions targeting a random player to fail. You don't learn who that player is.",
		alias => 'hider+template_auto',
		minplayers => 4,
		setup => "town,survivor",
		countas => 'anar',
		power => 0.1,
		rarity => 500,
	},
	kmagn => {
		name => "Kill Magnet",
		roletext => "Night kills have a 50% chance of being redirected to you.",
		actions => [],
		status => {
			onnight => "action",
			auto => "redirectkill #* #S ? none",
			evolveto => 'martyr',
		},
		template_forbidstatus => 'onnight',
		# No setup
		countas => 'd',
	},
	kmagnq => {
		alias => 'kmagn+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'd',
		power => 0.1,
		rarity => 100,
	},

	pgo => {
		name => "Paranoid Gun Owner",
		roletext => "If you are the target of an action, you will kill the player who targeted you.",
		alias => 'v+template_reflex',
		countas => "tik",
		minplayers => 4,
		setup => "town",
		power => 0,
		rarity => 10,
	},
	vreflex => { alias => 'pgo' },
	pgoq => {
		alias => 'pgo+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'tik',
		power => 0.5,
		rarity => 250,
	},
	pgofalse => {
		alias => 'pgo+template_false',
		minplayers => 4,
		setup => "town",
		countas => 'dq',
		power => -0.3,
		rarity => 500,
	},
	rad => {
		name => "Radiant",
		roletext => "Whenever a player targets you with an action, you will automatically copy them to a random player.",
		alias => 'copy+template_reflex',
		countas => 'sib',
		minplayers => 4,
		setup => "town",
		power => 0.2,
		rarity => 50,
		theme => "normal,xylworld",
	},
	copyreflex => { alias => 'rad' },
	radq => {
		alias => 'rad+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'sib',
		power => 0,
		rarity => 2500,
	},
	satan => {
		truename => "Satan",
		name => "Santa",
		roletext => "You are the bearer of gifts. Each night, you will give a random player a one-shot action. (You can't choose not to use this ability.)",
		actions => ["autogift"],
		status => {
			default => '#?',
			give => "daykill:1",
			evolveto => 'anar',
		},
		minplayers => 4,
		countas => "giver",
		setup => "town,survivor,mafia-ally",
		power => 0.3,
		rarity => 500,
	},
	nexus => {
		name => "Nexus",
		roletext => "Any ability targeting you will target a random player instead. (It might randomly end up still targeting you.)",
		alias => 'rand+template_reflex',
		countas => 'tik',
		minplayers => 4,
		setup => "town,survivor",
		power => 0.5,
		rarity => 500,
		theme => "normal",
	},
	randreflex => { alias => 'nexus' },
	nexusq => {
		alias => 'nexus+template_q',
		minplayers => 4,
		setup => "town",
		countas => 'tik',
		power => 0.5,
		rarity => 2500,
	},
	twin => {
		name => "Twin",
		roletext => "You are an identical twin with BUDDY1, but your twin doesn't know about you. Any actions targeting one of you will target the other instead.",
		actions => [],
		status => {
			onall => "action:superbus #S #B",
			evolveto => 'copy,doppel,mimic',
		},
		countas => 'tik',
		setup => "town,survivor,mafia",
		power => 0.1,
		rarity => 50,
		minplayers => 3,
		template_forbidstatus => 'onall',
		theme => "normal,xylworld",
	},
	twinq => {
		alias => 'twin+template_q',
		countas => 'tik',
		setup => "town",
		power => -0.2,
		rarity => 2500,
		minplayers => 4,
	},
	twinfalse => {
		alias => 'twin+template_false',
		setup => "town,mafia",
		countas => 'dq',
		power => -0.3,
		rarity => 5000,
		minplayers => 4,
	},
	tq => {
		alias => 't+template_q',
		setup => "town",
		countas => 't',
		nochange => 1,
		rarity => 50,
		minplayers => 3,
	},
	gooq => {
		alias => 'goo+template_q',
		minplayers => 4,
		setup => "town",
		power => 0,
		rarity => 500,
		countas => 'goo',
	},
	immortal => {
		name => "Immortal",
		roletext => "You are immortal, and BUDDY1 is the source of your power. You cannot be killed, and if you are lynched you will return to life. " .
			"However, if BUDDY1 should die, you will immediately die as well.",
		status => {
			immunekill => '*',
			revive => '*',
			onbuddydeath => 'action:suicide',
			evolveto => 'lich',
		},
		countas => 'tik',
		minplayers => 5,
		setup => "town",
		power => 0.5,
		rarity => 1000,
		template_forbidstatus => 'onbuddydeath',
		theme => "normal,xylworld",
	},
	robot => {
		name => "Robot",
		roletext => "Whenever you are targeted by an ability, you gain that ability. It still has its normal effect on you.",
		status => {
			ontarget => 'action:copyabilityto #1 #S',
		},
		countas => 'copy',
		minplayers => 4,
		setup => "town,survivor",
		power => 0.3,
		rarity => 50,
		template_forbidstatus => 'ontarget',
		theme => "normal,xylworld",
	},
	robotq => {
		alias => 'robot+template_q',
		countas => 'copy',
		minplayers => 4,
		setup => "town",
		power => -0.1,
		rarity => 1000,
	},
	robotik => {
		name => "Cyborg",
		alias => 'robot+template_ik',
		countas => 'tik',
		minplayers => 4,
		setup => "town,sk",
		power => 0.5,
		rarity => 1000,
		setup_checks => ["sk,team,town,team,mafia,team,mafia-ally,minactmafiakill,1"],
	},
	kevorkian => {
		name => "Kevorkian",
		roletext => "You allow any other player to commit suicide during the day.",
		status => {
			onall => "action:setstatus #*",
			set => "actdaysuicide,*",
		},
		setup => "town,survivor,mafia",
		countas => 'anar',
		power => 0,
		rarity => 5000,
		template_forbidstatus => 'onall',
	},
	doomreflex => {
		name => "Red Goo",
		alias => 'bans+template_reflex',
		roletext => "If someone targets you two times, they will die.",
		status => {
			ontarget => 'action:doom',
		},
		setup => "town,survivor",
		countas => 'goo',
		power => 0.5,
		rarity => 1000,
		minplayers => 5,
		template_forbidstatus => 'ontarget',
		secret => 1,
	},
	# XXX Lightning Rod - mikeburnfire
	arsonret => {
		name => "Retired Arsonist",
		roletext => "You were once an arsonist, but you've put away the gasoline and settled down.",
		actions => ["dayignite"],
		minplayers => 4,
		setup => "town",
		countas => 'fri',
		power => 0,
		rarity => 500,
	},
	
	# Roles - Miscellaneous town - Liabilities
	
	tm => {
		truename => "Miller",
		name => "Townie",
		alias => 't+template_m',
		minplayers => 3,
		setup => "town",
		countas => 'tm',
		power => -0.2,
		rarity => 20,
		setup_checks => ["t,minactinspect,1"],
		theme => "normal",
	},
	template_m => {
		truename => "Miller #NAME",
		help => "You show up as a Mafioso (mafia) to cops.",
		status => {
			inspect => 'mafia',
			inspectrole => '*',
		},
		template => 1,
		template_forbidstatus => "inspect,inspectrole",
	},
	tmsk => {
		truename => "SK Miller",
		name => "Townie",
		alias => 't+template_msk',
		minplayers => 3,
		setup => "town",
		countas => 'tm',
		power => -0.2,
		rarity => 100,
		setup_checks => ["t,minactinspect,1"],
	},
	template_msk => {
		truename => "SK Miller #NAME",
		help => "You show up as a Serial Killer (sk) to cops.",
		status => {
			inspect => 'sk',
			inspectrole => '*',
		},
		template => 1,
		template_forbidstatus => "inspect,inspectrole",
	},
	tdm => {
		truename => "Death Miller",
		name => "Townie",
		alias => 't+template_dm',
		minplayers => 4,
		setup => "town",
		countas => 'tm',
		power => -0.2,
		rarity => 250,
		theme => "normal",
		theme => "normal,xylworld",
	},
	template_dm => {
		truename => "Death Miller #NAME",
		help => "You show up as a mafia version of your role on death.",
		status => {
			inspect => 'mafia',
			inspectrole => '*',
			deathteam => 'mafia',
			deathrole => '*',
		},
		template => 1,
		template_forbidstatus => "inspect,inspectrole,deathrole,deathteam",
	},
	telvis => {
		name => "Elvis Impersonator",
		alias => 't+template_elvis',
		minplayers => 4,
		setup => "town,survivor",
		countas => 't',
		power => 0,
		rarity => 250,
		#secret => 1,
	},
	template_elvis => {
		name => "Elvis #NAME",
		roletext => "#TEXT You show up as Elvis on death.",
		status => {
			deathrole => 'Elvis',
		},
		template => 1,
		template_forbidstatus => "deathrole",
	},
	undertaker => {
		name => "Undertaker",
		roletext => "You properly bury dead players, ensuring that they can't return to life later. Trackers will see you target the dead player.",
		status => {
			ondeath => "use:destroybody #1",
		},
		template_forbidstatus => "ondeath",
		minplayers => 4,
		setup => "town",
		countas => 'tm',
		power => 0,
		rarity => 500,
		#secret => 1,
	},

	# Psychotic Townie thinks he's a townie, but actually kills someone each night
	tsk => {
		truename => "Psychotic Townie",
		name => "Secret Role",
		alias => 't+template_psycho+template_q',
		minplayers => 6,
		setup => "town/bad",
		countas => 'v',
		power => -1,
		rarity => 250,
	},
	tpsycho => { alias => 'tsk' },
	tpsychoq => { alias => 'tsk' },
	tqpsycho => { alias => 'tsk' },
	# Psychotic Doctor thinks he's a doctor, but actually kills someone each night (in addition to protecting).
	dpsycho => {
		alias => 'd+template_psycho',
		minplayers => 7,
		minteam => 2,
		setup => "town/bad",
		power => -0.5,
		rarity => 250,
		countas => 'd',
	},
	# Manic-Depressive Doctor has a 50% chance of protecting his target and a 50% chance of killing him
	dkill => {
		alias => 'd+template_kill',
		minplayers => 8,
		minteam => 2,
		setup => "town/bad",
		power => -0.5,
		rarity => 250,
		countas => 'd',
	},
	veager => {
		alias => 'v+template_eager',
		minplayers => 8,
		setup => "town",
		power => -0.2,
		rarity => 250,
		countas => 'v',
	},
	vrt => {
		alias => 'v+template_rt',
		minplayers => 5,
		setup => "town",
		power => -0.2,
		rarity => 250,
		countas => 'anar',
		#secret => 1,
	},
	template_rt => {
		truename => "Incompetent #NAME",
		help => "Your target is selected randomly.",
		status => {
			onall => "action:redirect #S #?",
		},
		template => 1,
		template_minactions => 1,
	},
	skulk => {
		name => "Skulker",
		alias => 't+template_skulk',
		minplayers => 5,
		setup => "town",
		countas => 'sib',
		power => -0.2,
		rarity => 250,
	},
	tskulk => { alias => 'skulk' },
	mskulk => { alias => 'skulk' },
	lover => {
		alias => 't+template_lover',
		minplayers => 5,
		setup => "town",
		countas => 'sib',
		power => -0.2,
		rarity => 50,
		theme => "normal,xylworld",
	},
	tlover => { alias => 'lover' },
	template_lover => {
		name => "Lovestruck #NAME",
		roletext => "#TEXT You are madly in love with BUDDY1. So madly in love, in fact, that if that player should die, you will immediately commit suicide.",
		status => {
			onbuddydeath => 'action:suicide',
		},
		template => 1,
		template_forbidstatus => 'onbuddydeath,tagsibling',
	},
	template_loverfalse => { alias => 'template_false+template_lover' },
	wolfpsycho => {
		name => "Infected Werewolf",
		roletext => "You have been transformed by the bite of a werewolf. Each night, you kill a random player.",
		actions => ["autokill"],
		status => {
			wolf => '*',
			evolveto => 'wolfsk',
		},
		setup => "town/bad",
		countas => 'v',
		power => 0,
		rarity => 500,
		minplayers => 4,
	},
	potato => {
		name => "Hot Potato",
		roletext => "You can switch roles with another player during the day. Get rid of this one quick, because if you die while you have it, you lose the game! There is a 30 second delay before a swap happens.",
		actions => ["dayexchange"],
		status => {
			replaceexchange => "swap #1 #S \\ clearphaseaction",
			ongrave => "transform:potato2,survivor0",
			timer => 30,
		},
		setup => "town/bad",
		countas => 'crole',
		power => -0.5,
		rarity => 2500,
		minplayers => 4,
		template_forbidstatus => 'ongrave',
	},
	potato2 => {
		name => "Hot Potato",
		status => {
			immuneswap => '*',
			immuneresurrect => '*',
		},
	},
	### XXX Beloved Princess - mikeburnfire
	
	# Roles - Basic mafia
	
	m => {
		# This role is handled specially in the setup generator.
		name => "Mafioso",
		roletext => "",
		help => "You win when you have majority and there are no other killers.",
		actions => [],
		status => {
			weapon => 'gun',
			evolveto => 'gf,mgun,mghost',
			groupactions => "mafiakill",
			teamaltroletown => 't',
			teamaltrolesurvivor => 'sv',
			teamaltrolesk => 'sk',
		},
		setup => "mafia/basic",
		countas => 'm',
		rarity => 1,
		#nonadaptive => 1,
		unlimited => 1,
		theme => "normal,foxworld,xylworld",
	},
	m1 => { alias => 'm' },
	gf => {
		# This role is handled specially in the setup generator.
		#name => "Mafia Godfather",
		name => "Godfather",
		roletext => "Inspections on you will give a 'town' result, and you cannot be killed by actions. You can still be lynched.",
		actions => [],
		status => {
			inspect => 'town',
			inspectrole => 'Townie',
			weapon => 'none',
			immunekill => '*',
			# groupactions => "mafiakill",
		},
		countas => 'tik',
		minplayers => 4,
		setup_checks => ["m,unique,1"],
		setup => "mafia/basic/power",
		power => 1,
		rarity => 2,
	},

	# Roles - Weird mafia

	fr => {
		name => "Frame Artist",
		roletext => "You can frame another player during the night. Inspections on that player will give a 'mafia' result.",
		actions => ["frame"],
		status => {
			evolveto => 'antimot',
		},
		minplayers => 4,
		setup => "mafia/power",
		countas => 'fr',
		power => 1,
		rarity => 2,
		setup_checks => ["m,minactinspect,1"],
	},
	msuper => {
		#name => "Mafia Hitman",
		name => "Hitman",
		roletext => "If you make the mafia kill, there is a 50% chance it can't be stopped by doctor protection or kill immunity.",
		actions => [],
		status => {
			groupactions => "mafiakill",
			replacemafiakill => "superkill ? kill",
			weapon => 'gun',
			evolveto => 'mthief',
		},
		minplayers => 6,
		setup => "mafia/power",
		countas => 'msuper',
		power => 1,
		rarity => 50,
	},
	mthief => {
		#name => "Mafia Mugger",
		name => "Mugger",
		roletext => "If you make the mafia kill, you will also gain the ability to use one of the target's night abilities once.",
		actions => [],
		status => {
			groupactions => "mafiakill",
			replacemafiakill => "absorb",
			stealuses => 1,
			weapon => 'knife',
			evolveto => 'mdoppel',
		},
		minplayers => 6,
		setup => "mafia/power",
		power => 0.5,
		rarity => 50,
		countas => 'msuper',
		theme => "normal,xylworld",
	},
	mdoppel => {
		#name => "Mafia Spy",
		#pluralname => "Mafia Spies",
		name => "Spy",
		pluralname => "Spies",
		roletext => "The first time you make a mafia kill, you will become a copy of the player you kill.",
		actions => [],
		status => {
			groupactions => "mafiakill",
			replacemafiakill => "replicate",
			evolveto => 'mrec',
		},
		minplayers => 6,
		setup => "mafia/power",
		power => 1,
		rarity => 100,
		countas => 'msuper',
	},
	mghost => {
		name => "Infiltrator",
		alias => 'm+template_ghost',
		minplayers => 4,
		countas => "gf",
		setup => "mafia/power",
		power => 0.5,
		rarity => 100,
		setup_checks => ["m,minacttrack,1,minactwatch,1,minactpatrol,1"],
		countas => 'msuper',
		theme => "normal,xylworld",
	},
	mrec => {
		#name => "Mafia Recruiter",
		name => "Recruiter",
		roletext => "You have a one-shot ability to recruit another player into the mafia, turning them into a Mafioso. This counts as the mafia kill the night you use it. If you die, the recruited player also dies.",
		actions => [],
		status => {
			groupactions => "recruit;1",
			recruit => "m",
		},
		minplayers => 9,
		setup => "mafia/power",
		power => 0.5,
		rarity => 500,
		countas => 'msuper',
	},
	mpos => {
		name => "Brainwasher",
		roletext => "When you make the mafia kill, there is a chance you will instead brainwash your target into joining your team and then die. The player you brainwash retains their original role.",
		status => {
			groupactions => "mafiakill",
			replacemafiakill => "possess ? kill",
		},
		minplayers => 6,
		setup => "mafia/power",
		power => 0.5,
		rarity => 500,
		countas => 'msuper',
		#secret => 1,
	},
	antid => {
		name => "Anti-Doctor",
		roletext => "You can reverse a protection on a player. If that player receives doctor protection, he or she will die instead.",
		actions => ["reverseprotect"],
		status => {
			evolveto => 'dcpr',
		},
		minplayers => 4,
		setup => "mafia/power",
		power => 1,
		rarity => 10,
		countas => 'v',
		setup_checks => ["m,minactprotect,1"],
	},
	mgun => {
		name => "Mad Gunman",
		pluralname => "Mad Gunmen",
		roletext => "If you are lynched, you will kill a random player who voted you that day. Be careful, it might be one of your allies.",
		actions => [],
		status => {
			onvoted => 'action:mark #1',
			onlynch => 'action:kill #?m',
			weapon => 'gun',
			evolveto => 'msuper',
		},
		minplayers => 6,
		minteam => 2,
		setup => "mafia",
		power => 0.2,
		rarity => 50,
		countas => 'ss',
		template_forbidstatus => 'onlynch',
	},
	mdepr => {
		name => "Depressed Mafioso",
		roletext => "You must make the mafia kill or use another night action each night. If you don't, you will commit suicide.",
		alias => 'm+template_depr',
		minplayers => 6,
		minteam => 2,
		setup => "mafia/bad",
		power => -0.2,
		rarity => 100,
		countas => 'msuper',
		theme => "normal,xylworld",
	},
	mhalf => {
		truename => "Fumblefingers",
		name => "Mafioso",
		alias => 'm+template_halfm',
		minteam => 2,
		setup => "mafia/bad",
		countas => 'msuper',
		power => -0.5,
		rarity => 50,
		minplayers => 4,
	},
	mhalfm => { alias => 'mhalf' },
	template_halfm => {
		truename => "Fumblefingers #NAME",
		help => "Actions done by a fumblefingers have a 50% chance of failing.",
		status => {
			failuremafiakill => 50,
		},
		template => 1,
	},
	mfail => {
		truename => "Butterfingers",
		name => "Mafioso",
		alias => 'm+template_failm',
#		minteam => 3,
#		setup => "mafia/bad",
#		countas => 'msuper',
#		power => -1,
#		rarity => 100,
#		minplayers => 8,
	},
	mfailm => { alias => 'mfail' },
	template_failm => {
		truename => "Butterfingers #NAME",
		help => "Mafiakills performed by this role will always fail.",
		status => {
			failuremafiakill => 100,
		},
		template => 1,
	},
	mantim => {
		name => "Pillar of the Community",
		alias => 'm+template_antim',
		setup => 'mafia',
		countas => 'mantim',

		power => 0,
		rarity => 100,
		minplayers => 4,
	},
	mdeep => {
		alias => 'm+template_deep',
		setup => 'mafia',
		countas => 'tik',
		power => 0,
		rarity => 100,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	mwidow => {
		name => "Widow",
		roletext => "When you make the mafia kill, you also block the player you kill.",
		actions => [],
		status => {
			replacemafiakill => 'kill \\ block',
			weapon => 'gun',
		},
		setup => 'mafia',
		countas => 'msuper',
		power => 0.3,
		rarity => 100,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},

	# Roles - Basic wolf
	wolf => {
		name => "Werewolf",
		roletext => "You will show up as 'town' to cops. You cannot kill, but if the Alpha Werewolf dies, you might become the new Alpha Werewolf.",
		actions => [],
		status => {
			inspect => "town",
			wolf => '*',
			"onroledeath1:wolfgf", "transform:wolfgf",
			evolveto => 'wolfrec',
		},
		setup => "wolf/basic",
		rarity => 1,
		setup_checks => ["wolfgf,minrolewolfgf,1", "wolfguard,minrolewolfguard,1"],
	},
	wolfgf => {
		name => "Alpha Werewolf",
		roletext => "You are the leader of your werewolf pack, in charge of making all night kills. " .
			"If you die, a new alpha wolf will be selected from your pack. " .
			"Like all werewolves, you will show up as 'town' to cops.",
		actions => ["kill"],
		status => {
			inspect => "town",
			wolf => '*',
			ontrigger => "action:setstatus #S",
			set => "immunekill,*",
		},
		setup => "wolf/basic/power",
		power => 1,
		rarity => 1000,
		setup_checks => ["wolf,unique,1"],
		template_forbidstatus => 'onall',
	},
	wolfguard => {
		name => "Beta Werewolf",
		roletext => "As long as you are alive, the Alpha Werewolf cannot be killed at night. You will show up as 'town' to cops.",
		status => {
			onnight => 'action:trigger #T',
			inspect => "town",
			wolf => '*',
			"onroledeath1:wolfgf", "transform:wolfgf",
		},
		setup => "wolf/basic/power",
		rarity => 1,
		power => 1,
		setup_checks => ["wolfgf,minrolewolfgf,1", "wolf,unique,1"],
		template_forbidstatus => 'onnight,onday',
	},
	wolfrec => {
		name => "Rabid Werewolf",
		roletext => "You can bite another player, transforming them into an infected werewolf. Infected werewolves retain their old team, but " . 
			"kill a random player each night. You will show up as 'town' to cops.",
		actions => ["infect;1"],
		status => {
			inspect => "town",
			infect => "wolfpsycho",
			wolf => '*',
			"onroledeath1:wolfgf", "transform:wolfgf",
		},
		setup => "wolf/power",
		power => 1,
		rarity => 100,
		setup_checks => ["wolfgf,minrolewolfgf,1"],
		#secret => 1,
		minplayers => 7,
	},
	wolfss => {
		name => "Vicious Werewolf",
		roletext => "If you are lynched, you will take the player who casts the lynching vote with you. You will show up as 'town to cops.",
		status => {
			inspect => "town",
			onlynch => 'action:kill',
			wolf => '*',
			"onroledeath1:wolfgf", "transform:wolfgf",
		},
		setup => "wolf/power",
		power => 0.5,
		rarity => 50,
		setup_checks => ["wolfgf,minrolewolfgf,1"],
		#secret => 1,
		minplayers => 7,
		template_forbidstatus => 'onlynch',
	},
	
	# Roles - Basic Serial Killer & Survivor
	
	sv => {
		name => "Survivor",
		roletext => "",
		help => "You win if you are alive at the end of the game.",
		actions => [],
		status => {
			evolveto => 'cow',
			teamaltroletown => 't',
			teamaltrolemafia => 'm',
			teamaltrolesk => 'sk',
		},
		setup => "survivor/basic",
		countas => 'sv',
		rarity => 1,
		nonadaptive => 1,
		theme => 'normal,foxworld,xylspecial',
	},
	sk => {
		# This role is handled specially in the setup generator.
		name => "Serial Killer",
		roletext => "You kill other players.",
		actions => ["kill"],
		status => {
			weapon => 'knife',
			evolveto => 'sksuper',
			teamaltroletown => 't',
			teamaltrolemafia => 'm',
			teamaltrolesurvivor => 'sv',
		},
		countas => "v",
		setup => "sk/basic",
		power => 1,
		rarity => 1,
		template_nokills => 1,
		theme => 'normal,foxworld,xylspecial',
	},
	xk => {
		name => "Crazed Fiend",
		alias => 'v+template_x',
		countas => "v",
		setup => "town/power,sk/basic,survivor,mafia-ally",
		minplayers => 4,
		power => 0.5,
		rarity => 3,
		setup_checks => ["sk,team,town,team,mafia-ally,team,survivor,maxplayers,6"],
	},
	vx => { alias => 'xk' },
	skx => { alias => 'xk' },
	xklat => {
		alias => 'xk+template_lat',
		countas => "v",
		setup => "town,survivor,mafia-ally",
		minplayers => 5,
		power => 0.3,
		rarity => 500,
	},
	dp => {
		name => "Poisoner",
		roletext => "You have the ability to poison someone during the day. That player will die the next morning.",
		actions => ["daypoison"],
		status => {
			poisontime => '2',
			evolveto => 'dk',
		},
		minplayers => 4,
		countas => "v",
		setup => "town/power,sk/basic",
		power => 0.5,
		rarity => 10,
		theme => "normal,foxworld",
	},
	dpreflex => {
		name => "Toxic Goo",
		roletext => "Anyone who targets you with an ability will die of poison at the end of the next day.",
		alias => 'dp+template_reflex',
		minplayers => 4,
		countas => "tik",
		setup => "town,survivor",
		power => 0,
		rarity => 250,
		#secret => 1,
		theme => "normal,xylworld",
	},

	# Roles - Weird Serial Killer & Survivor

	doppel => {
		name => "Doppelganger",
		roletext => "You can replicate another player, killing them and copying their role (but not team).",
		actions => ["replicate"],
		status => {
#			deathteam => "sk",
			evolveto => 'doppelgreater',
		},
		minplayers => 4,
		countas => "v",
		setup => "town,sk",
		power => 1,
		rarity => 50,
	},
	doppelgreater => {
		name => "Greater Doppelganger",
		roletext => "You can replicate another player, killing them and copying their role (but not team). You also learn who they targeted and recieve duplicates of any messages they recieve that night, "
			. " and they show up as a Mutilated Corpse on death.",
		actions => ["replicate"],
		status => {
			replacereplicate => "morph \\ kill \\ eavesdrop \\ setstatus \\ track",
			morphstatus => "replacereplicate;morphstatus;set",
			set => "deathrole,Mutilated Corpse",
		},
		minplayers => 4,
		countas => "v",
		setup => "sk",
		power => 1,
		rarity => 100,
		#secret => 1,
		theme => "normal,xylworld",
	},
	psycho => {
		name => "Psychopath",
		roletext => "Each night, you will kill a random person. (You can't choose not to use this ability.) Also, you are immune to kills.",
		alias => 'v+template_ik+template_auto',
		minplayers => 4,
		setup => "sk",
		countas => 'v',
		power => 1,
		rarity => 50,
	},
	vikauto => { alias => 'psycho' },
	vautoik => { alias => 'psycho' },
	skautoik => { alias => 'psycho' },
	skikauto => { alias => 'psycho' },
	pos => {
		name => "Possesser",
		roletext => "At night, you can possess another player. You will die, but your target will join your team and gain this ability.",
		actions => ["possess"],
		status => {
			evolveto => 'cult1',
		},
		minplayers => 4,
		setup => "sk",
		countas => 'v',
		power => 0.5,
		rarity => 500,
	},
	vir => {
		name => "Virus",
		pluralname => "Viruses",
		roletext => "You can infect someone with a disease. Each morning, that player has a 50% chance of dying. The player may also infect others with the disease. You are immune to infection.",
		actions => ["infect"],
		status => {
			immuneinfect => '*',
			infect => "plag",
			evolveto => 'cultgoo',
		},
		minplayers => 6,
		setup => "sk",
		countas => 'v',
		power => 0.5,
		rarity => 500,
	},
	plag => {
		name => "Plague Bearer",
		roletext => "You have been infected with a fatal disease. Each morning you have a 50% chance of dying. You may also infect other players with the disease.",
		actions => ["infect"],
		status => {
			immuneinfect => '*',
			infect => '*',
			disease => 50,
			evolveto => 'vir',
		},
		showhelp => 1,
	},
	can => {
		name => "Cannibal",
		roletext => "You can kill and eat someone, stealing their power (and one of their role abilities) for yourself.",
		actions => ["consume"],
		status => {
			evolveto => 'vamp',
		},
		minplayers => 4,
		setup => "sk",
		power => 0.5,
		rarity => 500,
		countas => 'v',
	},
	greygoo => {
		name => "Grey Goo",
		roletext => "You can target a player to turn them into Grey Goo. In the case of multiroles, they will become your role.  Their team doesn't change.",
		actions => ["infect"],
		status => {
			immuneinfect => '*',
			infect => '*',
			evolveto => 'vir',
		},
		setup => "town,survivor",
		countas => 'sci',
		power => 0.5,
		rarity => 2500,
		minplayers => 4,
	},
	goo => {
		name => "Green Goo",
		roletext => "Whenever a player targets you with an action, they will turn into Green Goo themselves. In the case of multiroles, they will become your role.",
		alias => 'greygoo+template_reflex',
		minplayers => 4,
		setup => "town,survivor",
		countas => 'goo',
		power => 0.2,
		rarity => 20,
		theme => "normal,xylworld",
	},
	greygooreflex => { alias => 'goo' },
	greygoograve => {
		name => "Turquoise Goo",
		roletext => "When you die, you can turn another player into Turquoise Goo. In the case of multiroles, they will become your role.",
		alias => 'greygoo+template_grave',
		minplayers => 4,
		setup => "town,survivor",
		power => 0,
		rarity => 500,
		countas => "sci",
		#secret => 1,
	},
	bluegoo => {
		name => "Blue Goo",
		roletext => "If you die or are lynched, the player who kills you or casts the lynching vote becomes blue goo themselves.",
		actions => [],
		status => {
			immuneinfect => '*',
			infect => '*',
			ongrave => "action:infect",
			evolveto => 'vir',
		},
		minplayers => 4,
		setup => "town,survivor",
		power => 0.2,
		rarity => 500,
		countas => "ss",
		template_forbidstatus => 'ongrave',
	},
	whitegoo => {
		name => "White Goo",
		roletext => "All dead players will turn to White Goo as they die. You show up as town on death.",
		actions => [],
		status => {
			immuneinfect => '*',
			onall => "action:setstatus #*",
			set => "ongrave,transform:whitegoo;deathrole,White Goo",
			deathteam => 'town',
		},
		minplayers => 4,
		setup => "town,survivor",
		power => 0,
		rarity => 1000,
		#secret => 1,
		countas => "anar",
		template_forbidstatus => 'onall',
	},
	rainbowgoo => {
		name => "Rainbow Goo",
		roletext => "Whenever a player targets you with an action, you do something random to them.",
		actions => [],
		status => {
			immuneinfect => '*',
			infect => '*',
			ontarget => 'action:infect ? morph ? exchange ? steal ? poison ? stealvote ? evolve',
			poisontime => '2',
		},
		minplayers => 4,
		setup => "town,survivor",
		countas => 'goo',
		power => 0,
		rarity => 250,
		#secret => 1,
		template_forbidstatus => 'ontarget',
	},
	zom => {
		name => "Zombie",
		roletext => "You will revive once upon death. However, you move slowly, so your kills have a 50% chance of failing.",
		actions => ["kill"],
		status => {
			revive => 1,
			failurekill => 50,
			evolveto => 'lich',
		},
		minplayers => 6,
		setup => "sk",
		power => 0.5,
		rarity => 50,
		countas => 'v',
	},
	sksuper => {
		name => "Chainsaw Murderer",
		roletext => "You can kill a player each night. Your kills can't be stopped by doctor protection or kill immunity.",
		actions => ["superkill"],
		status => {
			weapon => 'chainsaw',
		},
		minplayers => 5,
		setup => "sk",
		power => 0.5,
		rarity => 25,
		countas => 'v',
		theme => "normal,foxworld",
	},
	skghost => {
		name => "Psychic Killer",
		alias => 'sk+template_ghost',
		minplayers => 4,
		setup => "sk",
		power => 0.5,
		rarity => 50,
		setup_checks => ["sk,minacttrack,1,minactwatch,1,minactpatrol,1"],
		countas => 'v',
	},
	vamp => {
		name => "Vampire",
		roletext => "You may drain another player, killing that player and gaining a new ability.",
		actions => ["drain"],
		status => {
			give => 'command,superkill,consume,hide,disable,autoxshadow',
			evolveto => 'lich',
		},
		setup => "sk",
		power => 0.5,
		rarity => 50,
		countas => 'v',
		minplayers => 4,
		theme => "normal,xylworld",
	},
	jest => {
		name => "Jester",
		roletext => "You win if you are lynched.",
		actions => [],
		status => {
			onlynch => 'winsoft',
		},
		minplayers => 8,
		setup => "jester",
		countas => 'jest',
		power => 0.5,
		rarity => 50,
		template_forbidstatus => 'onlynch',
	},
	lynch => {
		name => "Lyncher",
		roletext => "You win if BUDDY1 is lynched.",
		actions => [],
		status => {
			onday => "action:winonlynch #B",
			onbuddydeath => "transform:t,town",
		},
		minplayers => 8,
		setup => "lyncher",
		countas => 'lynch',
		power => 0.5,
		rarity => 10,
		template_forbidstatus => 'onday',
		theme => "normal,foxworld,xylworld",
	},
	clown => {
		name => "Evil Clown",
		roletext => "You can play a trick on someone, switching their role with a random player and then killing them.",
		actions => ["trick"],
		status => {
			evolveto => 'doppel',
		},
		minplayers => 4,
		setup => "sk",
		power => 1,
		rarity => 100,
		countas => 'v',
	},
	deep => {
		name => "Deep One",
		alias => 'sk+template_deep',
		minplayers => 4,
		setup => "sk",
		power => 0.5,
		rarity => 100,
		countas => 'v',
		theme => "normal,xylworld",
	},
	skdeep => { alias => 'deep' },
	template_deep => {
		name => "Hidden #NAME",
		roletext => "#TEXT If you don't use a night action, all actions targeting you that night fail.",
		status => {
			replacenone => 'hide',
		},
		template => 1,
		template_minactions => 1,
		template_forbidstatus => 'replacenone',
	},
	erad1 => {
		name => "Nightmare",
		roletext => "Once during the game at any time, you can kill another player. This kill negates all forms of protection, " .
			"and the target won't revive. You can't be detected by trackers or watchmen.",	
		actions => ["xeradicate;1"],
		status => {
			evolveto => 'sksuper',
			invisible => '*',
		},
		setup => "town,sk",
		minplayers => 4,
		power => 0.5,
		rarity => 20,
		countas => 'v',
	},
	erad1rev => {
		name => "Recurring Nightmare",
		alias => 'erad1+template_rev',
		setup => "sk",
		minplayers => 4,
		power => 0.5,
		rarity => 100,
		countas => 'v',
		hidden => 1,
		theme => "normal,xylworld",
	},
	bans => {
		name => "Banshee",
		roletext => "You can wail at another player, roleblocking them. If you wail at the same player twice, they die. " .
			"This can't be stopped by doctor protection.",
		actions => ["wail"],
		status => {
			doompercent => 50,
			evolveto => 'vamp',
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 20,
		countas => 'rb',
		minplayers => 4,
		theme => "normal,xylworld",
	},
	rbrad => { alias => 'bans' },
	lich => {
		name => "Lich",
		roletext => "You can kill a player each night. If you are killed, your soul will transfer to BUDDY1, and they will become a lich in your place. " .
			"However, if they are already dead, your soul will be lost.",
		actions => ["kill"],
		status => {
			ongrave => "action:superrecruit #B",
			recruit => "lich",
		},
		setup => "sk",
		countas => 'v',
		power => 0.5,
		rarity => 250,
		minmafia => 2,
		minplayers => 7,
		template_forbidstatus => 'ongrave',
	},
	skantim => {
		alias => 'sk+template_antim',
		countas => "v",
		setup => "sk",
		power => 1,
		rarity => 50,
		minplayers => 4,
	},
	arson => {
		name => "Arsonist",
		roletext => "You can prime a player at night by dousing them in gasoline. During the day, you may set a fire which kills all primed players.",
		actions => ["prime", "dayignite"],
		status => {
			evolveto => 'dk',
		},
		countas => "v",
		setup => "sk",
		power => 1,
		rarity => 20,
		minplayers => 4,
	},
	arsondeath => {
		name => "Death Arsonist",
		roletext => "You can prime a player at night by dousing them in gasoline. During the day, you may set a fire which kills all primed players. If you die, your fire goes off automatically.",
		actions => ["prime", "dayignite"],
		status => {
			evolveto => 'dk',
			ongrave => 'action:ignite',
		},
		countas => "v",
		setup => "sk,survivor",
		power => 1,
		rarity => 100,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	mastermind => {
		name => "Evil Mastermind",
		roletext => "You can recruit another player to be your minion. You and your minion form a team, and your " .
			"minion can kill at night. You can't have more than one minion at a time.",
		actions => ["recruit"],
		status => {
			recruit => 'minion',
			evolveto => 'cult1',
		},
		setup => "sk/power",
		countas => 'v',
		power => 0.5,
		minplayers => 6,
		rarity => 100,
	},
	minion => {
		name => "Evil Minion",
		roletext => "You assist your evil mastermind by killing another player each night. Be careful, though: " .
			"if your mastermind dies, you will die as well.",
		actions => ["kill"],
		status => {
			onall => "action:setstatus #T",
			set => "actrecruit,0",
			immunedisablebase => '*',
		},
		showhelp => 1,
		template_forbidstatus => 'onall',
	},
	soulshifter => {
		name => "Soulshifter",
		roletext => "You can kill. If you die, you choose another player to become a Serial Killer in your place. ",
		actions => ["kill"],
		status => {
			ghostaction => 'superrecruit',
			recruit => 'sk',
			evolveto => 'pos',
		},
		setup => "sk",
		countas => "v",
		power => 1,
		minplayers => 6,
		rarity => 500,
		#secret => 1,
	},
	wolfsk => {
		name => "Lone Werewolf",
		roletext => "You are a lone werewolf, terrorizing the town and looking to form a new pack. " . 
			"You will show up as 'town' to cops, but look out for werewolf hunters.",
		actions => ["kill"],
		status => {
			inspect => "town",
			wolf => '*',
			"onroledeath1:wolfgf", "transform:wolfgf,wolf",
		},
		setup => "sk/power",
		countas => "v",
		power => 0.5,
		rarity => 50,
		minplayers => 4,
	},
	ghoul => {
		name => "Ghoul",
		roletext => "Whenever another player dies, you gain a random one-shot ability.",
		status => {
			ondeath => 'action:giveability #S',
			give => $santa_abilities,
			teamaltrolesk => 'ghoulhungry',
		},
		setup => "town,survivor",
		countas => "jat",
		power => 0.5,
		rarity => 50,
		minplayers => 4,
		template_forbidstatus => 'ondeath',
	},
	ghoulhungry => {
		name => "Hungry Ghoul",
		#roletext => "Whenever another player dies, you gain a random one-shot ability. You can kill at night.",
		alias => 'ghoul+sk',
		actions => ["kill"],
		status => {
			#ondeath => 'action:giveability #S',
			#give => $santa_abilities,
			teamaltroletown => 'ghoul',
			teamaltrolesurvivor => 'ghoul',
			evolveto => 'vamp',
		},
		setup => "sk",
		countas => "v",
		power => 1,
		rarity => 100,
		minplayers => 4,
		template_forbidstatus => 'ondeath',
		#secret => 1,
		theme => "normal,xylworld",
	},
	ghoulsk => { alias => 'ghoulhungry' },
	skghoul => { alias => 'ghoulhungry' },
	doomspeaker => {
		name => "Doomspeaker",
		roletext => "The world is coming to an end! Everyone will die mysteriously! You just have to live long enough to for it to happen...",
		actions => ["autoapocalypse"],
		status => {
			doompercent => 50,
		},
		setup => "sk",
		countas => 'anar',
		power => 1,
		rarity => 500,
		minplayers => 4,
		#secret => 1,
		template_nokills => 1,
	},
	robotsk => {
		name => "Berserk Robot",
		alias => 'robot+sk+template_eager',
		status => {
			evolveto => 'vik',
		},
		setup => "sk",
		countas => 'v',
		power => 1,
		rarity => 100,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	adept => {
		name => "Adept",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:giveability #S \\ giveability #S \\ giveability #S",
			give => $santa_abilities,
			evolveto => 'evo',
		},
		setup => "town,survivor",
		countas => "jat",
		power => 0.5,
		rarity => 10,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	thing => {
		name => "Thing from Beyond",
		roletext => "You can kill in many varied ways. You can't be detected by trackers or watchmen.",
		actions => ["consume;1", "drain;1", "eradicate;1", "poison;1", "replicate;1", "trick;1"],
		status => {
			give => 'command,superkill,consume,hide,disable,autoxshadow',
			morphstatus => 'actconsume;actdrain;acteradicate;actpoison;acttrick',
			invisible => '*',
		},
		setup => "sk",
		countas => "v",
		power => 1,
		rarity => 100,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	clone => {
		name => "Clone",
	#	help => "The Clone copies a random other role in the setup.", 		# Commented by Daz - replaced with roletext below
		roletext => "You turn into a random role in the setup at the start of the game.", # Daz - added roletext 11/04/11
		actions => [],
		status => {
			onstart => 'action:morph #?',
		},
		setup => "survivor,town",
		countas => "copy",
		power => 0.5,
		rarity => 50,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	cloneu => {
		name => "Unstable Clone",
	#	help => "The Unstable Clone copies a random other role in the setup, and changes every morning.", 		# Commented by Daz - replaced with roletext below
		roletext => "You turn into a random role in the setup every morning.", # Daz - added roletext 11/04/11
		actions => [],
		status => {
		#	onnight0 => 'action:morph #?',		# Commented by Daz - caused double transorm on N0
			onday => 'action:morph #?',
			morphstatus => 'morphstatus;onday',
		},
		setup => "survivor,town,mafia",
		countas => "copy",
		power => 0.5,
		rarity => 100,
		minplayers => 4,
		#secret => 1,
		theme => "normal,xylworld",
	},
	
	# Roles - Allies and alignment changers

	jud => {
		name => "Judas",
		pluralname => "Judases",
		roletext => "If you are lynched, you will be revived and become an ally to the mafia.",
		actions => [],
		status => {
			onlynch => 'transform:jud2,mafia-ally',
		},
		setup => "town/bad",
		countas => 'ss',
		minmafia => 1,
		rarity => 20,
		power => -0.2,
		minplayers => 3,
		template_forbidstatus => 'onlynch',
	},
	jud2 => {
		name => "Judas",
		pluralname => "Judases",
		roletext => "You have betrayed the town and are now on the mafia's side.",
		actions => [],
	},
	saul => {
		name => "Saulus",
		pluralname => "Sauluses",
		roletext => "If you are lynched, you will be revived and become an ally to the town.",
		actions => [],
		status => {
			onlynch => 'transform:saul2,town',
		},
		setup => "mafia-ally",
		countas => 'ss',
		power => 0.2,
		rarity => 20,
		minplayers => 3,
		template_forbidstatus => 'onlynch',
	},
	saul2 => {
		name => "Saulus",
		pluralname => "Sauluses",
		roletext => "You have converted to the side of good and are now on the town's side.",
		actions => [],
	},
	trait => {
		name => "Traitor",
		roletext => "If the mafia try to kill you at night, you will join the mafia as a Mafioso instead. If you are killed some other way, you still die.",
		actions => [],
		status => {
			killrecruit => 'trait2,mafia',
			evolveto => 'censm',
		},
		setup => "town/bad",
		countas => 'tik',
		minplayers => 7,
		minmafia => 1,
		power => -0.5,
		rarity => 50,
	},
	trait2 => {
		name => "Mafioso",
		roletext => "You have been recruited into the mafia.",
		actions => [],
		status => {
			weapon => 'gun',
			evolveto => 'gf,mghost,mgun',
		},
	},
	ghost1 => {
		truename => "Vengeful Townie",
		name => "Secret Role",
		alias => 'tq+template_ghost1',
		setup => "town/bad",
		countas => 'tik',
		power => -0.5,
		rarity => 100,
		minplayers => 3,
	},
	tghost1 => { alias => 'ghost1' },
	# Vengeful: If the player dies, they revive and become a Vengeful Ghost (SK).
	# The player does not know about this template.
	template_ghost1 => {
		truename => "Vengeful #NAME",
		help => "If you die, you return from the dead as a Vengeful Ghost.",
		status => {
			revive => "transform:ghost2,sk0",
		},
		template => 1,
	},
	ghost2 => {
		name => "Vengeful Ghost",
		roletext => "You have returned as a ghost to wreak your vengeance on those who let you die! Because you are invisible, your actions can't be detected by trackers or watchmen.",
		actions => ["kill"],
		status => {
			invisible => '*',
			evolveto => 'bans',
		},
		showhelp => 1,
	},
	sknm => {
		truename => "Amnesiac Serial Killer",
		name => "Amnesiac",
		roletext => "You have lost your memory. You might eventually regain it.",
		help => "An amnesiac serial killer eventually becomes a Serial Killer and changes teams.",
		actions => [],
		status => {
			onday => "action",
			auto => "transform ? none ? none",
			transform => "sknm=sk+nm2,sk0",
			weapon => 'knife',
			evolveto => 'tbomb',
		},
		minplayers => 6,
		setup => "town/bad",
		countas => 'backup',
		power => -0.5,
		rarity => 100,
		template_forbidstatus => 'onday',
	},
	mnm => {
		truename => "Amnesiac Mafioso",
		name => "Amnesiac",
		roletext => "You have lost your memory. You might eventually regain it.",
		help => "An amnesiac mafioso eventually becomes a Mafioso and changes teams.",
		actions => [],
		status => {
			onday => "action",
			auto => "transform ? none ? none",
			transform => "mnm=m+nm2,mafia",
			weapon => 'gun',
			evolveto => 'm',
		},
		minplayers => 8,
		minmafia => 1,
		setup => "town/bad",
		countas => 'backup',
		power => -0.5,
		rarity => 100,
		template_forbidstatus => 'onday',
	},
	mcens => {
		name => "Corrupt Bureaucrat",
		roletext => "Once during the game, you may recieve a list of all protown roles alive.",
		actions => ["daycensus;1"],
		status => {
			census => "town",
			evolveto => 'crole',
		},
		minplayers => 4,
		minmafia => 1,
		setup => "mafia-ally",
		countas => 'cens',
		power => 1,
		rarity => 100,
	},
	merc => {
		name => "Mercenary",
		pluralname => "Mercenaries",
		roletext => "You can either kill someone or roleblock someone.",
		actions => ["kill", "block"],
		status => {
			weapon => 'gun',
		},
		minplayers => 7,
		minmafia => 1,
		setup => "mafia-ally",
		power => 0.5,
		rarity => 100,
		countas => 'rb',
	},
	vrb => { alias => 'merc' },
	rbv => { alias => 'merc' },
	golem => {
		name => "Golem",
		roletext => "As long as you are alive, you will protect your master BUDDY1 from night kills.",
		actions => ["autoprotect"],
		status => {
			default => '#B',
			onbuddydeath => "transform",
			transform => 'golem=golem2,sk0',
			evolveto => 'd',
		},
		minplayers => 4,
		setup => "town/bad",
		power => 0.2,
		rarity => 100,
		countas => 'dbud',
		template_forbidstatus => 'onbuddydeath',
		theme => "normal,xylworld",
	},
	golem2 => {
		name => "Golem",
		roletext => "Your master's death has caused you to go berserk. You are now a serial killer.",
		actions => ["kill"],
		status => {
			evolveto => 'dk',
		},
	},
	mcult => {
		name => "Unpopular Cultist",
		roletext => "You tried to join a cult, but none of them would take you.",
		help => "You show up as a Cultist (cult) on death.",
		actions => [],
		status => {
			inspect => 'cult',
			inspectrole => 'Cultist',
			deathteam => 'cult',
			deathrole => 'Cultist',
		},
		minplayers => 6,
		setup => "survivor",
		countas => 'tm',
		power => 0,
		rarity => 1000,
		#secret => 1,
	},
	skwaiting => {
		name => "Perfectly Normal Townie",
		roletext => "Everyone who knows you thinks you're perfectly normal. But you know that one day you might just pick up a knife and become a Serial Killer. Until you do, you'll show up as a Townie to cops.",
		actions => ["kill"],
		status => {
			replacekill => "kill \\ transform",
			transform => "sk,sk0",
			inspectrole => "Townie",
			evoleto => 'v',
		},
		minplayers => 6,
		setup => "town/bad",
		countas => 'v',
		power => -0.3,
		rarity => 100,
		#secret => 1,
		theme => "normal,xylworld",
	},
	evilmod => {
		name => "Evil Moderator",
		roletext => "You're the Moderator! Or at least, you should be. You're immune to actions, you can inspect anyone at any time to learn their role, and you get an instant kill, but you can't vote. You can use multiple actions per day, too.",
		actions => ["xinspect", "xkill;1"],
		status => {
			immuneall => '*',
			sanity => 'pm',
			freeinspect => 1,
			maxvote => 0,
			evolveto => 'jatplus',
		},
		minplayers => 6,
		setup => "sk,mafia-ally",
		countas => 'crole',
		power => 1.0,
		rarity => 1000,
		#secret => 1,
		theme => "normal,xylworld",
	},
	
	# Roles - Cult
	
	cult1 => {
		name => "Cult Leader",
		roletext => "You can recruit townie players into your cult, which can communicate at night. If you die, all cultists will die.",
		actions => ["recruit"],
		status => {
			recruit => 'cultist1',
		},
		setup => "cult/basic/power",
		countas => 'cult1',
		power => 0.5,
	},
	cultist1 => {
		name => "Cultist",
		roletext => "You can communicate with your cult at night. If your leader dies, you will die.",
		actions => [],
		status => {
			recruited => '*',
		},
		showhelp => 1,
	},
	cult2 => {
		name => "Improved Cult Leader",
		roletext => "You can recruit townie players into your cult, which can communicate at night. Recruited players retain any powers they had before becoming cultists. If you die, all cultists will die.",
		actions => ["recruit"],
		status => {
			recruit => '+cultist2',
		},
		setup => "cult/basic/power",
		countas => 'cult1',
		power => 0.5,
		rarity => 5,
		theme => "normal,xylworld",
	},
	cultist2 => {
		name => "Cultist",
		roletext => "You can communicate with your cult at night. If your leader dies, you will die.",
		actions => [],
		status => {
			recruited => '*',
		},
		showhelp => 1,
	},
	cult1ik => {
		alias => 'cult1+template_ik',
		setup => "cult/power",
		countas => 'cult1',
		power => 0.5.5,
		rarity => 50,
	},
	cult1day => {
		alias => 'cult1+template_day',
		setup => "cult/power",
		countas => 'cult1',
		power => 0.5.5,
		rarity => 100,
	},
	rean => {
		name => "Evil Priest",
		roletext => "You can bring a protown player back from the dead as a Skeleton Warrior loyal to your cult. If you die, all warriors will die.",
		actions => ["reanimate"],
		status => {
			recruit => 'skel',
			tagdeadtarget => '*',
		},
		setup => "cult/power",
		countas => 'resu',
		power => 0.5,
		rarity => 500,
		minplayers => 6,
	},
	skel => {
		name => "Skeleton Warrior",
		roletext => "Because you are already dead, you are immune to kills. You can communicate with your cult at night. If your leader dies, you will die.",
		actions => [],
		status => {
			recruited => '*',
			immunekill => '*',
		},
		showhelp => 1,
	},
	cultgoo => {
		name => "Black Goo",
		roletext => "Whenever a player targets you with an action, they will join your cult as another black goo.",
		actions => [],
		status => {
			ontarget => "action:superrecruit",
			recruit => "cultgoo",
		},
		minplayers => 4,
		setup => "cult/power",
		countas => 'goo',
		power => 0.5,
		rarity => 500,
		template_forbidstatus => 'ontarget',
	},
	cultterr => {
		name => "Terrorist Mastermind",
		roletext => "You can recruit townie players into your terror cell, which can communicate at night. Your terrorists can suicide-bomb other players during the day. If you die, all cultists will die.",
		actions => ["recruit"],
		status => {
			recruit => 'suiday',
		},
		setup => "cult/power",
		countas => 'cult1',
		power => 0.5.5,
		rarity => 100,
		theme => "normal,xylworld",
	},
	cultufo => {
		name => "Alien Mind Controller",
		roletext => "You can abduct a player to implant a dormant mind control device. Their night action, if any, is blocked, and all other actions targeting them fail. When you die, each player implanted with a mind control device becomes a Cultist and part of the cult.",
		actions => ["abduct"],
		status => {
			replaceabduct => "block \\ makehidden \\ silentinfect",
			infect => "+cultistufo",
		},
		setup => "cult/power",
		countas => 'rb',
		power => 0.5,
		rarity => 100,
		theme => "normal,xylworld",
	},
	cultistufo => {
		status => {
			"onroledeath:cultufo" => "transform:cultist1,cult",
		},
		template => 1,
	},
	cult1vampalt => {
		name => "Vampire Lord",
		alias => 'cult1vamp+template_alt',
		status => {
			recruit => 'cultistvamp',
		},
		setup => "cult/power",
		countas => 'cult1',
		power => 1.0,
		rarity => 100,
		theme => "normal,xylworld",
	},
	cult1vamp => { 
		name => "Supreme Vampire Lord",
		alias => 'cult1+vamp',
		countas => 'cult1',
		status => {
			recruit => 'cultistvamp',
		},
	},
	cultistvamp => {
		name => "Vampiric Cultist",
		alias => 'cultist1',
		showhelp => 1,
	},
	
	# Special setup roles - Lyncher

	ly => {
		name => "Lyncher",
		roletext => "Your lynch target is TOWNIE1. You win when your target is lynched.",
		actions => [],
		status => {
			"onroledeath:tly" => "transform:t,town",
		},
		theme => "lyncher",
	},
	tly => {
		truename => "Lyncher Target",
		name => "Townie",
		roletext => "",
		actions => [],
		status => {
			onlynch => "lyncherwins",
			lyncher => "lyncher",
		},
		theme => "lyncher",
	},
	jesl => {
		name => "Jester",
		roletext => "You win if you are lynched.",
		actions => [],
		status => {
			onlynch => "win",
		},
		theme => "lyncher",
	},
	
	# Special setup roles - WTF
	
	twtf => {
		name => "Secret Role",
		roletext => "You're not sure what your role is. If you're not a Townie, you will learn your true role when the WTF dies.",
		actions => [],
		theme => "wtf",
	},
	cwtf => {
		truename => "Cop",
		name => "Secret Role",
		roletext => "You're not sure what your role is. If you're not a Townie, you will learn your true role when the WTF dies.",
		actions => [],
		status => {
			"onroledeath:wtf" => "transform:c",
		},
		theme => "wtf",
	},
	dwtf => {
		truename => "Doctor",
		name => "Secret Role",
		roletext => "You're not sure what your role is. If you're not a Townie, you will learn your true role when the WTF dies.",
		actions => [],
		status => {
			"onroledeath:wtf" => "transform:d",
		},
		theme => "wtf",
	},
	vwtf => {
		truename => "Vigilante",
		name => "Secret Role",
		roletext => "You're not sure what your role is. If you're not a Townie, you will learn your true role when the WTF dies.",
		actions => [],
		status => {
			"onroledeath:wtf" => "transform:v",
		},
		theme => "wtf",
	},
	wtf => {
		name => "WTF",
		roletext => "The other players in the game won't get their roles until you die. However, you learn what the roles are (but not who has them) at the start of the first day.",
		actions => [],
		status => {
			deathrole => "Townie",
			deathteam => "town",
			onday1 => "action:census",
			census => "town",
		},
		showhelp => 1,
		theme => "wtf",
	},
	
	# Special setup roles - Vengeful
	ven_t => {
		name => "Townie",
		roletext => "If you are lynched day 1, you get a one shot vigilante kill.",
		actions => [],
		status => {
			onlynch => "transform:ven_v",
			onday2 => "silenttransform:ven_t2",
		},
		theme => "vengeful",
	},
	ven_t2 => {
		name => "Townie",
		roletext => "",
		actions => [],
		theme => "vengeful",
	},
	ven_v => {
		name => "Vigilante",
		roletext => "You may kill one player tonight. You will die in the morning.",
		actions => ["kill"],
		status => {
			onday2 => "action:suicide",
		},
		theme => "vengeful",
	},
	ven_gf => {
		name => "Godfather",
		roletext => "If you are lynched, the town wins immediately.",
		actions => [],
		status => {
			onlynch => "lyncherwins",
			lyncher => "town",
		},
		theme => "vengeful",
	},
	ven_m => {
		name => "Mafioso",
		roletext => "",
		actions => [],
		theme => "vengeful",
	},
	
	# Theme roles - Cosmic
	theme_cosmic_antimatter => {
		name => "Anti-Matter",
		roletext => "You have the power of negation. Each night, you may target another player to block their action and prevent them from voting the next day.",
		actions => ["negate"],
		setup => "town/power,mafia,survivor",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_assassin => {
		name => "Assassin",
		roletext => "You have the power to execute. Each night, you may kill another player.",
		actions => ["kill"],
		setup => "town/power,sk",
		power => 1,
		rarity => 1,
		theme => "cosmic",
	},
	theme_cosmic_aura => {
		name => "Aura",
		roletext => "You have the power of honesty. During the day, you may reveal your alignment to another player and learn that player's alignment in return.",
		actions => ["dayreveal"],
		setup => "town/power",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_cavalry => {
		name => "Cavalry",
		roletext => "You have the power to reinforce. You may guard another player. If that player would be killed, you and the attacker will kill each other instead.",
		actions => ["guard"],
		status => {
			guard => 'ab',
		},
		setup => "town/power,mafia",
		power => 1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_changeling => {
		name => "Changeling",
		roletext => "You have the power to change form. You can permanently swap roles with another player. (Your teams don't change.)",
		actions => ["exchange"],
		setup => "town/power,survivor",
		power => 1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_chosen => {
		name => "Chosen",
		roletext => "You have the power of divine intervention. Each night you may give another player a shield protecting them from all abilities.",
		actions => ["shield"],
		setup => "town/power,mafia",
		power => 1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_chronos => {
		name => "Chronos",
		roletext => "You have the power of time travel. Once per game, you may go back in time and bring back a player who has died.",
		actions => ["resurrect;1"],
		setup => "town/power,mafia",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_deuce => {
		name => "Deuce",
		roletext => "You have the power two. You have two votes.",
		actions => [],
		status => {
			maxvote => 2,
		},
		minplayers => 6,
		setup => "town,sk",
		power => 0.2,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_empath => {
		name => "Empath",
		roletext => "You have the power of harmony. You show up as town to cop investigations, regardless of your actual team. " .
			"In addition, your actions don't show up for trackers and watchmen.",
		actions => [],
		status => {
			inspect => 'town',
			invisible => '*',
		},
		setup => "town,mafia,survivor",
		power => 0,
		rarity => 1,
		theme => "cosmic",
	},
	theme_cosmic_filch => {
		name => "Filch",
		roletext => "You have the power of theft. Each night, you may steal an ability from another player.",
		actions => ["steal"],
		setup => "town,mafia,survivor",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_filth => {
		name => "Filth",
		roletext => "You have the power to reek. During the day, you may poison someone with your stench. That player will die the next dawn.",
		actions => ["daypoison"],
		status => {
			poisontime => '2',
		},
		setup => "town/power,sk",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_fungus => {
		name => "Fungus",
		roletext => "You have the power to adhere. Each night you may absorb another player, killing them and stealing one of their role abilities.",
		actions => ["absorb"],
		setup => "town/power,sk",
		power => 1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_gambler => {
		name => "Gambler",
		roletext => "You have the power to bluff. You may inspect another player during the day, but you have a 50% chance of getting no result. " .
			"Your inspection will be announced publically.",
		actions => ["dayinspect"],
		status => {
			sanity => 'normal',
			failureinspect => 50,
			dayaction => "public",
		},
		setup => "town/power,mafia",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_healer => {
		name => "Healer",
		roletext => "You have the power of healing. You may protect another player from kills.",
		actions => ["protect"],
		setup => "town/power,mafia,survivor",
		power => 1,
		rarity => 1,
		theme => "cosmic",
	},
	theme_cosmic_insect => {
		name => "Insect",
		roletext => "You have the power of metamorphosis. At night you mimic another player, copying their night action.",
		actions => ["copy"],
		setup => "town/power,sk",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_laser => {
		name => "Laser",
		roletext => "You have the power to blind. You may target another player to randomize that player's night action target.",
		actions => ["randomize"],
		setup => "town,mafia",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_macron => {
		name => "Macron",
		roletext => "You have the power of mass.",
		actions => [],
		setup => "town,mafia",
		power => 0,
		rarity => 1,
		theme => "cosmic",
		nonadaptive => 1,
	},
	theme_cosmic_magnet => {
		name => "Magnet",
		roletext => "You have the power of magnetism. You can change another player's night action to target yourself.",
		actions => ["attract"],
		countas => "rb",
		setup => "town,mafia,survivor",
		power => 0.2,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_mind => {
		name => "Mind",
		roletext => "You have the power of knowledge. At night, you may inspect another player to learn their role (but not their team).",
		actions => ["inspect"],
		status => {
			sanity => 'role',
		},
		setup => "town/power,mafia",
		power => 1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_mind2 => {
		name => "Mind",
		roletext => "You have the power of knowledge. At night, you may learn everyone who targeted another player.",
		actions => ["patrol"],
		theme => "cosmic",
	},
	theme_cosmic_mirror => {
		name => "Mirror",
		roletext => "You have the power of dyslexia. If someone targets you with an action, you will target them with the same action. " .
			"You are immune to roleblocks and redirects.",
		actions => [],
		status => {
			ontarget => "action",
			auto => "copy #1 #1",
			# Give immunity to metaactions - otherwise the resolution is confusing
			immuneblock => '*',
			immunerandomize => '*',
			immuneredirect => '*',
		},
		setup => "town,mafia",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_mutant => {
		name => "Mutant",
		roletext => "You have the power to regenerate. The first time you are killed or lynched, you will return to life.",
		actions => [],
		status => {
			revive => 1,
		},
		setup => "town,survivor",
		power => 0.1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_oracle => {
		name => "Oracle",
		roletext => "You have the power to forsee. At night, you may concentrate your powers on another player to track their movements.",
		actions => ["track"],
		setup => "town,mafia",
		power => 1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_pacifist => {
		name => "Pacifist",
		roletext => "You have the power of peace. If you are lynched, you will return to life.",
		actions => [],
		status => {
			onlynch => 'revive',
		},
		setup => "town",
		power => 0.1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_pentaform => {
		name => "Pentaform",
		roletext => "You have the power to evolve. Each day you may mutate to recieve a new role. You may change a total of 5 times.",
		actions => ["dayselfmutate;5"],
		status => {
			mutate => "fixteam,keepaction",
		},
		setup => "town,mafia,survivor",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_phantom => {
		name => "Phantom",
		roletext => "You have the power to dematerialize. At night, you may make yourself immune to all actions. If you do, you will not be able to vote the next day.",
		actions => ["dematerialize"],
		setup => "town,mafia,survivor",
		power => 0.2,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_philantropist => {
		name => "Philantropist",
		roletext => "You have the power of giving. At night, you may give another player a random one-shot action.",
		actions => ["giveability"],
		status => {
			give => 'negate:1,kill:1,dayreveal:1,guard:1,exchange:1,shield:1,resurrect:1,steal:1,daypoison:1,absorb:1,protect:1,' . 
				'copy:1,randomize:1,attract:1,inspect:1,track:1,dayselfmutate:1,dematerialize:1,frame:1,clear:1,disable:1',
		},
		setup => "town,mafia,survivor",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_reincarnator => {
		name => "Reincarnator",
		roletext => "You have the power of reincarnation. If you die, you will return to life with a new role and possibly a new team.",
		actions => [],
		status => {
			revive => 1,
			onrevive => 'action:selfmutate',
			mutate => 'newteam',
		},
		setup => "town,mafia-ally",
		power => 0.1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_seeker => {
		name => "Seeker",
		roletext => "You have the power of truth. At night, you may inspect another player to determine if they are town, mafia, or neutral.",
		actions => ["inspect"],
		status => {
			sanity => 'normal',
		},
		setup => "town/power,mafia",
		power => 1,
		rarity => 1,
		theme => "cosmic",
	},
	theme_cosmic_subversive => {
		name => "Subversive",
		roletext => "You have the power of subversion. At night, you may make another player turn up either town or mafia (your choice) to cop inspections.",
		actions => ["frame", "clear"],
		setup => "town,mafia/power",
		power => 0,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_symbiote => {
		name => "Symbiote",
		roletext => "You have the power of numbers. You and your fellow symbiotes are all on the same team, and you may talk at night.",
		actions => [],
		groups => ["mason"],
		setup => "town/power",
		minplayers => 8,
		minteam => 2,
		minrole => 2,
		power => 0.4,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_sniveler => {
		name => "Sniveler",
		roletext => "You have the power to whine.",
		actions => [],
		setup => "town,mafia,survivor",
		power => 0,
		rarity => 1,
		theme => "cosmic",
		nonadaptive => 1,
	},
	theme_cosmic_terrorist => {
		name => "Terrorist",
		roletext => "You have the power to booby trap. You can plant a timebomb on a player in daytime once during the game. That player will be killed in 60 seconds.",
		actions => ["daytimebomb;1"],
		status => {
			timer => 60,
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_vacuum => {
		name => "Vacuum",
		roletext => "You have the power of catharsis. If you are lynched, the last player to vote for you will be killed as well.",
		actions => [],
		status => {
			onlynch => 'action:superkill',
		},
		setup => "town,mafia-ally,survivor",
		power => 0.1,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_vampire => {
		name => "Vampire",
		roletext => "You have the power to enslave. At night, you may enslave another player. If that player is town, they will become a member of your cult.",
		actions => ["enslave"],
		status => {
			recruit => 'theme_cosmic_vampire1',
		},
		setup => "cult/power",
		rarity => 1,
		theme => "cosmic",
	},
	theme_cosmic_vampire1 => {
		name => "Slave Vampire",
		roletext => "You can communicate with your cult at night. If your leader dies, you will die.",
		actions => [],
		status => {
			recruited => '*',
		},
		theme => "cosmic",
	},
	theme_cosmic_void => {
		name => "Void",
		roletext => "You have the power to eradicate. Once during the game, you can kill another player. This kill can't be stopped by protection, " .
			"and the target won't revive.",
		actions => ["eradicate;1"],
		setup => "town/power,sk",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_vulch => {
		name => "Vulch",
		roletext => "You have the power to salvage. Each night, you will get a random one-shot ability which you may use on a subsequent night.",
		actions => ["autosalvage"],
		status => {
			give => 'disable:1,protect:1,kill:1,reflectshield:1,resurrect:1,steal:1',
		},
		setup => "town/power,mafia,survivor",
		power => 0.5,
		rarity => 3,
		theme => "cosmic",
	},
	theme_cosmic_wrack => {
		name => "Wrack",
		roletext => "You have the power to torture. You may disable another player, blocking them and removing all their role abilities until the next night.",
		actions => ["disable"],
		status => {
			disabletime => 2,
		},
		setup => "town,mafia",
		power => 1,
		rarity => 1,
		theme => "cosmic",
	},
	theme_cosmic_zombie => {
		name => "Zombie",
		roletext => "You have the power of immortality. You can't be killed. (You can still be lynched.)",
		actions => [],
		status => {
			immunekill => '*',
		},
		setup => "town,mafia",
		power => 0.2,
		rarity => 3,
		theme => "cosmic",
	},
	
	# Theme roles - Time spiral
	theme_timespiral_amrouscout => {
		name => "Amrou Scout",
		roletext => "You can inspect another player at night to learn their alignment.",
		actions => ["inspect"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_amrouseekers => {
		name => "Amrou Seekers",
		roletext => "You can track another player at night to discover who they target.",
		actions => ["track"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_ashcoatbear => {
		name => "Ashcoat Bear",
		roletext => "Once per game you can flash into play to block a player, stopping their action that phase.",
		actions => ["xblock;1"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_assemblyworker => {
		name => "Assembly-Worker",
		roletext => "You have no powers.",
		actions => [],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0,
		rarity => 10,
		theme => "timespiral",
		nonadaptive => 1,
	},
	theme_timespiral_barbedshocker => {
		name => "Barbed Shocker",
		roletext => "You can attack a player to disrupt them, blocking their night action. If you attack the same player four times, they " .
			"will run out of cards in their library and die.",
		actions => ["special"],
		status => {
			replacespecial => "wail",
			doompercent => "25",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 1,
		rarity => 30,
		theme => "timespiral",
	},
	theme_timespiral_benalishcavalry => {
		name => "Benalish Cavalry",
		roletext => "You have flanking, which renders you immune to night abilities other than kills.",
		actions => [],
		status => {
			immunenonkill => '*',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_bogardanhellkite => {
		name => "Bogardan Hellkite",
		roletext => "Once per game you can flash into play, killing two target players.",
		actions => ["xkill2;1"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
		minplayers => 8,
	},
	theme_timespiral_bogardanrager => {
		name => "Bogardan Rager",
		roletext => "Once per game you can flash into play, giving a player an extra vote for one day.",
		actions => ["xmotivate;1"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.4,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_brassgnat => {
		name => "Brass Gnat",
		roletext => "You can't vote. However, you can sacrifice yourself to chump-block another player at night.",
		actions => ["block"],
		status => {
			replaceblock => "block #1 \\ suicide",
			maxvote => '0',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => -0.5,
		rarity => 10,
		minplayers => 8,
		theme => "timespiral",
	},
	theme_timespiral_castleraptors => {
		name => "Castle Raptors",
		roletext => "You are an excellent blocker. Each night you can block another player, preventing their action.",
		actions => ["block"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_chronosavant => {
		name => "Chronosavant",
		roletext => "You can bring a dead player back to life at night. However, if you do, you will lose your vote the following day.",
		actions => ["resurrect"],
		status => {
			replaceresurrect => "resurrect #1 \\ subvote #S",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_coraltrickster => {
		name => "Coral Trickster",
		roletext => "You are morphed. You can unmorph at any time, twiddling another player and randomizing their action. " .
			"Until you unmorph, you will show up as a Morph Shell (unknown) on death.",
		actions => ["xrandomize"],
		status => {
			replacerandomize => "randomize #1 \\ transform #S",
			transform => "theme_timespiral_coraltrickster2",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_coraltrickster",
		},
		setup => "town,survivor",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_coraltrickster2 => {
		name => "Coral Trickster",
		roletext => "You have unmorphed and no longer have any special abilities.",
		actions => [],
		status => {
			evolveto => "theme_timespiral_coraltrickster",
		},
		theme => "timespiral",
	},
	theme_timespiral_corpulentcorpse => {
		name => "Corpulent Corpse",
		roletext => "You are suspended for 2 turns. When you unsuspend day 3, you will gain the ability to kill.",
		actions => [],
		status => {
			onday3 => 'transform',
			transform => 'theme_timespiral_corpulentcorpse2',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.4,
		rarity => 10,
		minplayers => 6,
		theme => "timespiral",
	},
	theme_timespiral_corpulentcorpse2 => {
		name => "Corpulent Corpse",
		roletext => "You have now unsuspended. You can kill a player each day. Because you have fear, you can't be blocked.",
		actions => ["daykill"],
		status => {
			immuneblock => '*',
			evolveto => "theme_timespiral_morph",
		},
		theme => "timespiral",
	},
	theme_timespiral_crookclawtransmuter => {
		name => "Crookclaw Transmuter",
		roletext => "Once during the game you can flash into play to redirect another player's action.",
		actions => ["redirect;1"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_cyclopeangiant => {
		name => "Cyclopean Giant",
		roletext => "If you die, you will turn a random player into a Swamp.",
		actions => [],
		status => {
			ongrave => "action:infect #?",
			infect => "theme_timespiral_swamp",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_dauthislayer => {
		name => "Dauthi Slayer",
		roletext => "You will kill a random player each night. Because you have shadow, you can't be tracked.",
		actions => ["autokill"],
		status => {
			invisible => '*',
			evolveto => "theme_timespiral_morph",
		},
		setup => "sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_davenanthealer => {
		name => "D'Avenant Healer",
		roletext => "You can tap to either kill another player or protect another player from kills.",
		actions => ["kill", "protect"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_deathsporethallid => {
		name => "Deathspore Thallid",
		roletext => "You can turn another player into a Saproling, but it only has a 50% chance of success. Whenever a Saproling dies, you " .
			"will gain a one-shot ability to kill another player.",
		actions => ["recruit"],
		status => {
			recruit => "theme_timespiral_saproling",
			failurerecruit => 50,
			"onroledeath:theme_timespiral_saproling" => "action:giveability #S",
			give => "xkill:1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "cult",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_drainingwhelk => {
		name => "Draining Whelk",
		roletext => "Once per game you can flash into play, killing another player and gaining their role.",
		actions => ["xspecial;1"],
		status => {
			replacespecial => "morph #1 \\ kill #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_drudgereavers => {
		name => "Drudge Reavers",
		roletext => "The first time you die, you will regenerate.",
		actions => [],
		status => {
			revive => '1',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.2,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_durkwoodbaloth => {
		name => "Durkwood Baloth",
		roletext => "You are suspended for 2 turns. When you unsuspend day 3, you will gain an extra vote.",
		actions => [],
		status => {
			onday3 => 'transform',
			transform => 'theme_timespiral_durkwoodbaloth2',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.1,
		rarity => 10,
		minplayers => 6,
		theme => "timespiral",
	},
	theme_timespiral_durkwoodbaloth2 => {
		name => "Durkwood Baloth",
		roletext => "You have now unsuspended. You have two votes.",
		actions => [],
		status => {
			maxvote => '2',
			evolveto => "theme_timespiral_morph",
		},
		theme => "timespiral",
	},
	theme_timespiral_facelessbutcher => {
		name => "Faceless Butcher",
		roletext => "You can remove another player from the game once at any time. When you die, the removed player will return to life.",
		actions => ["xeradicate;1"],
		status => {
			replaceeradicate => "disablebase #1 \\ superkill #1 \\ transform2 #1",
			evolveto => "theme_timespiral_morph",
			transform => "theme_timespiral_facelessbutcher2",
		},
		setup => "town,sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_facelessbutcher2 => {
		name => "Faceless Butcher",
		roletext => "You have removed BUDDY1 from the game. If you die, that player will return to life.",
		actions => [],
		status => {
			ongrave => "action:resurrect #B",
			evolveto => "theme_timespiral_morph",
		},
		theme => "timespiral",
	},
	theme_timespiral_fathomseer => {
		name => "Fathom Seer",
		roletext => "You are morphed. You can unmorph at any time to learn the alignment of another player. " .
			"Until you unmorph, you will show up as a Morph Shell (unknown) on death.",
		actions => ["xinspect"],
		status => {
			replaceinspect => "inspect #1 \\ transform #S",
			transform => "theme_timespiral_fathomseer2",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_fathomseer",
		},
		setup => "town,survivor",
		power => 0.3,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_fathomseer2 => {
		name => "Fathom Seer",
		roletext => "You have unmorphed and no longer have any special abilities.",
		actions => [],
		status => {
			evolveto => "theme_timespiral_fathomseer",
		},
		theme => "timespiral",
	},
	theme_timespiral_flickeringspirit => {
		name => "Flickering Spirit",
		roletext => "Once during the game, you may flicker yourself to hide from all actions.",
		actions => ["xhide;1"],
		status => {
			evolveto => "theme_timespiral_fathomseer",
		},
		setup => "town",
		power => 0.2,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_fortunethief => {
		name => "Fortune Thief",
		roletext => "You are morphed. You can unmorph at any time and choose another player. " .
			"The chosen player will become immune to all abilities as long as you are alive. " .
			"Until you unmorph, you will show up as a Morph Shell (unknown) on death.",
		actions => ["xspecial;1"],
		status => {
			replacespecial => "makehidden #1 \\ transform2 #1",
			transform => "theme_timespiral_fortunethief2",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_fortunethief",
		},
		setup => "town,survivor",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_fortunethief2 => {
		name => "Fortune Thief",
		roletext => "You have unmorphed and now protect BUDDY1 from all abilities.",
		actions => [],
		status => {
			onall => "action:makehidden #B",
			evolveto => "theme_timespiral_fortunethief",
		},
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_gorgonrecluse => {
		name => "Gorgon Recluse",
		roletext => "You don't have any abilities yet, but you have madness. If you are targeted by an ability, you will come into play and " .
			"gain the ability to kill.",
		actions => [],
		status => {
			ontarget => "transform",
			transform => "theme_timespiral_gorgonrecluse2",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_gorgonrecluse2 => {
		name => "Gorgon Recluse",
		roletext => "You have been madnessed into play and can now block and kill a player each night.",
		actions => ["special"],
		status => {
			replacespecial => "block #1 \\ kill #1",
			evolveto => "theme_timespiral_morph",
		},
		theme => "timespiral",
	},
	theme_timespiral_greatergargadon => {
		name => "Greater Gargadon",
		roletext => "You are suspended for 5 turns. When you unsuspend day 6, you will be unkillable and have three votes.",
		actions => [],
		status => {
			onday6 => "transform",
			transform => "theme_timespiral_greatergargadon2",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.2,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_greatergargadon2 => {
		name => "Greater Gargadon",
		roletext => "You have unsuspended. You are now unkillable and have three votes.",
		actions => [],
		status => {
			immunekill => '*',
			maxvote => '3',
			evolveto => "theme_timespiral_morph",
		},
		theme => timespiral,
	},
	theme_timespiral_havenwoodwurm => {
		name => "Havenwood Wurm",
		roletext => "Once during the game you can flash into play, blocking and killing another player.",
		actions => ["xspecial;1"],
		status => {
			replacespecial => "block #1 \\ kill #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_ixidron => {
		name => "Ixidron",
		roletext => "You may turn another player face-down each day, removing their abilities and turning them into a Morph Shell.",
		actions => ["dayspecial"],
		status => {
			replacespecial => "evolve #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,mafia-ally,survivor",
		power => 1,
		rarity => 60,
		theme => "timespiral"
	},
	theme_timespiral_jayaballard => {
		name => "Jaya Ballard",
		roletext => "Each night you can incinerate another player, killing them.",
		actions => ["superkill"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_jeditsdragoons => {
		name => "Jedit's Dragoons",
		roletext => "Each night you may use your vigilance to protect another player from kills.",
		actions => ["protect"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_kaervek => {
		name => "Kaervek the Merciless",
		roletext => "Whenever another player targets you with an ability, they will die.",
		actions => [],
		status => {
			ontarget => "action:kill #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_liegeofthepit => {
		name => "Liege of the Pit",
		roletext => "You are morphed. You can unmorph at any time to kill another player. Once you unmorph, you will become a serial killer and " .
			"kill a random player each turn. " .
			"Until you unmorph, you will show up as a Morph Shell (unknown) on death.",
		actions => ["xkill"],
		status => {
			replacekill => "kill #1 \\ transform #S",
			transform => "theme_timespiral_liegeofthepit2,sk0",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_liegeofthepit",
		},
		setup => "town,survivor,sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_liegeofthepit2 => {
		name => "Liege of the Pit",
		roletext => "You have unmorphed. You will kill a random player each night.",
		actions => ["randomkill"],
		status => {
			evolveto => "theme_timespiral_liegeofthepit",
		},
		theme => "timespiral",
	},
	theme_timespiral_limdul => {
		name => "Lim-Dul the Necromancer",
		roletext => "Once per night you may pay 1B to return to life a player who has died. That player becomes a Zombie under your control.",
		actions => ["reanimate"],
		status => {
			recruit => "theme_timespiral_zombie",
			evolveto => "theme_timespiral_morph",
		},
		setup => "cult",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_looterilkor => {
		name => "Looter il-Kor",
		roletext => "You can watch another player at night to see if they use an action. Because you have shadow, you can't be watched or tracked yourself.",
		actions => ["watch"],
		status => {
			invisible => '*',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_magusofthemirror => {
		name => "Magus of the Mirror",
		roletext => "You can swap two other players' roles at night. However, doing so requires you to sacrifice yourself.",
		actions => ["swap"],
		status => {
			replaceswap => "swap #1 #2 \\ suicide",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.1,
		rarity => 60,
		minplayers => 5,
		theme => "timespiral",
	},
	theme_timespiral_manaskimmer => {
		name => "Mana Skimmer",
		roletext => "You may tap down another player's lands at night, possibly disabling them for a day (33% chance).",
		actions => ["disable"],
		status => {
			disabletime => 2,
			failuredisable => 67,
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.3,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_mangaraofcorondor => {
		name => "Mangara of Corondor",
		roletext => "You can remove both yourself and another player from the game at any time. " .
			"Players removed from the game can't ever be returned to life.",
		actions => ["xeradicate"],
		status => {
			replaceeradicate => "disablebase #1 \\ superkill #1 \\ destroybody #1 \\ disablebase #S \\ superkill #S \\ destroybody #S",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.3,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_nightshadeassassin => {
		name => "Nightshade Assassin",
		roletext => "You can kill a player each night. In addition, you have madness. If you are targeted by an ability, you will gain " .
			"an extra one-shot kill.",
		actions => ["kill"],
		status => {
			ontarget => "action:giveability #S",
			give => "daykill:1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_norinthewary => {
		name => "Norin the Wary",
		roletext => "Whenever you are the target of the ability, you will hide, preventing the ability but also removing your vote for the day.",
		actions => [],
		status => {
			ontarget => "action:hide \\ subvote #S",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_pentarchpaladin => {
		name => "Pentarch Paladin",
		roletext => "You can tap to kill another player each night. You also have flanking, which renders you immune to night abilities other than kills.",
		actions => ["kill"],
		status => {
			immunenonkill => '*',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_platedpegasus => {
		name => "Plated Pegasus",
		roletext => "Once per game you can flash into play, protecting all players from kills that phase.",
		actions => ["xspecial;1"],
		status => {
			replacespecial => "protect #* \\ protect #S",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_riftwingcloudskate => {
		name => "Riftwing Cloudskate",
		roletext => "You are suspended for 1 turns. When you unsuspend day 2, you will gain the ability to return another player to their " .
			"owner's hand, resetting them to their original role. If they are a Zombie or Saproling, they will die instead.",
		actions => [],
		status => {
			onday2 => 'transform',
			transform => 'theme_timespiral_riftwingcloudskate2',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_riftwingcloudskate2 => {
		name => "Riftwing Cloudskate",
		roletext => "You have now unsuspended. You can return another player to their owner's hand, resetting their role. " .
			"If you use this on a Zombie or Saproling, they will die instead.",
		actions => ["xspecial;1"],
		status => {
			replacespecial => "restore #1 \\ decult #1",
			evolveto => "theme_timespiral_morph",
		},
		theme => "timespiral",
	},
	theme_timespiral_saffieriksdotter => {
		name => "Saffi Eriksdotter",
		roletext => "You can sacrifice yourself at any time to return another player to life.",
		actions => ["xraise"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_sageofepityr => {
		name => "Sage of Epityr",
		roletext => "Once per game at night you can inspect a player to find out their role.",
		actions => ["inspect;1"],
		status => {
			sanity => "role",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_skitteringmonstrosity => {
		name => "Skittering Monstrosity",
		roletext => "You are so powerful you have two votes. However, if you are the target of an ability, you will die.",
		actions => [],
		status => {
			maxvote => '2',
			ontarget => "action:suicide",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk,survivor",
		power => 0.5,
		rarity => 30,
		minplayers => 6,
		theme => "timespiral",
	},
	theme_timespiral_spiketaildrakeling => {
		name => "Spiketail Drakeling",
		roletext => "You can sacrifice yourself to impede another player's spellcasting, disabling them for a turn.",
		actions => ["xdisable;1"],
		status => {
			replacedisable => "block #1 \\ disablebase #1 \\ suicide",
			disabletime => 2,
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_sporesowerthallid => {
		name => "Sporesower Thallid",
		roletext => "You can turn another player into a Saproling each night",
		actions => ["recruit"],
		status => {
			recruit => "theme_timespiral_saproling",
			evolveto => "theme_timespiral_morph",
		},
		setup => "cult",
		power => 1,
		rarity => 30,
		theme => "timespiral",
	},
	theme_timespiral_thallidgerminator => {
		name => "Thallid Germinator",
		roletext => "You can turn another player into a Saproling, but it only has a 50% chance of success. Whenever a Saproling dies, you " .
			"will gain a one-shot ability to give an extra vote.",
		actions => ["recruit"],
		status => {
			recruit => "theme_timespiral_saproling",
			failurerecruit => 50,
			"onroledeath:theme_timespiral_saproling" => "action:giveability #S",
			give => "xmotivate:1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "cult",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_trespasserilvec => {
		name => "Trespasser il-Vec",
		roletext => "You can kill another player at night by discarding a card. If you do, you won't be able to vote the following day. " .
			"Because you have shadow, you can't be detected by trackers or watchers.",
		actions => ["kill"],
		status => {
			replacekill => "kill #1 \\ subvote #S",
			invisible => '*',
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_triskelavus => {
		name => "Triskelavus",
		roletext => "You have three counters you can use at any time. Each counter will randomly either block or kill another player.",
		actions => ["xspecial;3"],
		status => {
			replacespecial => "block #1 ? kill #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_urborgsiphonmage => {
		name => "Urborg Siphon-Mage",
		roletext => "You can steal a player's vote for the next day. That player will have one fewer vote than normal, and you will have one more.",
		actions => ["stealvote"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_vesuvanshapeshifter => {
		name => "Vesuvan Shapeshifter",
		roletext => "You are morphed. You can unmorph at any time to copy another player's role. You can remorph at night. " .
			"Until you unmorph, you will show up as a Morph Shell (unknown) on death.",
		actions => ["xmorph"],
		status => {
			replacemorph => "morph #1 \\ giveability #S",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			give => "transform",
			transform => "theme_timespiral_vesuvanshapeshifter",
			evolveto => "theme_timespiral_vesuvanshapeshifter",
			morphstatus => "transform,theme_timespiral_vesuvanshapeshifter;evolveto,theme_timespiral_vesuvanshapeshifter",
		},
		setup => "town,sk",
		power => 1,
		rarity => 60,
		minmafia => 1,
		theme => "timespiral",
	},
	theme_timespiral_viashinobladescout => {
		name => "Viashino Bladescout",
		roletext => "Once during the game, you may flash into play to grant another player first strike. If that player would be killed, you will kill " .
			"their attacker instead.",
		actions => ["xguard;1"],
		status => {
			guard => "a",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.4,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_weatheredbodyguards => {
		name => "Weathered Bodyguards",
		roletext => "You are morphed. You can unmorph at any time and choose another player. " .
			"If the chosen player would be killed, you will die instead. You will also learn any player who targets that player with an action. " .
			"Until you unmorph, you will show up as a Morph Shell (unknown) on death.",
		actions => ["xguard"],
		status => {
			replaceguard => "guard #1 \\ patrol #1 \\ transform2 #1",
			transform => "theme_timespiral_weatheredbodyguards2",
			guard => "b",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_weatheredbodyguards",
		},
		setup => "town",
		power => 0.2,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_weatheredbodyguards2 => {
		name => "Weathered Bodyguards",
		roletext => "You have unmorphed and now absorb kills for BUDDY1. You will also see anyone who targets that player with an action at night.",
		actions => [],
		status => {
			onnight => "action:guard #B \\ patrol #B",
			onday => "action:guard #B \\ patrol #B",
			guard => "b",
			evolveto => "theme_timespiral_weatheredbodyguards",
		},
		theme => "timespiral",
	},
	theme_timespiral_witchhunter => {
		name => "Witch Hunter",
		roletext => "Each day, you may return another player to their owner's hand, resetting their role. " . 
			"If you use this on a Zombie or Saproling, they will die instead.",
		actions => ["dayspecial"],
		status => {
			replacespecial => "restore #1 \\ decult #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.2,
		rarity => 60,
		theme => "timespiral",
	},
	# Planar Chaos
	theme_timespiral_aethermembrane => {
		name => "AEther Membrane",
		roletext => "You can block a player at night. In addition, the player you block will be returned to their original role and team. Saprolings and Zombies will die instead.",
		actions => ["block"],
		status => {
			replaceblock => "block #1 \\ restore #1 \\ decult #1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 30,
		theme => "timespiral",
	},
	theme_timespiral_akromaangeloffury => {
		name => "Akroma, Angel of Fury",
		roletext => "You are morphed. You can unmorph at any time to kill another player. Once you have unmorphed, you will be immune to all actions.",
		actions => ["xkill"],
		status => {
			replacekill => "kill #1 \\ transform",
			transform => "theme_timespiral_akromaangeloffury2",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_akromaangeloffury",
		},
		setup => "town,sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_akromaangeloffury2 => {
		name => "Akroma, Angel of Fury",
		roletext => "You have unmorphed. You are now immune to all actions.",
		status => {
			immunekill => '*',
			immunenonkill => '*',
			evolveto => "theme_timespiral_akromaangeloffury",
		},
		theme => "timespiral",
	},
	theme_timespiral_biggamehunter => {
		name => "Big Game Hunter",
		roletext => "You have madness. Whenever you are the target of an ability, you will kill a random player other than yourself.",
		status => {
			ontarget => "action:kill #?",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0,
		rarity => 30,
		theme => "timespiral",
	},
	theme_timespiral_bodydouble => {
		name => "Body Double",
		roletext => "Once during the game, you may become an exact copy of a dead player.",
		actions => ["channel;1"],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_braidsconjureradept => {
		name => "Braids, Conjurer Adept",
		roletext => "Each morning, each other player recieves a random one-shot ability.",
		status => {
			onday => "action:giveability #*",
			give => $santa_abilities,
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	# Untested
	theme_timespiral_firefrightmage => {
		name => "Firefright Mage",
		roletext => "You may target another player at night to make them unblockable.",
		actions => ["special"],
		status => {
			replacespecial => "setstatus",
			set => "immuneblock,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor,mafia-ally",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_malachofthedawn => {
		name => "Malach of the Dawn",
		roletext => "You may guard another player at night. If that player would die, you die instead. The first time you die, you regenerate and return to life.",
		actions => ["guard"],
		status => {
			guard => 'b',
			revive => 1,
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 1,
		rarity => 30,
		theme => "timespiral",
	},
	theme_timespiral_moltenfirebird => {
		name => "Molten Firebird",
		roletext => "Whenever you die, you return to life unless you were lynched. However, you lose your vote the next day.",
		status => {
			onlynch => "action:setstatus #S",
			set => "revive,0",
			revive => '*',
			onrevive => "action:subvote #S",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.5,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_muckdrubb => {
		name => "Muck Drubb",
		roletext => "You have madness. Whenever you are the target of an ability, you gain a one-shot redirect.",
		status => {
			ontarget => "action:giveability #S",
			give => "redirect:1",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,survivor",
		power => 0.2,
		rarity => 30,
		theme => "timespiral",
	},
	theme_timespiral_radhaheirtokeld => {
		name => "Radha, Heir to Keld",
		roletext => "You can kill another player at night. If you do, a random player gains an extra vote the next day.",
		actions => ["kill"],
		status => {
			replacekill => "kill #1 \\ addvote #?",
			evolveto => "theme_timespiral_morph",
		},
		setup => "town,sk",
		power => 1,
		rarity => 60,
		theme => "timespiral",
	},
	theme_timespiral_revereddead => {
		name => "Revered Dead",
		roletext => "The first time you die, you will regenerate and return to life.",
		status => {
			revive => 1,
			evolveto => "theme_timespiral_morph",
		},
		setup => "town",
		power => 0.3,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_shaperparasite => {
		name => "Shaper Parasite",
		roletext => "You are morphed. You may unmorph at any time to either kill another player, or protect another player from kills.",
		actions => ["xkill;1", "xprotect;1"],
		status => {
			replacekill => "kill #1 \\ transform",
			replaceprotect => "protect #1 \\ transform",
			transform => "theme_timespiral_shaperparasite2",
			inspectrole => "Morph Shell",
			deathrole => "Morph Shell",
			deathteam => "unknown",
			evolveto => "theme_timespiral_shaperparasite",
		},
		setup => "town",
		power => 1,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_shaperparasite2 => {
		name => "Shaper Parasite",
		roletext => "You have unmorphed and now have no abilities.",
		status => {
			evolveto => "theme_timespiral_shaperparasite",
		},
		theme => "timespiral",
	},
			
	theme_timespiral_ghostflamesliver => {
		name => "Ghostflame Sliver",
		roletext => "As long as you are alive, the mafia inspect as town to investigations.",
		actions => [],
		status => {
			onall => "action:clear #T",
			evolveto => "theme_timespiral_morph",
			inspect => "town",
		},
		setup => "mafia",
		power => 0.1,
		rarity => 30,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_spinneretsliver => {
		name => "Spinneret Sliver",
		roletext => "",
		actions => [],
		status => {
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0,
		rarity => 10,
		theme => "timespiral",
	},
	theme_timespiral_watchersliver => {
		name => "Watcher Sliver",
		roletext => "As long as you are alive, the mafia are immune to kills.",
		actions => [],
		status => {
			onall => "action:setstatus #T",
			immunekill => '*',
			set => "immunekill,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0.5,
		rarity => 10,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_twoheadedsliver => {
		name => "Two-Headed Sliver",
		roletext => "As long as you are alive, the mafia can't be blocked.",
		actions => [],
		status => {
			onall => "action:setstatus #T",
			immuneblock => '*',
			set => "immuneblock,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0.1,
		rarity => 10,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_sidewindersliver => {
		name => "Sidewinder Sliver",
		roletext => "As long as you are alive, the mafia have flanking, which makes them immune to nonkill abilities.",
		actions => [],
		status => {
			onall => "action:setstatus #T",
			immunenonkill => '*',
			set => "immunenonkill,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0.4,
		rarity => 10,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_shadowsliver => {
		name => "Shadow Sliver",
		roletext => "As long as you are alive, the mafia have shadow, which makes them undetectable by trackers.",
		actions => [],
		status => {
			onall => "action:setstatus #T",
			invisible => '*',
			set => "invisible,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0.2,
		rarity => 10,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_psionicsliver => {
		name => "Psionic Sliver",
		roletext => "As long as you are alive, any member of the mafia can suicide-bomb during the day.",
		actions => ["daysuicidebomb"],
		status => {
			onall => "action:setstatus #T",
			set => "actdaysuicidebomb,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		minmafia => 2,
		power => 1,
		rarity => 60,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_dementiasliver => {
		name => "Dementia Sliver",
		roletext => "As long as you are alive, any member of the mafia can submit a randomize action at night.",
		actions => ["randomize"],
		status => {
			onall => "action:setstatus #T",
			set => "actrandomize,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 1,
		rarity => 30,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_telekineticsliver => {
		name => "Telekinetic Sliver",
		roletext => "As long as you are alive, any member of the mafia can submit a block action at night.",
		actions => ["block"],
		status => {
			onall => "action:setstatus #T",
			set => "actblock,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0.5,
		rarity => 30,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	theme_timespiral_opalinesliver => {
		name => "Opaline Sliver",
		roletext => "As long as you are alive, any member of the mafia can submit a role inspect action at night.",
		actions => ["inspect"],
		status => {
			onall => "action:setstatus #T",
			sanity => "role",
			set => "actinspect,*;sanity,role",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		power => 0.5,
		rarity => 30,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	# Planar Chaos
	# Untested
	theme_timespiral_necroticsliver => {
		name => "Necrotic Sliver",
		roletext => "As long as you are alive, any member of the mafia can suicide-bomb at night.",
		actions => ["suicidebomb"],
		status => {
			onall => "action:setstatus #T",
			set => "actsuicidebomb,*",
			evolveto => "theme_timespiral_morph",
		},
		setup => "mafia",
		minmafia => 2,
		power => 1,
		rarity => 30,
		theme => "timespiral",
		template_forbidstatus => 'onall',
	},
	
	theme_timespiral_morph => {
		name => "Morph Shell",
		roletext => "You have been turned face-down. Because you don't have morph, you can't be turned face-up again.",
		actions => [],
		status => {
			deathrole => "Morph Shell",
			deathteam => "unknown",
		},
		theme => "timespiral",
	},
	theme_timespiral_swamp => {
		name => "Swamp",
		roletext => "You have no special powers.",
		actions => [],
		theme => "timespiral",
	},
	theme_timespiral_zombie => {
		name => "Zombie",
		roletext => "You have been reanimated as a Zombie under Lim-Dul's control. If Lim-Dul dies, you will die.",
		status => {
			evolveto => "theme_timespiral_morph",
			recruited => '*',
		},
		theme => "timespiral",
	},
	theme_timespiral_saproling => {
		name => "Saproling",
		roletext => "You have been turned into a Saproling. If the Thallid that created you dies, you will die.",
		status => {
			evolveto => "theme_timespiral_morph",
			recruited => '*',
		},
		theme => "timespiral",
	},

	# Theme roles - FF6
	theme_ff6_terra => {
		name => "Terra",
		class => "Esper",
		roletext => "You can use your Esper powers to boost another player each night. That player's night action will be improved in some way. Your target will recieve a message. Nothing special happens if you are boosted yourself.",
		actions => ["motivate"],
		status => {
			replacemotivate => 'trigger #1 \\ message #1',
			message => "You feel a surge of Esper power!",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_locke => {
		name => "Locke",
		class => "Tracker",
		roletext => "Your experience as a professional treasure hunter lets you stealthily track a player's movements, letting you know who they target with their night action. If you are boosted, you will also steal one of their role abilities.",
		actions => ["track"],
		status => {
			replacetrack => "track #1 \\ setstatus #S",
			set => "ontrigger,use:steal #R1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_cyan => {
		name => "Cyan",
		class => "Bodyguard",
		roletext => "You can use the skills you learned as a faithful retainer to guard another player from kills. If they would die, you will die instead. If you are boosted, you will also kill the attacker.",
		actions => ["guard"],
		status => {
			replaceguard => "guard #1 \\ setstatus #S",
			set => "ontrigger,action:setstatus #S;set,guard,ab",
			guard => 'b',
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_shadow => {
		name => "Shadow",
		class => "Vigilante",
		roletext => "You are a stealthy assassin. You can kill another player each night. If you are boosted, you can even kill Sabin or someone protected by Celes or Sabin.",
		actions => ["kill"],
		status => {
			replacekill => "kill #1 \\ setstatus #S",
			set => "ontrigger,use:superkill #R1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_edgar => {
		name => "Edgar",
		class => "Jack of All Trades",
		roletext => "Your many devices give you two randomly chosen one-shot abilities at the start of the game. The abilities you can get are protect, kill, block, and inspect. If you are boosted, you don't use up the ability you use.",
		status => {
			onday1 => "action:giveability #S \\ giveability #S",
			replacekill => "kill #1 \\ setstatus #S",
			replaceblock => "block #1 \\ setstatus #S",
			replaceprotect => "protect #1 \\ setstatus #S",
			replaceinspect => "inspect #1 \\ setstatus #S",
			set => "ontrigger,action:copyabilityto #S #S",
			copyuses => 1,
			give => "protect:1,kill:1,block:1,inspect:1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_sabin => {
		name => "Sabin",
		class => "Kill-Immune",
		roletext => "You're so tough that you can't be killed by most abilities. You can also try to protect another player from kills, but it won't have any effect unless you are boosted.",
		actions => ["protect"],
		status => {
			immunekill => '*',
			replaceprotect => 'setstatus #S',
			set => "ontrigger,use:protect #R1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_celes => {
		name => "Celes",
		class => "Cop",
		roletext => "You can use your connections among the Empire and Returners to inspect a player each night and learn whether they are town, mafia, or other. If you are boosted, you will also use your healing magic to prevent one kill targeting that player.",
		actions => ["inspect"],
		status => {
			replaceinspect => "inspect #1 \\ setstatus #S",
			set => "ontrigger,use:protect #R1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_strago => {
		name => "Strago",
		class => "Learner",
		roletext => "As a descendant of the ancient Mage Warriors, you can learn all sorts of abilities. Whenever you are targeted by an action, you learn to use that action on any subsequent night. Nothing special happens if Terra boosts you, but you do learn her motivate ability. You can't use the motivated versions of abilities you learn (which means Sabin and Ultros's abilities are useless).",
		status => {
			ontarget => "action:copyabilityto #1 #S",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_relm => {
		name => "Relm",
		class => "Doctor",
		roletext => "You can draw a copy of another player each night. Any actions targeting that player will target the copy instead and have no effect. If you are boosted, the copy will also use that player's night action on a random target.",
		actions => ["replicate"],
		status => {
			replacereplicate => "makehidden #1 \\ setstatus #S",
			set => "ontrigger,use:copy #R1 #?",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_setzer => {
		name => "Setzer",
		class => "Gambler",
		roletext => "You can gamble with another player at night. You and the chosen player have equal chances of winning. The winner gets the loser's vote the next day. If Terra boosts you, you'll steal her heart - and her ability. You can't use Magicite.",
		actions => ["special"],
		status => {
			replacespecial => "addvote #S \\ subvote #1 ? addvote #1 \\ subvote #S",
			ontrigger => "use:steal #1",
			magicite => '*',
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_mog => {
		name => "Mog",
		class => "MUP",
		roletext => "Your dance has a random effect on a random player each night. It might protect them, inspect them, or give them an ability. If you are boosted, your dance also has the same effect on yourself.",
		actions => ["autospecial"],
		status => {
			replacespecial => "protect #1 \\ setstatus #S ? inspect #1 \\ setstatus #S ? giveability #1 \\ setstatus #S",
			give => "protect:1,inspect:1,block:1,kill:1",
			set => "ontrigger,use:copy #S #S",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_gau => {
		name => "Gau",
		class => "Mystery",
		roletext => "You've learned a useful rage on the Veldt. Unfortunately, you don't know what it does... yet. It gives you all the abilities of a random role, which might even be one another player has this game.",
		status => {
			onday1 => "action:selfmutate",
			mutate => "template:theme_ff6_gau_template",
		},
		# Don't give gau a setup so that he won't rage as himself!
		# setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_gau_template => {
		name => "Gau",
		roletext => "You've learned a useful rage on the Veldt. Unfortunately, you don't know what it does... yet. It gives you all the abilities of a random role, which might even be one another player has this game.",
		actions => ["mystery"],
		status => {
			replacemystery => "#ACTION0",
			teamaltrolesk => "theme_ff6_gau_templatesk",
		},
		replaceactions => 1,
		template => 1,
		propername => 1,
	},
	theme_ff6_gau_templatesk => {
		name => "Serial Killer Gau",
		roletext => "You've learned a useful rage on the Veldt. Unfortunately, you don't know what it does... yet. It gives you all the abilities of a random role, which might even be one another player has this game.",
		actions => ["mystery", "kill"],
		status => {
			replacemystery => "#ACTION0",
		},
		replaceactions => 1,
		template => 1,
		propername => 1,
	},
	theme_ff6_gogo => {
		name => "Gogo",
		class => "Copycat",
		roletext => "You can copy another player's action at night, doing the same thing they do but to a target of your choice. If you are boosted, you will also gain that ability for use on later nights.",
		actions => ["copy"],
		status => {
			replacecopy => "copy #1 #2 \\ setstatus #S",
			set => "ontrigger,use:copyabilityto #R1 #S",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_umaro => {
		name => "Umaro",
		class => "Roleblocker",
		roletext => "Being a Yeti isn't so bad; you get your very own bone club, and nobody seems to want to annoy you. If you wait outside someone's house, they'll be too scared to come out and use their night action. If you are boosted, you'll go into a rage and KILL your target as well.",
		actions => ["block"],
		status => {
			replaceblock => "block \\ setstatus #S",
			set => "ontrigger,use:kill #R1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_banon => {
		# Untested
		name => "Banon",
		class => "Godfather",
		roletext => "As leader of the Returners, you are beyond suspicion. Investigations of you will always get a \"town\" result. If you are boosted, you will gain an extra vote the next day.",
		status => {
			inspect => "town",
			ontrigger => "action:addvote #S",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_ultros => {
		# Untested
		name => "Ultros",
		class => "Reviver",
		roletext => "As star of the game (in your own mind) you're too important to die. The first time you would be killed, you come back. You can also try to drag another player offstage, preventing their role from working, but it won't happen unless you are boosted.",
		actions => ["disable"],
		status => {
			revive => 1,
			replacedisable => "setstatus #S",
			set => "ontrigger,use:disablebase #R1 \\ block #R1",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_kefka => {
		# Untested
		name => "Kefka",
		class => "Poisoner",
		roletext => "You have a barrel of poison and you're not afraid to use it. You can poison someone at night, and they'll die at the end of the following day. If you are boosted, you siphon off a bit of Esper power and use it to randomize ALL other night action targets that night!",
		actions => ["poison"],
		status => {
			poisontime => 2,
			ontrigger => "use:randomizeall",
		},
		setup => "town,mafia,sk",
		theme => "ff6",
		propername => 1,
	},
	theme_ff6_item_magicite => {
		roletext => "#TEXT You have a piece of magicite, which boosts you each night. You may drop your magicite using '!drop' during the day. " .
			"Another player may pick it up using '!take' during the day.",
		status => {
			onnight => 'action:trigger #S',
			magicite => '*',
		},
		template => 1,
		template_forbidstatus => "magicite",
		item => 1,
		item_name => "Magicite",
		theme => "ff6",
	},

	# More roles: Leo, Cid, Gestahl

	# Special setup roles - UPick
	upick_town => {
		name => "UPick Townie",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "town/basic",
		power => 0,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	upick_townpower => {
		name => "UPick Townie+",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "town/basic",
		power => 1,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	upick_mafia => {
		name => "UPick Mafioso",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "mafia/basic",
		power => 0,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	upick_mafiapower => {
		name => "UPick Mafioso+",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "mafia/basic",
		power => 1,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	upick_sk => {
		name => "UPick SK",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "sk/basic",
		power => 1,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	upick_survivor => {
		name => "UPick Survivor",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "survivor/basic",
		power => 0,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	upick_cult => {
		name => "UPick Cult",
		roletext => "The moderator will give you a role description.",
		actions => [],
		setup => "cult/basic",
		power => 1,
		rarity => 1,
		theme => "upick",
		maxnum => 999,
		falserole => 1,
	},
	
	# Special setup roles: Ready-Aim-Fire
	raf => {
		name => "Duelist",
		roletext => "Each night, you can either shoot yourself, shoot another player, or shoot nothing. If you shoot another player, they will die unless " .
			"they shot themself, in which case you will die. If you shoot yourself, you will die unless another player shoots you.",
		actions => ["shoot"],
		status => {
			duelist => '*',
		},
		theme => "raf",
	},

	# Special setup roles: Rock-Paper-Scissors
	rps => {
		name => "Hand",
		roletext => "Rock beats scissors, scissors beat paper, paper beats rock.",
		actions => ["rock", "paper", "scissors"],
		theme => "rps",
	},

	# Special setup roles: Lucid Dreamers
	dreamer1 => {
		name => "Dreamer",
		truename => "Dreamer 1",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:giveability #S",
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => -0.2,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer2 => {
		name => "Dreamer",
		truename => "Dreamer 2",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 0,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer3 => {
		name => "Dreamer",
		truename => "Dreamer 3",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:giveability #S \\ giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 0.3,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer4 => {
		name => "Dreamer",
		truename => "Dreamer 4",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:giveability #S \\ giveability #S \\ giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 0.8,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer5 => {
		name => "Dreamer",
		truename => "Dreamer 5",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:giveability #S \\ giveability #S \\ giveability #S \\ giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 1.1,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer6 => {
		name => "Dreamer",
		truename => "Dreamer 6",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 6),
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 1.4,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer7 => {
		name => "Dreamer",
		truename => "Dreamer 7",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 7),
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 1.7,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	dreamer8 => {
		name => "Dreamer",
		truename => "Dreamer 8",
		roletext => "You have several random abilities.",
		actions => [],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 8),
			give => $dreamer_abilities,
		},
		setup => "town/basic,survivor/basic",
		countas => "jat",
		power => 2.0,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare1 => {
		name => "Nightmare",
		truename => "Nightmare 1",
		roletext => "You have several random abilities, plus block as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["block"],
		status => {
			onstart => "action:giveability #S",
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => -0.3,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare2 => {
		name => "Nightmare",
		truename => "Nightmare 2",
		roletext => "You have several random abilities, plus clear as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["clear"],
		status => {
			onstart => "action:giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => -0.2,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare3 => {
		name => "Nightmare",
		truename => "Nightmare 3",
		roletext => "You have several random abilities, plus protect as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["protect"],
		status => {
			onstart => "action:giveability #S \\ giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => -0.1,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare4 => {
		name => "Nightmare",
		truename => "Nightmare 4",
		roletext => "You have several random abilities, plus karma as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["karma"],
		status => {
			onstart => "action:giveability #S \\ giveability #S \\ giveability #S \\ giveability #S",
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => 0.0,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare5 => {
		name => "Nightmare",
		truename => "Nightmare 5",
		roletext => "You have several random abilities, plus redirect as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["redirect"],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 5),
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => 0.1,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare6 => {
		name => "Nightmare",
		truename => "Nightmare 6",
		roletext => "You have several random abilities, plus reflectshield as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["reflectshield"],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 6),
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => 0.2,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare7 => {
		name => "Nightmare",
		truename => "Nightmare 7",
		roletext => "You have several random abilities, plus shadow as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["shadow"],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 7),
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => 0.3,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	nightmare8 => {
		name => "Nightmare",
		truename => "Nightmare 8",
		roletext => "You have several random abilities, plus possess as a bonus ability. You may use an ability in addition to making the mafia kill.",
		actions => ["possess"],
		status => {
			onstart => "action:" . join(" \\ ", ("giveability #S") x 8),
			give => $dreamer_abilities,
		},
		setup => "mafia/basic",
		countas => "jat",
		power => 0.4,
		rarity => 1,
		unlimited => 1,
		#secret => 1,
		theme => "dreamers",
	},
	
	# Special setup roles: Kingmaker
	km_kingmaker => {
		name => "Kingmaker",
		roletext => "You are the Kingmaker. Neither you, nor any other player, can vote. Each day, you may motivate another player to turn them into the " .
			"King. If you die, a random peasant will become Kingmaker.",
		actions => ["dayproclaim"],
		status => {
			maxvote => 0,
			onday => "action:setstatus #*",
			set => "maxvote,0",
	#		onday => "action:timedproclaim #?",
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_peasant,unique,1"],
		power => 1,
		#nonadaptive => 1,
	},
	km_peasant => {
		name => "Peasant",
		roletext => "You are a peasant. You can't vote. However, the Kingmaker can make you King for the day, in which case you will have a vote. " .
			"If the Kingmaker dies, you have a chance of becoming the new Kingmaker.",
		status => {
			# maxvote => 0,
			'onroledeath1:km_kingmaker' => 'inherit',
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_kingmaker,minrolekm_kingmaker,1"],
		#nonadaptive => 1,
		unlimited => 1,
		rarity => 1,
		minplayers => 5,
	},
	km_merchant => {
		name => "Merchant",
		roletext => "You are a merchant. You can't vote. However, the Kingmaker can make you King for the day, in which case you will have a vote. " .
			"You can never become Kingmaker.",
		status => {
			# maxvote => 0,
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_kingmaker,minrolekm_kingmaker,1", "km_peasant,minrolekm_peasant,1"],
		#nonadaptive => 1,
		unlimited => 1,
		power => -0.6,
		rarity => 5,
		minplayers => 5,
	},
	km_villain => {
		name => "Villain",
		roletext => "You are an evil villain, trying to take over the town from the foolish peasants. You can't vote, but you can kill at night. " .
			"The Kingmaker can also make you King for the day, in which case you will have a vote.",
		status => {
			# maxvote => 0,
		},
		theme => "kingmaker",
		setup => "mafia/basic",
		minplayers => 5,
	},
	km_hero => {
		name => "Hero",
		roletext => "You are the hero of the people. If you are executed, the people will rise up and kill the King in revenge. " .
			"You can't vote, but the Kingmaker can make you King for the day, in which case you will have a vote. You can never become Kingmaker.",
		status => {
			# maxvote => 0,
			onlynch => 'supersaint',
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_kingmaker,minrolekm_kingmaker,1"],
		rarity => 3,
		minplayers => 5,
	},
	km_cop => {
		name => "Cop",
		roletext => "You are a cop. You can inspect another player at night to learn if they are scum. " . 
			"You can't vote, but the Kingmaker can make you King for the day, in which case you will have a vote. You can never become Kingmaker.",
		actions => ["inspect"],
		status => {
			# maxvote => 0,
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_kingmaker,minrolekm_kingmaker,1"],
		rarity => 5,
		minplayers => 7,
	},
	km_doc => {
		name => "Doctor",
		roletext => "You are a doctor. You can protect another player from the scum's kill at night. " . 
			"You can't vote, but the Kingmaker can make you King for the day, in which case you will have a vote. You can never become Kingmaker.",
		actions => ["protect"],
		status => {
			# maxvote => 0,
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_kingmaker,minrolekm_kingmaker,1"],
		rarity => 5,
		minplayers => 5,
	},
	km_vig => {
		name => "Vigilante",
		roletext => "You are a vigilante. You can kill another player at night. " . 
			"You can't vote, but the Kingmaker can make you King for the day, in which case you will have a vote. You can never become Kingmaker.",
		actions => ["kill"],
		status => {
			# maxvote => 0,
		},
		theme => "kingmaker",
		setup => "town/basic",
		setup_checks => ["km_kingmaker,minrolekm_kingmaker,1"],
		rarity => 5,
		minplayers => 5,
	},

	ass_guard => {
		name => "Guard",
		roletext => "You are a guard. The King is BUDDY1. You lose if the king dies, even if all assassins are dead.",
		theme => "assassin",
	},
	ass_king => {
		name => "King",
		roletext => "You are the King. Your guards know who you are, but the assassins don't.",
		status => {
			onday => "action:setbuddy #* #S",
		},
		theme => "assassin",
	},
	ass_assassin => {
		name => "Assassin",
		roletext => "You are an assassin. You don't know who the king is, but the guards do. If you die, you get a kill. " .
			"You win when the King is dead, even if you're dead too.",
		actions => ["daysuicidebomb"],
		status => {
			onlynch => "transform:ass_assassin2",
			"onroledeath:ass_king" => "win",
		},
		theme => "assassin",
	},
	ass_assassin2 => {
		name => "Assassin",
		roletext => "You may kill one player tonight. You will die in the morning.",
		actions => ["kill"],
		status => {
			onday => "action:suicide",
			"onroledeath:ass_king" => "win",
		},
		theme => "assassin",
	},


	# These roles were invented by players after Xyl requested role ideas.
	umake_darwin => {
		# Invented by Tanarin
		name => "Darwin",
		roletext => "You can either mutate or evolve a person during the night.",
		actions => ["mutate", "evolve"],
		#theme => "umake",
		setup => "town,mafia-ally",
		countas => "sci",
		minplayers => 6,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_givermalf => {
		# Invented by Justin
		name => "Malfunctioning Inventor",
		roletext => "You can give another player a random 1-shot ability, which might or might not work like it should.",
		actions => ["giveability"],
		status => {
			give => "inspect:1,inspect:1(sanity:naive),inspect:1(sanity:paranoid),inspect:1(failureinspect:100),block:1,block:1(failureblock:50),block:1(failureblock:100),kill:1,kill:1(failurekill:50),kill:1(failurekill:100),protect:1,protect:1(failureprotect:50),protect:1(failureprotect:100)",
			evolveto => 'giver',
		},
		#theme => "umake",
		setup => "town,mafia",
		countas => "giver",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_adventurer => {
		# Invented by Lukion
		name => "Adventurer",
		roletext => "You can trek to the secret caves at night, risking death for the chance at gaining an ability. This means all actions targeting you when you trek will not work.",
		actions => ["hide"],
		status => {
			replacehide => "hide \\ kill #S ? hide ? hide \\ giveability #S",
			give => $santa_unlimited_abilities,
		},
		#theme => "umake",
		setup => "town,survivor",
		countas => "tik",
		minplayers => 4,
		rarity => 100,
		power => 1,
		#secret => 1,
	},
	umake_givertrain => {
		# Invented by Justin
		name => "Inventor in Training",
		roletext => "You are a new Inventor that is being trained. Right now you can just give another player a random everyday life 1-shot ability; after a bit of time has passed by you'll soon become an Experienced Inventor with better inventions!",
		actions => ["giveability"],
status => {
			give => "inspect:1,block:1,kill:1,protect:1",
			onday2 => "transform:umake_givertrain2",
		},
		#theme => "umake",
		setup => "town,mafia-ally",
		countas => "giver",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_givertrain2 => {
		# Invented by Justin (part 2)
		name => "Experienced Inventor",
		roletext => "You've come a long way at training. You can still give another player a random 1-shot ability, but you can give some more powerful ones now.",
		actions => ["giveability"],
		status => {
			give => "inspect:1(sanity:role),redirect:1,superkill:1,guard:1(guard:a),motivate:1",
		},
		theme => "umake",
		#secret => 1,
	},
	umake_vhalf => {
		# Invented by Lukion
		name => "Gunman with a Conscience",
		roletext => "You can kill once per night, but it only has a 50% chance of working.",
		actions => ["kill"],
		status => {
			failurekill => 50,
			evolveto => 'v',
		},
		#theme => "umake",
		setup => "town,sk",
		countas => "v",
		minplayers => 4,
		rarity => 100,
		power => 0.3,
		#secret => 1,
	},
	umake_gadget => {
		# Invented by Tanarin
		name => "Inspector Gadget",
		roletext => "You may inspect once per night, or do a random nonkill action. You may or may not be sane.",
		actions => ["inspect", "special"],
		status => {
			replacespecial => "block \ makehidden ? addvote ? antidote ? redirect #1 #S ? autopsy ? block ? clear ? copyability ? curse ? decult ? delay ? block \ disablebase ? eavesdrop ? evolve ? swap #1 #S ? restore \ decult ? frame ? friend ? giveability ? guard ? inspect ? block \ protect ? copy #1 #1 ? makehidden ? message ? morph ? mutate ? block \ subvote ? patrol ? protect ? psych ? randomize ? reflectshield ? restore ? steal ? subvote ? subvote #1 \ addvote #S ? track ? watch",
			curse => "+template_cursed",
			gift => $santa_abilities,
			guard => "ab",
			message => "Your hat turned into an umbrella.",
			convert => "sk,t,town",
		},
		#theme => "umake",
		setup => "town",
		countas => "c",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_gadgeti => {
		alias => "umake_gadget+template_i",
		#theme => "umake",
		setup => "town",
		countas => "ci",
		minplayers => 4,
		rarity => 5000,
		power => 0.5,
		#secret => 1,
	},
	umake_gadgetp => {
		alias => "umake_gadget+template_p",
		#theme => "umake",
		setup => "town",
		countas => "ci",
		minplayers => 4,
		rarity => 5000,
		power => 0.2,
		#secret => 1,
	},
	umake_gadgetn => {
		alias => "umake_gadget+template_n",
		#theme => "umake",
		setup => "town",
		countas => "ci",
		minplayers => 4,
		rarity => 5000,
		power => 0.2,
		#secret => 1,
	},
	umake_netrobot => {
		# Invented by TheFooFish
		name => "Network Robot",
		roletext => "Whenever you are targeted by an ability, all players gain that ability. It still has its normal effect on you.",
		actions => [],
		status => {
			ontarget => 'action:copyabilityto #1 #S \\ copyabilityto #1 #*',
		},
		#theme => "umake",
		setup => "town,survivor",
		countas => "copy",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_cprgiver => {
		# Invented by TheFooFish
		name => "CPR Instructor",
		roletext => "During the day, you may teach CPR to another player. That player will gain the CPR ability. At night, you may perform CPR on another player. If someone attempts to kill that player, they will survive. Otherwise, they will die.",
		actions => ["daygiveability", "cpr"],
		status => {
			give => "cpr",
		},
		#theme => "umake",
		setup => "town",
		countas => "v",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_fisherman => {
		# Invented by TheFooFish
		name => "Fisherman",
		roletext => "You live a peaceful life and make your living from the sea.",
		#theme => "umake",
		setup => "town",
		countas => "t",
		minplayers => 3,
		rarity => 100,
		power => 0,
		#secret => 1,
	},
	umake_cookie => {
		# Invented by Dazzy
		name => "Cookie Baker",
		roletext => "You can feed a person each night, either protecting them from all actions or poisoning them.",
		actions => ["special"],
		status => {
			replacespecial => "makehidden ? poison",
			poisontime => 2,
		},
		#theme => "umake",
		setup => "town,survivor",
		countas => "v",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_talentedv => {
		# Invented by Justin
		name => "Talented Cowardly Vigilante",
		roletext => "You can kill a person at night. If you do, you will also hide so all actions targeting you fail.",
		actions => ["kill"],
		status => {
			replacekill => "kill \\ hide",
		},
		#theme => "umake",
		setup => "town",
		countas => "v",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
	},
	umake_jekyl => {
		# Invented by Tanarin
		name => "Dr Jekyl",
		roletext => "You can protect a player from one kill each night, or you can transform into Mr Hyde.",
		actions => ["protect", "transform"],
		status => {
			transform => "umake_hyde",
		},
		#theme => "umake",
		setup => "town,survivor",
		countas => "d",
		minplayers => 4,
		rarity => 200,
		power => 1,
		#secret => 1,
	},
	umake_hyde => {
		# Invented by Tanarin
		name => "Mr Hyde",
		roletext => "You can kill a player at night, or you can transform into Dr Jekyl.",
		actions => ["kill", "transform"],
		status => {
			transform => "umake_jekyl",
		},
		#theme => "umake",
		setup => "town,survivor",
		countas => "v",
		minplayers => 4,
		rarity => 200,
		power => 1,
		#secret => 1,
	},
	umake_foofish => {
		# Invented by TheFooFish (of course)
		# Millerness added by Xyl :)
		name => "Foo",
		roletext => "You are a vanilla townie, you have no abilities. Except, of course, for your naturally amazing scum talents which allow you to inspect a player and learn their alignment.",
		actions => ["inspect"],
		status => {
			inspect => "mafia",
			weapon => "gun",
		},
		#theme => "umake",
		setup => "town",
		countas => "c",
		minplayers => 4,
		rarity => 100,
		power=> 0.8,
		#secret => 1,
	},
	umake_norris => {
		# Invented by PokerFace
		# (not tested)
		name => "Chuck Norris",
		roletext => "You have 10 one-shot abilities. You can only use one ability each night. You are immune to kills.",
		actions => ["eradicate;1", "track;1", "protect;1", "block;1", "antidote;1", "exorcise;1", "frame;1", "abduct;1", "inspect;1", "kill;1"],
		status => {
			immunekill => '*',
		},
		#theme => "umake",
		setup => "town,sk",
		countas => "jat",
		minplayers => 4,
		rarity => 100,
		power => 0.5,
		#secret => 1,
		theme => "normal,foxworld",
	},
	umake_devil => {
		# Invented by PokerFace
		name => "Devil's Advocate",
		roletext => "You can't kill at night, instead you may inspect any player and determine their alignment and role. You may kill players only during the day.",
		actions => ["inspect", "daykill"],
		status => {
			sanity => "pm",
		},
		#theme => "umake",
		setup => "sk",
		countas => "c",
		minplayers => 4,
		rarity => 100,
		power => 1,
		#secret => 1,
		theme => "normal,foxworld",
	},
	umake_genie => {
		# Invented by PokerFace
		name => "Game Genie",
		roletext => "Each night you learn the role PM of a random role in the setup, but not who has it. If you die, you will return to life and get a new role and possibly a new team.",
		actions => ["autocheat"],
		status => {
			sanity => "pm,notarget",
			revive => 1,
			onrevive => "action:selfmutate",
			mutate => 'newteam',
		},
		#theme => "umake",
		setup => "town",
		countas => "crole",
		minplayers => 4,
		rarity => 100,
		power => 1,
		#secret => 1,
	},
	# This role is bugged to all heck. Commented out until someone can do it properly. (Xyl)
	umake_truth => {
		# Invented by Daz to combat Doomspeaker
		name => "Truthsayer",
		roletext => "Heretics are saying the world is coming to an end. This is a lie! You can cause a person to doubt their doom once per night.",
		actions => ["truthsay"],
		setup => "town",
		countas => 'drole',
		power => 1,
		rarity => 500,
		minplayers => 4,
		secret => 1,
	},
	umake_mir => {
		# Invented by Daz
		name => "Shiny Mirror",
		roletext => "You're so shiny that any action targetting you will bounce straight back at the person who targetted you. You are still affected by the action. However, abilities are powerful these days, and it's bad luck to go near a cracked mirror..",
		status => {
			ontarget => "action:karma #1 ? karma #1 ? karma #1 ? transform",
			immuneblock => '*',
			immunerandomize => '*',
			immuneredirect => '*',
			transform => "umake_bromir",
			},
		setup => "town,survivor",
		minplayers => 4,
		power => 1,
		rarity => 500,
		secret => 1,
	},
	umake_bromir => {
		# related to umake_mir , invented by Daz.
		name => "Broken Mirror",
		roletext => "An ability has shattered you! Bad things may happen to people who come near you now..",
		status => {
			ontarget => "action:kill #1 ? curse #1 ? disable #1 ? block #1 ? karma #1 ? randomize #1",
			immuneblock => '*',
			immunerandomize => '*',
			immuneredirect => '*',
			curse => '+template_cursed',
			disabletime => 2,
			},
		secret => 1,
	},
	umake_sensei => {
		# Invented by Phayt and LeafSnail
		name => "Sensei",
		roletext => "You can recruit another player to be your pupil in the martial arts. If your target is protown, they will join you and gain the ability to kill. Else, you will die.",
		actions => ["recruit"],
		status => {
			recruit => "umake_senpai,dieonfail",
		},
		setup => "town/power",
		minplayers => 6,
		power => 1,
		rarity => 500,
		secret => 1,
	},
	umake_senpai => {
		# Related to umake_sensai , Invented by Phayt and LeafSnail
		name => "Senpai",
		roletext => "Your Sensei has taught you the ways of fighting, and you may now kill a player each night. If your Sensei dies, you will commit suicide from grief.",
		actions => ["kill"],
		status => {
			onall => "action:setstatus #T",
			set => "actrecruit,0",
			immunedisablebase => '*',
		},
		secret => 1,
		template_forbidstatus => 'onall',
	},
	umake_infat => {
		#Invented by Mego
		name => "Infatuated Townie",
		roletext => "You are infatuated with BUDDY1. You're so madly in love  that you will stalk them learn either who they target or who targets them every night. Should they die, you will commit suicide.",
		status => {
			'replacespecial' => "track #B ? patrol #B",
			onbuddydeath => 'action:suicide',
		},
		actions => ["autospecial"],
		minplayers => 5,
		setup => "town",
		power => 1,
		rarity => 500,
		secret => 1,
	},
	umake_pud => {
		# Invented by Nikanor
		name => "Black Pudding",
		roletext => "You are immune to kills. If you are targetted by a kill, you will instead divide in two and gain a vote.",
		status => {
			"ontarget:kill" => 'action:addvote #S',
			immunekill => '*',
		},
		template_forbidstatus => "immunekill",
		minplayers => 5,
		setup => "town",
		power => 2,
		rarity => 500,
		secret => 1,
	},
	umake_jat2 => {
		# Invented by Nikanor
		name => "Cephalopod",
		roletext => "You are an amazingly versatile underwater organism. You may choose to hide, track, poison or watch each night, but only once per action.",
		actions => ["hide;1","watch;1","track;1","poison;1"],
		minplayers => 4,
		setup => "town,survivor",
		power => 1,
		rarity => 200,
		secret => 1,
	},
	
	# Roles for Hot Potato Setup by DrCoconut

	coldpotato => {
		name => "Cold Potato",
		roletext => "You are just a lonely potato. If you are lynched you will return to life.",
		status => {
			onlynch => 'revive',
			'onroledeath1:hotpotato' => 'inherit',
		},
		template_forbidstatus => "onlynch",
		theme => "cocopotato",
		},
	hotpotato => {
		name => "Hot Potato",
		actions => [ "dayexchange"],
		status => {
#			ghostaction => 'gift',
#			replacegift => "transformother",
#			transform => 'hotpotato',
			replaceexchange => "swap #1 #S \\ clearphaseaction",
			timer => 10,
			template_minactions => 1,
			template_maxactions => 1,
			'onlynch' => 'action:canceltimer', # Daz 8/5/11
		},
		roletext => "You are the Hot Potato. If you are lynched, you lose. Exchange this role quickly and you may have a chance to win!",
		theme => "cocopotato",
	},
	### Roles for Allies
	
	
	out_maf => {
		name => "Lone Mafioso",
		actions => [ "mafiakill"],
		roletext => "You are a lone mafioso seeking to overtake the town. However, you have allies, although you do not know who, and they will take your place when you are gone.",
	},
	out_ally => {
		name => "Shadowy Ally",
		roletext => "You are a mafia-ally hiding in the shadows. You will support the mafia, and if they fall, you may become the new mafia. The mafia do not know who you are, but they do know there are allies among the town.",
		status => {
			'onroledeath1:out_maf' => 'transform:out_maf,mafia',
		},
	},
	### Roles for Minecraft
	water => {
		name => "Water",
		status => { 
			onvoted => "action:command #S #1",
		},
	},
	slime0 => {
		name => "Tiny Slime",
		minplayers => 5,
		status => {
			maxvote => 0,
			onday2 => "transform",
			transform => "slime1",
		},	
	},
	slime1 => {
		name => "Small Slime",
		status => {
			maxvote => 1,
			onday3 => "transform",
			transform => "slime2",
		},
	},
	slime2 => {
		name => "Big Slime",
		status => {
			maxvote => 2,
			onday4 => "transform",
			transform => "slime3",
		},
	},
	slime3 => {
		name => "Huge Slime",
		status => {
			maxvote => 3,
		},
	},

 	### Roles for Worst Idea
	
	# Base fighters
	gunfighter100 => {
		name => "Fighter",
		roletext => "You have 100 hp.",
		#actions => ["dayattack"],
		status => {
			#weapondamage => 5,
			#rechargeattack => 12,
			hp => 100,
			maxvote => 0,
		},
		theme => "worstidea",
		power => 0.0,
		setup => "none",
		fixed_power_base => 1, # Allows template power estimator to consider this perfect as a base
	},
	template_hp120 => {
		name => "Buff #NAME",
		roletext => "You have 120 hp.",
		status => {
			hp => 120,
			hpboost => '*',
		},
		template => 1,
		template_forbidstatus => "hpboost",
	},
	gunfighter120 => {
		alias => 'gunfighter100+template_hp120',
		theme => "worstidea",
		#power => 0.3,
		setup => "none",
		fixed_power_base => 1, # Allows template power estimator to consider this perfect as a base
	},
	gunfighter100hp120 => { alias => 'gunfighter120' },
	template_hp150 => {
		name => "Elite #NAME",
		roletext => "You have 150 hp.",
		status => {
			hp => 150,
			hpboost => '*',
		},
		template => 1,
		template_forbidstatus => "hpboost",
	},
	gunfighter150 => {
		alias => 'gunfighter100+template_hp150',
		theme => "worstidea",
		#power => 0.3,
		setup => "none",
		fixed_power_base => 1, # Allows template power estimator to consider this perfect as a base
	},
	gunfighter100hp150 => { alias => 'gunfighter150' },
	gunfighter120hp120 => { alias => 'gunfighter150' },
	template_hp200 => {
		name => "Champion #NAME",
		roletext => "You have 200 hp.",
		status => {
			hp => 200,
			hpboost => '*',
		},
		template => 1,
		template_forbidstatus => "hpboost",
	},
	gunfighter200 => {
		alias => 'gunfighter100+template_hp200',
		theme => "worstidea",
		#power => 0.3,
		setup => "none",
		fixed_power_base => 1, # Allows template power estimator to consider this perfect as a base
	},
	gunfighter100hp200 => { alias => 'gunfighter200' },
	gunfighter120hp200 => { alias => 'gunfighter200' },
	gunfighter150hp200 => { alias => 'gunfighter200' },
	template_hpmutant => {
		name => "Mutant #NAME",
		roletext => "You have 90 hp and regenerate 20 hp/10 sec. You do -25% damage but recharge 50% faster. You cannot use miscellaneous items.",
		status => {
			hp => 90,
			hpboost => '*',
			regen => 20,
			weaponmultiplier => 0.75,
			speedboost => 50,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "hpboost,regen,weaponmultiplier,speedboost,miscitem",
	},
	gunfightermutant => {
		alias => 'gunfighter100+template_hpmutant',
		theme => "worstidea",
		power => 0.2,
		setup => "none",
		fixed_power_base => 1,
	},
	gunfighter100hpmutant => { alias => 'gunfighteralien' },


	# Items (weapons)
	item_knife => {
		# 1.875 damage/sec
		roletext => "#TEXT Knife (weapon, 15 damage, recharge 8s)",
		actions => ["dayattack"],
		status => {
			weapon => "knife",
			weapondamage => 15,
			weaponkillmessage => "TARGET got a second smile from PLAYER's Knife!",
			rechargeattack => 8,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Knife",
		theme => "worstidea",
	},
	item_vibroknife => {
		# 3.333 damage/sec
		roletext => "#TEXT Vibroknife (weapon, 10-30 damage, recharge 6s)",
		actions => ["dayattack"],
		status => {
			weapon => "knife",
			weapondamage => 10,
			weaponkillmessage => "TARGET got a second smile from PLAYER's Vibroknife!",
			weaponmaxshots => 3,
			rechargeattack => 6,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Vibroknife",
		theme => "worstidea",
	},
	item_monoblade => {
		# 3.75 damage/sec
		roletext => "#TEXT Monoblade (weapon, 75 damage, recharge 20s)",
		actions => ["dayattack"],
		status => {
			weapon => "knife",
			weapondamage => 75,
			weaponkillmessage => "TARGET got decapitated by PLAYER's Monoblade!",
			rechargeattack => 20,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Monoblade",
		theme => "worstidea",
	},
	item_paranoiaknife => {
		# 4.37+ damage/sec
		roletext => "#TEXT Paranoia Knife (weapon, 30 damage, attack anyone who attacks you, recharge 8s)",
		actions => ["dayattack"],
		status => {
			weapon => "knife",
			weapondamage => 30,
			weaponkillmessage => "TARGET got shanked by PLAYER's Paranoia Knife!",
			rechargeattack => 8,
			"ontarget:attack" => "use:attack #1",
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Paranoia Knife",
		theme => "worstidea",
	},
	item_handgun => {
		# 2.083 damage/sec, total 200 damage
		roletext => "#TEXT Handgun (weapon, 25 damage, recharge 12s, 8 shots)",
		actions => ["dayattack;8"],
		status => {
			weapon => "gun",
			weapondamage => 25,
			weaponkillmessage => "TARGET got plugged by PLAYER's Handgun!",
			rechargeattack => 12,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Handgun",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_autopistol => {
		# 3.000 damage/sec, total 270 damage
		roletext => "#TEXT Autopistol (weapon, 30 damage, recharge 10s, 9 shots)",
		actions => ["dayattack;9"],
		status => {
			weapon => "gun",
			weapondamage => 30,
			weaponkillmessage => "TARGET got plugged by PLAYER's Autopistol!",
			rechargeattack => 8,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Autopistol",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_stunner => {
		# 2.000 damage/sec, total 240 damage
		roletext => "#TEXT Stunner (weapon, 20 damage and target's next attack has double recharge time, recharge 10s, 12 shots)",
		actions => ["dayattack;12"],
		status => {
			weapon => "stunner",
			weapondamage => 20,
			weaponkillmessage => "TARGET was fried by PLAYER's Stunner!",
			rechargeattack => 10,
			weaponstun => '*',
		},
		template => 1,
		template_forbidstatus => "weapon,weaponstun",
		item => 1,
		item_name => "Stunner",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_rifle => {
		# 3.000 damage/sec, total 225 damage
		roletext => "#TEXT Rifle (weapon, 45 damage, recharge 15s, 5 shots)",
		actions => ["dayattack;5"],
		status => {
			weapon => "gun",
			weapondamage => 45,
			weaponkillmessage => "TARGET bought the farm thanks to PLAYER's Rifle!",
			rechargeattack => 15,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Rifle",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_sniperrifle => {
		# 4.000 damage/sec, total 180 to 360 damage
		roletext => "#TEXT Sniper Rifle (weapon, 60 damage or 120 if target is marked, recharge 15s, 3 shots)",
		actions => ["dayattack;3", "daymark"],
		status => {
			weapon => "gun",
			weapondamage => 60,
			weaponmarkmultiplier => 2,
			weaponmarkmessage => "BOOM! Headshot! TARGET took DAMAGE damage from PLAYER's Sniper Rifle.",
			weaponkillmessage => "TARGET bought the farm thanks to PLAYER's Sniper Rifle!",
			weaponmarkkillmessage => "BOOM! Headshot! TARGET got their brains blown out by PLAYER's Sniper Rifle!",
			rechargeattack => 15,
			rechargemark => 15,
			"ondrop:item_sniperrifle" => 'action:unmark #m',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Sniper Rifle",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_chaosrifle => {
		roletext => "#TEXT Chaos Rifle (weapon, 50 damage with 25% chance of crit for 150 damage, recharge 15s, 7 shots)",
		actions => ["dayattack;7"],
		status => {
			weapon => "gun",
			weapondamage => 50,
			weaponcrit => 25,
			weaponmarkmultiplier => 3,
			weaponkillmessage => "TARGET was punctured by PLAYER's Chaos Rifle!",
			weaponmarkmessage => "CRITICAL HIT! TARGET took DAMAGE damage from PLAYER's Chaos Rifle.",
			weaponmarkkillmessage => "CRITICAL HIT! TARGET was obliterated by PLAYER's Chaos Rifle!",
			rechargeattack => 15,
			"ondrop:item_sniperrifle" => 'action:unmark #m',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Chaos Rifle",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_gaussrifle => {
		roletext => "#TEXT Gauss Rifle (weapon, 40 damage or 95 if charged, recharge 10s + 10s to charge, 4 shots)",
		actions => ["dayattack;5", "daycharge"],
		status => {
			weapon => "gun",
			weapondamage => 40,
			weaponkillmessage => "TARGET was blown apart by PLAYER's Gauss Rifle!",
			rechargeattack => 10,
			charge => 55,
			maxcharge => 55,
			rechargecharge => 10,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Gauss Rifle",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_railgun => {
		roletext => "#TEXT Railgun (weapon, 200 damage, recharge 35s, 2 shots)",
		actions => ["dayattack;2"],
		status => {
			weapon => "gun",
			weapondamage => 200,
			weaponkillmessage => "TARGET was obliterated by PLAYER's Railgun!",
			rechargeattack => 35,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Railgun",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_stickygun => {
		# 2.083 or 2.778+ damage/sec
		roletext => "#TEXT Sticky Gun (weapon, 25 damage, recharge 12s; 2 sticky bombs, ignite with shot or both at once, 100 damage to each marked player)",
		actions => ["dayattack", "daymark;2", "dayignite"],
		status => {
			weapon => "gun",
			weapondamage => 25,
			weaponmarkmultiplier => 4,
			weaponmarkmessage => "TARGET took DAMAGE damage from a sticky bomb!",
			weaponkillmessage => "TARGET died ingloriously to PLAYER's Sticky Gun!",
			weaponmarkkillmessage => "TARGET was blown to bits by a sticky bomb!",
			rechargeattack => 12,
			rechargeignite => 1,
			rechargemark => 24,
			"ondrop:item_stickygun" => 'action:unmark #m',
			replaceignite => 'attack #m',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Sticky Gun",
		item_chargestatus => "actdaymark",
		theme => "worstidea",
	},
	item_retributor => {
		# 2.000 or 6.000 damage/sec, total 180 to 540 damage
		roletext => "#TEXT Retributor (weapon, 30 damage or 90 if target fired on you first, recharge 15s, 6 shots)",
		actions => ["dayattack;6"],
		status => {
			weapon => "gun",
			weapondamage => 30,
			weaponmarkmultiplier => 3,
			weaponkillmessage => "TARGET died to a preemptive attack from PLAYER's Retributor!",
			weaponmarkkillmessage => "TARGET felt the wrath of PLAYER's Retributor!",
			rechargeattack => 15,
			"ondrop:item_retributor" => 'action:unmark #m',
			"ontarget:attack" => 'action:mark #1',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Retributor",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_disruptor => {
		# 2.500 or 5.000 damage/sec, total 200 to 400 damage
		roletext => "#TEXT Disruptor (weapon, 25 damage or 50 if target was previously hit with Disruptor, recharge 10s, 8 shots)",
		actions => ["dayattack;8"],
		status => {
			weapon => "gun",
			weapondamage => 25,
			weaponmarkmultiplier => 2,
			weaponkillmessage => "TARGET was ionized by PLAYER's Disruptor!",
			rechargeattack => 10,
			weaponmark => '*',
			"ondrop:item_disruptor" => 'action:unmark #m',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Disruptor",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_polaritywave => {
		# 3.333 or 13.33 damage/sec, total 320 to 1280 damage
		roletext => "#TEXT Polarity Wave (weapon, 40 damage or 160 if target was previously hit by another player's Polarity Wave, recharge 12s, 8 shots)",
		actions => ["dayattack;8"],
		status => {
			weapon => "gun",
			weapondamage => 40,
			weaponpolarmultiplier => 4,
			weaponkillmessage => "TARGET was shattered by PLAYER's Polarity Wave!",
			rechargeattack => 12,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Polarity Wave",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_neuralpulse => {
		# Special damage
		roletext => "#TEXT Neural Pulse (weapon, 10 damage plus ongoing 10 damage every 10 seconds until target is healed, recharge 10s, 5 shots)",
		actions => ["dayattack;5"],
		status => {
			weapon => "gun",
			weapondamage => 10,
			weaponkillmessage => "TARGET was left braindead by PLAYER's Neural Pulse!",
			weaponpulse => 10,
			rechargeattack => 10,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Neural Pulse",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_osiris => {
		# 3.000, 5.000, or more damage/sec, total 390 or more damage
		roletext => "#TEXT Osiris (weapon, 30 damage + 20 per player you've killed with this, recharge 10s, 13 shots)",
		actions => ["dayattack;13"],
		status => {
			weapon => "gun",
			weapondamage => 30,
			weaponkillmessage => "TARGET was drained by PLAYER's Osiris!",
			rechargeattack => 10,
			onkill => "action:increasestatus #s",
			increase => "weapondamage,20",
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Osiris",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_soulcannon => {
		# 5.000 damage/sec
		roletext => "#TEXT Soul Cannon (weapon, 75 damage, recharge 15s, 1 shot + 1 extra shot every time a player dies)",
		actions => ["dayattack;1"],
		status => {
			weapon => "gun",
			weapondamage => 75,
			weaponkillmessage => "TARGET was reduced to a lifeless husk by PLAYER's Soul Cannon!",
			rechargeattack => 15,
			ondeath => "action:increasestatus #s",
			increase => "actdayattack,1",
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Soul Cannon",
		item_chargestatus => "actdayattack",
		item_nevervanish => 1,
		theme => "worstidea",
	},
	item_grenadelauncher => {
		# 4.800 damage/sec, total 240 damage
		roletext => "#TEXT Grenade Launcher (weapon, 120 damage, recharge 25s, 2 shots)",
		actions => ["dayattack;2"],
		status => {
			weapon => "gun",
			weapondamage => 120,
			weaponkillmessage => "TARGET failed to dodge PLAYER's Grenade Launcher!",
			rechargeattack => 25,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Grenade Launcher",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_shotgun => {
		# 3.500 damage/sec, total 80 to 480 damage
		roletext => "#TEXT Shotgun (weapon, 20-120 damage, recharge 20s, 4 shots)",
		actions => ["dayattack;4"],
		status => {
			weapon => "gun",
			weapondamage => 20,
			weaponkillmessage => "TARGET was gibbed by PLAYER's Shotgun!",
			weaponmaxshots => 6,
			rechargeattack => 20,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Shotgun",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_chaingun => {
		# 6.666 damage/sec, total 80 to 480 damage
		roletext => "#TEXT Chaingun (weapon, 30-210 damage, recharge 18s, 6 shots)",
		actions => ["dayattack;6"],
		status => {
			weapon => "gun",
			weapondamage => 30,
			weaponkillmessage => "TARGET was shredded by PLAYER's Chaingun!",
			weaponmaxshots => 7,
			rechargeattack => 18,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Chaingun",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_avenger => {
		# 2.500 damage/sec, total 360 + 60 damage
		roletext => "#TEXT Avenger (weapon, 60 damage, recharge 24s, 6 shots; deals 60 damage to your killer when you die)",
		actions => ["dayattack;6"],
		status => {
			weapon => "gun",
			weapondamage => 60,
			weaponkillmessage => "TARGET is no longer a threat thanks to PLAYER's Avenger!",
			ongrave => "action:attack #1",
			rechargeattack => 24,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Avenger",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_poisondartgun => {
		# INFINITE damage/sec
		roletext => "#TEXT Poison Dart Gun (weapon, guaranteed kill with 60s delay, recharge 20s, 1 shot)",
		actions => ["daykill;1"],
		status => {
			weapon => "gun",
			rechargekill => 20,
			timerkill => 60,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Poison Dart Gun",
		item_chargestatus => "actdaykill",
		theme => "worstidea",
	},
	item_plasmarifle => {
		# 2.500 damage/sec
		roletext => "#TEXT Plasma Rifle (weapon, 25 damage per 10s since last shot up to 100 damage, recharge 10s)",
		actions => ["dayattack"],
		status => {
			weapon => "gun",
			weapondamage => 0,
			weaponkillmessage => "TARGET was cooked well-done by PLAYER's Plasma Rifle!",
			charge => 25,
			maxcharge => 100,
			onpulse => "action:charge",
			rechargeattack => 10,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Plasma Rifle",
		theme => "worstidea",
	},
	item_plasmalauncher => {
		# 6.000 damage/sec, total up to 720 damage
		roletext => "#TEXT Plasma Launcher (weapon, 60 damage per 10s since last shot up to 180 damage, recharge 10s, 3 shots)",
		actions => ["dayattack;3"],
		status => {
			weapon => "gun",
			weapondamage => 0,
			weaponkillmessage => "TARGET was incinerated by PLAYER's Plasma Launcher!",
			charge => 60,
			maxcharge => 180,
			onpulse => "action:charge",
			rechargeattack => 10,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Plasma Launcher",
		theme => "worstidea",
	},
	item_healgun => {
		# -2.500 damage/sec, total -300 damage
		roletext => "#TEXT Heal Gun (weapon, heals 10 damage, recharge 4s, 30 shots)",
		actions => ["dayattack;30"],
		status => {
			weapon => "healgun",
			weapondamage => -10,
			rechargeattack => 4,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Heal Gun",
		item_chargestatus => "actdayattack",
		theme => "worstidea",
	},
	item_laserdrone => {
		# 3.50 damage/sec
		roletext => "#TEXT Laser Drone (weapon, deals 10-60 damage to a random marked player every 10s)",
		actions => ["daymark", "dayunmark"],
		status => {
			weapon => "drone",
			weapondamage => 10,
			weaponmaxshots => 6,
			weaponkillmessage => "TARGET was sniped by PLAYER's Laser Drone!",
			rechargemark => 1,
			rechargeunmark => 1,
			onpulse => "action:attack #?m",
			"ondrop:item_laserdrone" => 'action:unmark #m',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Laser Drone",
		theme => "worstidea",
	},
	item_magnumlaser => {
		# 5.000+ damage/sec, total 225 damage
		roletext => "#TEXT Magnum Laser (weapon, 60 damage + 5 damage per 10s held, recharge 12s)",
		actions => ["dayattack"],
		status => {
			weapon => "gun",
			weapondamage => 60,
			weaponkillmessage => "TARGET left behind a pair of smoking boots thanks to PLAYER's Magnum Laser!",
			rechargeattack => 12,
			onpulse => "action:increasestatus #s",
			increase => "weapondamage,5",
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Magnum Laser",
		item_chargestatus => "weapondamage",
		theme => "worstidea",
	},
	item_reaverdrone => {
		# 6.125+ damage/sec
		roletext => "#TEXT Reaver Drone (weapon, deals 25-100 damage each to a random marked player every 10s, bonus attack each time it kills a player)",
		actions => ["daymark", "dayunmark"],
		status => {
			weapon => "drone",
			weapondamage => 25,
			weaponmaxshots => 4,
			weaponkillmessage => "TARGET was cut in half by PLAYER's Reaver Drone! Next!",
			rechargemark => 1,
			rechargeunmark => 1,
			onpulse => "action:attack #?m",
			onkill => "action:attack #?m",
			"ondrop:item_reaverdrone" => 'action:unmark #m',
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Reaver Drone",
		theme => "worstidea",
	},
	item_seraphblade => {
		# 4.00 damage/sec
		roletext => "#TEXT Seraph Blade (weapon, 60 damage + autokill after 2 hits, recharge 15s)",
		actions => ["dayattack"],
		status => {
			weapon => "knife",
			weapondamage => 60,
			weaponkillmessage => "TARGET was shown the light by PLAYER's Seraph Blade!",
			rechargeattack => 15,
			weapondoom => 50,
		},
		template => 1,
		template_forbidstatus => "weapon",
		item => 1,
		item_name => "Seraph Blade",
		theme => "worstidea",
	},

	# Items (other)
	item_shield => {
		roletext => "#TEXT Shield (item, absorbs 50 damage)",
		status => {
			shield => 50,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "shield,miscitem",
		item => 1,
		item_name => "Shield",
		item_chargestatus => "shield",
		theme => "worstidea",
	},
	item_supershield => {
		roletext => "#TEXT Super Shield (item, absorbs 100 damage)",
		status => {
			shield => 100,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "shield,miscitem",
		item => 1,
		item_name => "Super Shield",
		item_chargestatus => "shield",
		theme => "worstidea",
	},
	item_gravshield => {
		roletext => "#TEXT Grav Shield (item, absorbs 2 shots)",
		status => {
			immuneattack => 2,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "immuneattack,miscitem",
		item => 1,
		item_name => "Grav Shield",
		item_chargestatus => "immuneattack",
		theme => "worstidea",
	},
	item_armor => {
		roletext => "#TEXT Armor (item, absorbs 10 damage per shot)",
		status => {
			armor => 10,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "armor,miscitem",
		item => 1,
		item_name => "Armor",
		theme => "worstidea",
	},
	item_superarmor => {
		roletext => "#TEXT Super Armor (item, absorbs 20 damage per shot)",
		status => {
			armor => 20,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "armor,miscitem",
		item => 1,
		item_name => "Super Armor",
		theme => "worstidea",
	},
	item_ammopack => {
		roletext => "#TEXT Ammo Pack (item, reload weapon, 1s, 1 charge)",
		actions => ["dayreload;1"],
		status => {
			rechargereload => 1,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "miscitem",
		item => 1,
		item_name => "Ammo Pack",
		item_chargestatus => "actdayreload",
		theme => "worstidea",
	},
	item_regenerator => {
		roletext => "#TEXT Regenerator (item, heal 10 hp every 10 seconds)",
		status => {
			regen => 10,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "regen,miscitem",
		item => 1,
		item_name => "Regenerator",
		theme => "worstidea",
	},
	item_cloak => {
		roletext => "#TEXT Cloak (item, 50% chance of avoiding attacks, inactivates for 10s when you attack)",
		status => {
			resistattack => 50,
			replaceattack => "attack \\ timedsetstatus #S",
			timedset => "10;resistattack,-1",
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "replaceattack,resistattack,timedset,miscitem",
		item => 1,
		item_name => "Cloak",
		theme => "worstidea",
	},
	item_lazarusdevice => {
		roletext => "#TEXT Lazarus Device (item, return to life with 50 hp, 1 charge)",
		status => {
			revive => 1,
			revivehp => 50,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "armor,miscitem",
		item => 1,
		item_name => "Lazarus Device",
		item_chargestatus => "revive",
		theme => "worstidea",
	},
	item_damagebooster => {
		roletext => "#TEXT Damage Booster (item, deal 1.5x damage)",
		status => {
			weaponmultiplier => 1.5,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "weaponmultiplier,miscitem",
		item => 1,
		item_name => "Damage Booster",
		theme => "worstidea",
	},
	item_superdamagebooster => {
		roletext => "#TEXT Super Damage Booster (item, deal 2x damage)",
		status => {
			weaponmultiplier => 2,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "weaponmultiplier,miscitem",
		item => 1,
		item_name => "Super Damage Booster",
		theme => "worstidea",
	},
	item_speedbooster => {
		roletext => "#TEXT Speed Booster (item, recharge 50% faster)",
		status => {
			speedboost => 50,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "speedboost,miscitem",
		item => 1,
		item_name => "Speed Booster",
		theme => "worstidea",
	},
	item_superspeedbooster => {
		roletext => "#TEXT Super Speed Booster (item, recharge 100% faster)",
		status => {
			speedboost => 100,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "speedboost,miscitem",
		item => 1,
		item_name => "Super Speed Booster",
		theme => "worstidea",
	},
	item_apocalypsebooster => {
		roletext => "#TEXT Apocalypse Booster (item, activate to attack all other players at once without using ammo, recharge 30s, 1 charge)",
		actions => ["dayapocalypse;1"],
		status => {
			replaceapocalypse => "attack #*",
			rechargeapocalypse => 30,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "replaceapocalypse,miscitem",
		item => 1,
		item_name => "Apocalypse Booster",
		item_chargestatus => "actdayapocalypse",
		theme => "worstidea",
	},
	item_adrenalinebooster => {
		roletext => "#TEXT Adrenaline Booster (item, when you take damage you deal double damage and have half recharge for 5s)",
		status => {
			ondamage => "action:timedsetstatus #S",
			timedset => "5;speedboost,100;weaponmultiplier,2",
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "ondamage,miscitem",
		item => 1,
		item_name => "Adrenaline Booster",
		theme => "worstidea",
	},
	item_vampirebooster => {
		roletext => "#TEXT Vampire Booster (item, when you deal damage you heal half that much)",
		status => {
			weaponvampire => 50,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "weaponvampire,miscitem",
		item => 1,
		item_name => "Vampire Booster",
		theme => "worstidea",
	},
	item_hedgehogshield => {
		roletext => "#TEXT Hedgehog Shield (item, gain 100 shield and automatically attack anyone who attacks you for 20s, recharge 20s, 1 charge)",
		actions => ["dayhide;1"],
		status => {
			replacehide => "timedsetstatus #S",
			rechargehide => 20,
			timedset => "20;shield,100;ontarget:attack,activate:dayattack",
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "replacehide,timedset,miscitem",
		item => 1,
		item_name => "Hedgehog Shield",
		item_chargestatus => "actdayhide",
		theme => "worstidea",
	},
	item_thiefglove => {
		roletext => "#TEXT Thief Glove (item, steal a weapon or item, recharge 10s, 2 charges)",
		actions => ["daystealitem;2"],
		status => {
			rechargestealitem => 10,
			metaitem => '*',
		},
		template => 1,
		template_forbidstatus => "rechargestealitem,metaitem",
		item => 1,
		item_name => "Thief Glove",
		item_chargestatus => "actdaystealitem",
		theme => "worstidea",
	},
	item_neutralizer => {
		roletext => "#TEXT Neutralizer (item, disable for 15s, recharge 6s, 2 charges)",
		actions => ["daydisable;2"],
		status => {
			replacedisable => "timeddisable \\ announce",
			rechargedisable => 6,
			disabletime => 15,
			announce => "TARGET was caught in a Neutralizer field!",
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "replacedisable,timedset,miscitem",
		item => 1,
		item_name => "Neutralizer",
		theme => "worstidea",
	},
	item_silencer => {
		roletext => "#TEXT Silencer (item, your attacks are not announced)",
		status => {
			weaponsilent => 1,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "weaponsilent,miscitem",
		item => 1,
		item_name => "Silencer",
		theme => "worstidea",
	},
	item_saintsmedal => {
		roletext => "#TEXT Saint's Medal (item, the player who kills you dies)",
		status => {
			ongrave => "action:kill #1",
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "ongrave,miscitem",
		item => 1,
		item_name => "Saint's Medal",
		item_nodeathdrop => 1,
		theme => "worstidea",
	},
	item_championsmedal => {
		roletext => "#TEXT Champion's Medal (item, deal 1.5x damage and recharge 50% faster)",
		status => {
			weaponmultiplier => 1.5,
			speedboost => 50,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "weaponmultiplier,speedboost,miscitem",
		item => 1,
		item_name => "Champion's Medal",
		theme => "worstidea",
	},
	item_creditcard => {
		roletext => "#TEXT Credit Card (item, 1000 credits, can buy items using !buy)",
		status => {
			credits => 1000,
			metaitem => '*',
		},
		template => 1,
		template_forbidstatus => "credits,metaitem",
		item => 1,
		item_name => "Credit Card",
		item_chargestatus => "credits",
		theme => "worstidea",
	},
	item_platinumcreditcard => {
		roletext => "#TEXT Platinum Credit Card (item, 2500 credits, can buy items using !buy)",
		status => {
			credits => 2500,
			metaitem => '*',
		},
		template => 1,
		template_forbidstatus => "credits,metaitem",
		item => 1,
		item_name => "Platinum Credit Card",
		item_chargestatus => "credits",
		theme => "worstidea",
	},
	item_nukebeacon => {
		roletext => "#TEXT Nuke Beacon (item, call down nuclear strike, recharge 4s, 1 charge)",
		actions => ["daynuke;1"],
		status => {
			rechargenuke => 4,
			countdown => 20,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "countdown,miscitem",
		item => 1,
		item_name => "Nuke Beacon",
		item_chargestatus => "actdaynuke",
		theme => "worstidea",
	},
	item_morphball => {
		roletext => "#TEXT Morph Ball (item, become another player, recharge 1s, 1 charge)",
		actions => ["daymorph;1"],
		status => {
			rechargemorph => 1,
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "miscitem",
		item => 1,
		item_name => "Morph Ball",
		item_chargestatus => "actdaymorph",
		theme => "worstidea",
	},
	item_scanner => {
		roletext => "#TEXT Scanner (item, learn all items in use, recharge 1s)",
		actions => ["daycensus"],
		status => {
			rechargecensus => 1,
			census => "item",
			miscitem => 1,
		},
		template => 1,
		template_forbidstatus => "miscitem",
		item => 1,
		item_name => "Scanner",
		theme => "worstidea",
	},

	# Special roles - These are for moderated/multirole games
	# Mostly they just replace templated things with roles with funny names
	suicider => {
		name => "Suicider",
		roletext => "You will commit suicide the first night. There is nothing you can do to stop it.",
		onnight0 => "action:suicide",
		showhelp => 1,
	},
	hider => {
		name  => "Hider",
		roletext => "You can hide another player at night, preventing all other actions targeting that player.",
		actions => ["shield"],
		status => {
			evolveto => 'refl',
		},
		showhelp => 1,
		# No setup
		countas => 'd',
		power => 1,
	},
	rbbud => {
		name => "Griefer",
		roletext => "You automatically block BUDDY1 each night.",
		alias => 'rb+template_bud',
		showhelp => 1,
		# No setup
		countas => 'anar',
		power => 0,
	},
	bg3bud => {
		name => "Secret Service Agent",
		roletext => "You automatically guard BUDDY1 each night. If that player would be killed, you and the attacker will kill each other instead.",
		alias => 'bg3+template_bud',
		showhelp => 1,
		# No setup
		countas => 'dbud',
		power => 0.4,
	},
	alienbud => {
		name => "Cattle Mutilator",
		roletext => "You automatically abduct BUDDY1 each night, preventing all actions involving that player.",
		alias => 'alien+template_bud',
		showhelp => 1,
		# No setup
		countas => 'dbud',
		power => 0.2,
	},
	hiderbud => {
		name => "Shield Generator",
		roletext => "You automatically hide BUDDY1 each night, preventing all other actions targeting that player.",
		alias => 'hider+template_bud',
		showhelp => 1,
		# No setup
		countas => 'dbud',
		power => 0.4,
	},
	pgorev => {
		name => "Loran Special",
		alias => 'pgo+template_rev',
		showhelp => 1,
		# No setup
		countas => 'tik',
		power => 0.5,
	},
	
	# Template roles
	template_fail => {
		truename => "0% #NAME",
		help => "This role's actions always fail.",
		status => {
			'failure#ACTION*' => 100,
			tagfailure => '*',
			tagzero => '*',
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "tagfailure,tagmystery,tagnonsane",
	},
	template_fail75 => {
		truename => "25% #NAME",
		help => "This role's actions only work 25% of the time.",
		status => {
			'failure#ACTION*' => 75,
			tagfailure => '*',
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "tagfailure",
	},
	template_half => {
		truename => "50% #NAME",
		help => "This role's actions only work 50% of the time.",
		status => {
			'failure#ACTION*' => 50,
			tagfailure => '*',
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "tagfailure",
	},
	template_fail25 => {
		truename => "75% #NAME",
		help => "This role's actions only work 75% of the time.",
		status => {
			'failure#ACTION*' => 25,
			tagfailure => '*',
		},
		template => 1,
		template_minactions => 1,
		template_forbidstatus => "tagfailure",
	},
	template_false => {
		truename => "False #NAME",
		help => "This role does not function.",
		status => {
			tagfalse => 1,
		},
		template => 1,
		template_maxactions => 0,
		template_nobastard => 1,
		template_forbidstatus => "tagsibling",
		replacestatus => 1,
	},
	template_p => {
		truename => "Paranoid #NAME",
		help => "A paranoid cop always gets mafia results.",
		status => {
			sanity => 'paranoid',
			tagnonsane => '*',
		},
		template => 1,
		template_minactions => 1,
		template_requireactions => "inspect",
		template_forbidstatus => "sanity,tagzero",
	},
	template_n => {
		truename => "Naive #NAME",
		help => "A naive cop always gets town results.",
		status => {
			sanity => 'naive',
			tagnonsane => '*',
		},
		template => 1,
		template_minactions => 1,
		template_requireactions => "inspect",
		template_forbidstatus => "sanity,tagzero",
	},
	template_i => {
		truename => "Insane #NAME",
		help => "An insane cop gets town on mafia and mafia on town.",
		status => {
			sanity => 'insane',
			tagnonsane => '*',
		},
		template => 1,
		template_minactions => 1,
		template_requireactions => "inspect",
		template_forbidstatus => "sanity,tagzero",
	},
	template_r => {
		truename => "Random #NAME",
		help => "A random cop gets mafia half the time and town half the time.",
		status => {
			sanity => 'random',
			tagnonsane => '*',
		},
		template => 1,
		template_minactions => 1,
		template_requireactions => "inspect",
		template_forbidstatus => "sanity,tagzero",
	},
	template_z => {
		truename => "Stoned #NAME",
		help => "A stoned cop always gets neutral results.",
		status => {
			sanity => 'stoned',
			tagnonsane => '*',
		},
		template => 1,
		template_minactions => 1,
		template_requireactions => "inspect",
		template_forbidstatus => "sanity,tagzero",
	},
	template_my => {
		name => "Mystery Role",
		truename => "Mystery #NAME",
		roletext => "You have a night ability, but you don't know what it does.",
		help => "#TEXT",
		actions => ["mystery"],
		status => {
			replacemystery => '#ACTION0',
			failuremystery => '#VALUE:failure#ACTION0',
			'failure#ACTION0' => 0,
			tagmystery => '*',
		},
		template => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "replacemystery,tagmason,tagsibling,tagdeadtarget,tagzero",
		template_nodayactions => 1,
		replaceactions => 1,
		showhelp => 1,
	},
	template_q => {
		name => "Secret Role",
		truename => "Secret #NAME",
		roletext => "You don't know what your role does.",
		help => "#TEXT",
		template => 1,
		template_maxactions => 0,
		template_forbidstatus => 'tagmason,tagsibling,tagfalse',
		showhelp => 1,
	},
	template_bud => {
		name => "Dedicated #NAME",
		roletext => "#TEXT You will always target BUDDY1 with your action.",
		actions => ["auto#ACTION0"],
		status => {
			default => '#B',
		},
		template => 1,
		replaceactions => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "default,tagcombined",
	},
	template_psycho => {
		truename => "Psychotic #NAME",
		help => "You kill a random player each night. You show up as a Serial Killer (sk) to cops and on death.",
		status => {
			onnight => 'action',
			auto => 'randomkill',
			inspect => 'sk',
			inspectrole => 'Serial Killer',
			deathrole => 'Serial Killer',
			deathteam => 'sk',
			weapon => 'knife',
		},
		template => 1,
		template_forbidstatus => "onnight,auto",
	},
	template_ik2 => {
		name => "Bulletproof #NAME",
		roletext => "#TEXT You are immune to kills.",
		status => {
			immunekill => '*',
		},
		template => 1,
		template_forbidstatus => "immunekill",
	},
	template_ghost => {
		name => "Ghost #NAME",
		roletext => "#TEXT Your actions can't be detected by trackers or watchmen.",
		status => {
			invisible => '*',
		},
		template => 1,
		template_forbidstatus => "invisible",
	},
	template_nm => {
		name => "Amnesiac",
		truename => "Amnesiac #NAME",
		roletext => "You have lost your memory. You might eventually regain it.",
		help => "An Amnesiac has a 1 in 3 chance of regaining his memory each morning.",
		actions => [],
		status => {
			onday => "action",
			auto => "transform ? none ? none",
			transform => "template_nm=nm2",
		},
		template => 1,
		replaceactions => 1,
		replacestatus => 1,
		replacegroups => 1,
		showhelp => 1,
	},
	nm2 => {
		roletext => "You have regained your memory. #TEXT",
		template => 1,
	},
	template_lat => {
		name => "Sleeper #NAME",
		roletext => "Right now, you don't have any powers, but if BUDDY1 dies you will become a #NAME.",
		actions => [],
		status => {
			onbuddydeath => "transform:template_lat=lat2",
		},
		template => 1,
		replaceactions => 1,
		replacestatus => 1,
		replacegroups => 1,
	},
	lat2 => {
		roletext => "You have gained your powers. #TEXT",
		template => 1,
	},
	template_skulk => {
		name => "Skulking #NAME",
		roletext => "#TEXT If you are targeted by an action, you will commit suicide.",
		status => {
			ontarget => 'action:suicide',
		},
		template => 1,
		template_forbidstatus => 'ontarget',
	},
	template_skulkfalse => { alias => 'template_false+template_skulk' },
	template_backup => {
		name => "Backup #NAME",
		roletext => "When the #NAME dies, you will become a #NAME.",
		actions => [],
		status => {
			"onroledeath1:#BASE" => "transform:#BASE",
		},
		template => 1,
		replaceactions => 1,
		replacestatus => 1,
		replacegroups => 1,
	},
	template_reflex => {
		name => "Reflex #NAME",
		roletext => "#TEXT Your action applies automatically to anyone who targets you with an action. The copied action can't be roleblocked.",
		actions => [],
		status => {
			ontarget => 'action:#ACTION0',
		},
		template => 1,
		template_forbidstatus => 'ontarget,tagcombined',
		template_nodayactions => 1,
		replaceactions => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
	},
	template_self => {
		name => "Self-#NAME",
		roletext => "#TEXT You use your action on yourself every night.",
		actions => ["auto#ACTION0"],
		status => {
			default => '#S',
		},
		template => 1,
		template_forbidstatus => 'default',
		template_nodayactions => 1,
		replaceactions => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
	},
	template_depr => {
		name => "Depressed #NAME",
		roletext => "#TEXT You must use an action every night or you will commit suicide.",
		status => {
			replacenone => 'suicide',
		},
		template => 1,
		template_minactions => 1,
		template_forbidstatus => "replacenone",
	},
	template_1 => {
		name => "One-Shot #NAME",
		roletext => "#TEXT Your ability can only be used once.",
		actions => ["#ACTION*;1"],
		status => {
			tagoneshot => '*',
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "tagoneshot",
		replaceactions => 1,
	},
	template_day => {
		name => "Day #NAME",
		roletext => "#TEXT You act during the day, not at night.",
		actions => ["day#ACTION*"],
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
		template_forbidstatus => "tagnoday",
		replaceactions => 1,
	},
	template_x => {
		name => "X-#NAME",
		roletext => "#TEXT Your ability can be used during night or day, but only once. If you want to save your ability for later, send a 'none' action at night.",
		actions => ["x#ACTION*;1"],
		status => {
			tagoneshot => '*',
		},
		template => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
		template_forbidstatus => "tagnoday,tagoneshot",
		replaceactions => 1,
	},
	template_eager => {
		name => "Overeager #NAME",
		roletext => "#TEXT If you don't use an action at night, you will #ACTION0 a random player.",
		status => {
			replacenone => "#ACTION0 #?",
			tagnoday => '*',
		},
		template => 1,
		template_forbidstatus => "replacenone",
		template_minactions => 1,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
	},
	template_auto => {
		name => "Automatic #NAME",
		roletext => "#TEXT You will automatically use your action on a random player each night.",
		actions => ["auto#ACTION*"],
		status => {
			default => '#?',
		},
		template => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "default,tagdeadtarget,tagcombined",
		template_nodayactions => 1,
		replaceactions => 1,
	},
	template_grave => {
		name => "Grave #NAME",
		roletext => "#TEXT You can target a player of your choice with your action when you die.",
		actions => [],
		status => {
			ghostaction => '#ACTIONNAME0',
		},
		template => 1,
		template_minactions => 1,
		template_maxactions => 1,
		template_ignoregroupactions => 1,
		template_forbidstatus => "ongrave,tagcombined",
		template_nodayactions => 1,
		replaceactions => 1,
	},
	template_grant => {
		name => "#NAME-Maker",
		roletext => "You can target another player to make them a #NAME in addition to their original role.",
		actions => ["gift"],
		status => {
			replacegift => "transformother",
			transform => "+#BASE",
		},
		template => 1,
		replaceactions => 1,
		replacestatus => 1,
	},
	# Killer: The target dies in additional to the normal effect.
	# The player does not know about this template.
	template_splat => {
		truename => "Killer #NAME",
		help => "In addition, you kill your target.",
		status => {
			'replace#ACTION*' => '#ACTION* \\ kill',
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
	},
	# Manic-Depressive: There is a 50% chance of the normal result and a 50% chance of a kill.
	# The player does not know about this template.
	template_kill => {
		truename => "Manic-Depressive #NAME",
		help => "You have a 50% chance of killing your target instead.",
		status => {
			'replace#ACTION*' => '#ACTION* ? kill',
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
	},
	# Radioactive: If the same person is targeted twice, they die.
	template_rad => {
		name => "Radioactive #NAME",
		roletext => "#TEXT If you target the same player twice, they will die.",
		status => {
			'replace#ACTION*' => '#ACTION* \\ doom',
			doompercent => 50,
		},
		template => 1,
		template_minactions => 1,
		template_ignoregroupactions => 1,
	},
	template_conf2 => {
		name => "Confused #NAME",
		help => "You actually use a different action from the one you try to use.",
		status => {
			'replace#ACTION0' => '#ACTION1',
			'replace#ACTION1' => '#ACTION0',
		},
		template => 1,
		template_minactions => 2,
		template_maxactions => 2,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
	},
	template_conf3 => {
		name => "Confused #NAME",
		help => "You actually use a different action from the one you try to use.",
		status => {
			'replace#ACTION0' => '#ACTION1 ? #ACTION2',
			'replace#ACTION1' => '#ACTION0 ? #ACTION2',
			'replace#ACTION2' => '#ACTION0 ? #ACTION1',
		},
		template => 1,
		template_minactions => 3,
		template_maxactions => 3,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
	},
	template_conf4 => {
		name => "Confused #NAME",
		help => "You actually use a different action from the one you try to use.",
		status => {
			'replace#ACTION0' => '#ACTION1 ? #ACTION2 ? #ACTION3',
			'replace#ACTION1' => '#ACTION0 ? #ACTION2 ? #ACTION3',
			'replace#ACTION2' => '#ACTION0 ? #ACTION1 ? #ACTION3',
			'replace#ACTION3' => '#ACTION0 ? #ACTION1 ? #ACTION2',
		},
		template => 1,
		template_minactions => 4,
		template_maxactions => 4,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
	},
	template_comb => {
		# This is generated specially in multirole setups
		name => "Combined #NAME",
		roletext => "#TEXT You use both your abilities on the same target.",
		actions => ["special"],
		status => {
			'replacespecial' => '#ACTION0 \\ #ACTION1',
			tagcombined => '*',
		},
		template => 1,
		template_minactions => 2,
		template_maxactions => 2,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
		template_nokills => 1,
		template_forbidstatus => 'replacespecial,tagdeadtarget',
		replaceactions => 1,
	},
	template_alt => {
		# This is generated specially in multirole setups
		name => "Lesser #NAME",
		roletext => "#TEXT You use one of your abilities randomly on your target.",
		actions => ["special"],
		status => {
			'replacespecial' => '#ACTION0 ? #ACTION1',
			tagcombined => '*',
		},
		template => 1,
		template_minactions => 2,
		template_maxactions => 2,
		template_ignoregroupactions => 1,
		template_nodayactions => 1,
		template_forbidstatus => 'replacespecial,tagdeadtarget',
		replaceactions => 1,
	},
	template_antim => {
		name => "Antimiller #NAME",
		roletext => "#TEXT You show up as a Townie (town) on death.",
		status => {
			deathrole => "*",
			deathteam => "town",
		},
		template => 1,
		template_forbidstatus => "deathrole,deathteam",
	},
	template_ikasc => {
		name => "Action-Immune #NAME",
		alias => 'template_ik+template_asc',
		template => 1,
	},
	template_ascik => { alias => 'template_ikasc' },
	
	# Test role
	votf => {
		name => "Vote Dictator",
		roletext => "",
		actions => ["dayforcevote"],
		power => 1,
	},
	buddy => {
		name => "Buddy",
		roletext => "You are buddies with BUDDY1.",
		actions => ["autofriend"],
		status => {
			default => "#B",
		},
	},
	testrole => {
		name => "Test Role",
		actions => ["xsafeclaim"],
		status => {
			message => "Test",
			freesafeclaim => 1,
		},
	},
	item_widget => {
		name => "#NAME with Widget",
		roletext => "#TEXT You have a widget.",
		actions => ["dayfriend;2"],
		status => {
			rechargefriend => 5,
		},
		template => 1,
		item => 1,
		item_name => "Widget",
		item_chargestatus => "actdayfriend",
	},
	item_nerfgun => {
		name => "#NAME with Nerf Gun",
		roletext => "#TEXT Nerf Gun (weapon, 10 damage)",
		actions => ["dayattack"],
		status => {
			weapon => "gun",
			weapondamage => 10,
			rechargeattack => 1,
		},
		template => 1,
		template_forbidstatus => "weapondamage",
		item => 1,
		item_name => "Nerf Gun",
	},
);

our (%setuprole_cache, %evolution_cache, %canonicalize_cache);
%setuprole_cache = %evolution_cache = %canonicalize_cache = ();

sub add_gunfight_role {
	my ($level, $gun, $misc) = @_;

	my $hp;
	if    ($level >= 8) { $hp = 200; }
	elsif ($level >= 6) { $hp = 150; }
	elsif ($level >= 4) { $hp = 120; }
	else                { $hp = 100; }
	
	my $name = "gunfighter${hp}${gun}";
	$name .= $misc if $misc;

	my $alias = "gunfighter${hp}+item_${gun}";
	$alias .= "+item_${misc}" if $misc;

	my $role = {
		alias => $alias,
		theme => "worstidea",
		setup => "town/basic,mafia/basic,sk/basic",
		rarity => $misc ? 2 : 1,
		power => ($misc ? 1.0 : 0.5),
		minplayers => $level,
	};

	$role_config{$name} = $role;

	if ($gun eq "disruptor") {
		$role_config{$name}{setup_checks} = [
			"disruptor=polaritywave,maxpartpolaritywave,0", 
			"disruptor=polaritywave,maxpartdisruptor,1"
		],
		$name =~ s/disruptor/polaritywave/;
		$alias =~ s/disruptor/polaritywave/;
		my $role = {
			alias => $alias,
			theme => "worstidea",
			setup => "none",
			rarity => 1,
			minplayers => $level,
			power => ($misc ? 1.0 : 0.5),
		};
		$role_config{$name} = $role;
	}
}

sub add_gunfight_role_fake {
	my ($hp, $gun, $misc) = @_;

	my $name = "gunfighter${hp}${gun}";
	$name .= $misc if $misc;

	return if $role_config{$name};

	my $alias = "gunfighter${hp}+item_${gun}";
	$alias .= "+item_${misc}" if $misc;

	my $role = {
		alias => $alias,
		theme => "worstidea",
		setup => "none",
		power => ($misc ? 1.0 : 0.5),
	};

	$role_config{$name} = $role;
}

# item_knife
add_gunfight_role(3, "knife");
add_gunfight_role(4, "knife");
add_gunfight_role(4, "knife", "thiefglove");
add_gunfight_role(4, "knife", "shield");
# item_vibroknife
add_gunfight_role(3, "vibroknife");
add_gunfight_role(4, "vibroknife");
add_gunfight_role(4, "vibroknife", "gravshield");
add_gunfight_role(4, "vibroknife", "neutralizer");
add_gunfight_role(6, "vibroknife");
add_gunfight_role(6, "vibroknife", "superdamagebooster");
# item_monoblade
add_gunfight_role(3, "monoblade");
add_gunfight_role(4, "monoblade");
add_gunfight_role(4, "monoblade", "armor");
add_gunfight_role(4, "monoblade", "scanner");
add_gunfight_role(6, "monoblade");
add_gunfight_role(6, "monoblade", "speedbooster");
# item_paranoiaknife
add_gunfight_role(6, "paranoiaknife");
add_gunfight_role(6, "paranoiaknife", "gravshield");
add_gunfight_role(6, "paranoiaknife", "thiefglove");
add_gunfight_role(8, "paranoiaknife");
add_gunfight_role(8, "paranoiaknife", "nukebeacon");
add_gunfight_role(8, "paranoiaknife", "superspeedbooster");
# item_handgun
add_gunfight_role(3, "handgun");
add_gunfight_role(4, "handgun");
add_gunfight_role(4, "handgun", "ammopack");
add_gunfight_role(4, "handgun", "damagebooster");
add_gunfight_role(4, "handgun", "shield");
add_gunfight_role(4, "handgun", "scanner");
# item_autopistol
add_gunfight_role(3, "autopistol");
add_gunfight_role(4, "autopistol");
add_gunfight_role(4, "autopistol", "ammopack");
add_gunfight_role(4, "autopistol", "shield");
add_gunfight_role(6, "autopistol");
add_gunfight_role(6, "autopistol", "superspeedbooster");
# item_stunner
add_gunfight_role(3, "stunner");
add_gunfight_role(4, "stunner");
add_gunfight_role(4, "stunner", "gravshield");
add_gunfight_role(4, "stunner", "damagebooster");
add_gunfight_role(4, "stunner", "scanner");
add_gunfight_role(4, "stunner", "armor");
# item_rifle
add_gunfight_role(3, "rifle");
add_gunfight_role(4, "rifle");
add_gunfight_role(4, "rifle", "armor");
add_gunfight_role(4, "rifle", "speedbooster");
add_gunfight_role(6, "rifle");
add_gunfight_role(6, "rifle", "superdamagebooster");
# item_sniperrifle
add_gunfight_role(4, "sniperrifle");
add_gunfight_role(4, "sniperrifle", "silencer");
add_gunfight_role(4, "sniperrifle", "cloak");
add_gunfight_role(4, "sniperrifle", "ammopack");
add_gunfight_role(6, "sniperrifle");
add_gunfight_role(6, "sniperrifle", "damagebooster");
# item_chaosrifle
add_gunfight_role(5, "chaosrifle");
add_gunfight_role(5, "chaosrifle", "vampirebooster");
add_gunfight_role(5, "chaosrifle", "gravshield");
add_gunfight_role(5, "chaosrifle", "morphball");
add_gunfight_role(6, "chaosrifle");
add_gunfight_role(6, "chaosrifle", "apocalypsebooster");
# item_gaussrifle
add_gunfight_role(5, "gaussrifle");
add_gunfight_role(5, "gaussrifle", "armor");
add_gunfight_role(6, "gaussrifle");
add_gunfight_role(6, "gaussrifle", "supershield");
add_gunfight_role(6, "gaussrifle", "damagebooster");
add_gunfight_role(6, "gaussrifle", "adrenalinebooster");
# item_railgun
add_gunfight_role(6, "railgun");
add_gunfight_role(6, "railgun", "cloak");
add_gunfight_role(6, "railgun", "gravshield");
add_gunfight_role(8, "railgun");
add_gunfight_role(8, "railgun", "superarmor");
add_gunfight_role(8, "railgun", "championsmedal");
# item_stickygun
add_gunfight_role(4, "stickygun");
add_gunfight_role(4, "stickygun", "cloak");
add_gunfight_role(4, "stickygun", "ammopack");
add_gunfight_role(4, "stickygun", "gravshield");
add_gunfight_role(6, "stickygun");
add_gunfight_role(6, "stickygun", "damagebooster");
# item_retributor
add_gunfight_role(4, "retributor");
add_gunfight_role(4, "retributor", "vampirebooster");
add_gunfight_role(4, "retributor", "saintsmedal");
add_gunfight_role(6, "retributor");
add_gunfight_role(6, "retributor", "hedgehogshield");
add_gunfight_role(6, "retributor", "superarmor");
# item_disruptor
add_gunfight_role(4, "disruptor");
add_gunfight_role(4, "disruptor", "silencer");
add_gunfight_role(4, "disruptor", "neutralizer");
add_gunfight_role(4, "disruptor", "shield");
add_gunfight_role(6, "disruptor");
add_gunfight_role(6, "disruptor", "damagebooster");
# item_polaritywave
# item_neuralpulse
add_gunfight_role(4, "neuralpulse");
add_gunfight_role(4, "neuralpulse", "silencer");
add_gunfight_role(4, "neuralpulse", "hedgehogshield");
add_gunfight_role(4, "neuralpulse", "speedbooster");
add_gunfight_role(6, "neuralpulse");
add_gunfight_role(6, "neuralpulse", "apocalypsebooster");
# item_osiris
add_gunfight_role(4, "osiris");
add_gunfight_role(4, "osiris", "vampirebooster");
add_gunfight_role(4, "osiris", "regenerator");
add_gunfight_role(4, "osiris", "gravshield");
add_gunfight_role(6, "osiris");
add_gunfight_role(6, "osiris", "lazarusdevice");
# item_soulcannon
add_gunfight_role(4, "soulcannon");
add_gunfight_role(4, "soulcannon", "adrenalinebooster");
add_gunfight_role(4, "soulcannon", "shield");
add_gunfight_role(6, "soulcannon");
add_gunfight_role(6, "soulcannon", "damagebooster");
add_gunfight_role(6, "soulcannon", "lazarusdevice");
# item_grenadelauncher
add_gunfight_role(4, "grenadelauncher");
add_gunfight_role(4, "grenadelauncher", "ammopack");
add_gunfight_role(4, "grenadelauncher", "speedbooster");
add_gunfight_role(6, "grenadelauncher");
add_gunfight_role(6, "grenadelauncher", "supershield");
add_gunfight_role(6, "grenadelauncher", "superdamagebooster");
# item_shotgun
add_gunfight_role(3, "shotgun");
add_gunfight_role(4, "shotgun");
add_gunfight_role(4, "shotgun", "ammopack");
add_gunfight_role(4, "shotgun", "armor");
add_gunfight_role(6, "shotgun");
add_gunfight_role(6, "shotgun", "championsmedal");
# item_chaingun
add_gunfight_role(6, "chaingun");
add_gunfight_role(6, "chaingun", "ammopack");
add_gunfight_role(6, "chaingun", "scanner");
add_gunfight_role(8, "chaingun");
add_gunfight_role(8, "chaingun", "speedbooster");
add_gunfight_role(8, "chaingun", "supershield");
# item_avenger
add_gunfight_role(4, "avenger");
add_gunfight_role(4, "avenger", "hedgehogshield");
add_gunfight_role(4, "avenger", "adrenalinebooster");
add_gunfight_role(6, "avenger");
add_gunfight_role(6, "avenger", "superspeedbooster");
add_gunfight_role(6, "avenger", "championsmedal");
# item_poisondartgun
add_gunfight_role(4, "poisondartgun");
add_gunfight_role(4, "poisondartgun", "ammopack");
add_gunfight_role(4, "poisondartgun", "neutralizer");
add_gunfight_role(4, "poisondartgun", "armor");
add_gunfight_role(6, "poisondartgun");
add_gunfight_role(6, "poisondartgun", "morphball");
# item_plasmarifle
add_gunfight_role(4, "plasmarifle");
add_gunfight_role(4, "plasmarifle", "gravshield");
add_gunfight_role(4, "plasmarifle", "armor");
add_gunfight_role(4, "plasmarifle", "damagebooster");
add_gunfight_role(6, "plasmarifle");
add_gunfight_role(6, "plasmarifle", "supershield");
# item_plasmalauncher
add_gunfight_role(6, "plasmalauncher");
add_gunfight_role(8, "plasmalauncher");
add_gunfight_role(8, "plasmalauncher", "ammopack");
add_gunfight_role(8, "plasmalauncher", "shield");
# item_healgun
add_gunfight_role(4, "healgun");
add_gunfight_role(4, "healgun", "saintsmedal");
add_gunfight_role(4, "healgun", "regenerator");
add_gunfight_role(4, "healgun", "shield");
# item_laserdrone
add_gunfight_role(4, "laserdrone");
add_gunfight_role(4, "laserdrone", "gravshield");
add_gunfight_role(4, "laserdrone", "shield");
add_gunfight_role(6, "laserdrone");
add_gunfight_role(6, "laserdrone", "damagebooster");
add_gunfight_role(6, "laserdrone", "superarmor");
# item_magnumlaser
add_gunfight_role(6, "magnumlaser");
add_gunfight_role(6, "magnumlaser", "gravshield");
add_gunfight_role(8, "magnumlaser");
add_gunfight_role(8, "magnumlaser", "speedbooster");
# item_reaverdrone
add_gunfight_role(6, "reaverdrone");
add_gunfight_role(8, "reaverdrone");
add_gunfight_role(8, "reaverdrone", "armor");
add_gunfight_role(8, "reaverdrone", "shield");
# item_seraphblade
add_gunfight_role(6, "seraphblade");
add_gunfight_role(6, "seraphblade", "saintsmedal");
add_gunfight_role(6, "seraphblade", "lazarusdevice");
add_gunfight_role(6, "seraphblade", "regenerator");
add_gunfight_role(8, "seraphblade");
add_gunfight_role(8, "seraphblade", "apocalypsebooster");
# item_thiefglove
add_gunfight_role(4, "thiefglove");
# item_creditcard
add_gunfight_role(4, "creditcard");
add_gunfight_role(6, "creditcard");
# item_platinumcreditcard
add_gunfight_role(8, "platinumcreditcard");
# item_nukebeacon
add_gunfight_role(5, "nukebeacon");
add_gunfight_role(6, "nukebeacon");
# item_morphball
add_gunfight_role(6, "morphball");

my @gunfight_items = grep { $role_config{$_}{item} && $role_config{$_}{theme} =~ /worstidea/} keys %role_config;
my @gunfight_weapons = map { (my $x = $_) =~ s/^item_//; $x } grep { $role_config{$_}{status}{weapon} } @gunfight_items;
my @gunfight_miscitems = map { (my $x = $_) =~ s/^item_//; $x } grep { !$role_config{$_}{status}{weapon} } @gunfight_items;

foreach my $hp (qw(100 120 150 200))
{
	foreach my $weapon (@gunfight_weapons)
	{
		add_gunfight_role_fake($hp, $weapon);
		foreach my $miscitem (@gunfight_miscitems)
		{
			add_gunfight_role_fake($hp, $weapon, $miscitem)
		}
	}
	foreach my $miscitem (qw(thiefglove creditcard platinumcreditcard))
	{
		add_gunfight_role_fake($hp, $miscitem);
	}
}

read_adaptive_powers();

1;
